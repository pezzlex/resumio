{"ast":null,"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _regenerator = _interopRequireDefault(require(\"@babel/runtime/regenerator\"));\n\nvar _reduxSaga = require(\"redux-saga\");\n\nvar _effects = require(\"redux-saga/effects\");\n\nvar _utils = require(\"./utils\");\n\nvar _marked = /*#__PURE__*/_regenerator.default.mark(syncMessages),\n    _marked2 = /*#__PURE__*/_regenerator.default.mark(syncToken);\n\nfunction channel() {\n  if (this._messageChannel) return this._messageChannel;\n  var messaging = this.app.messaging();\n  var channel = (0, _reduxSaga.eventChannel)(function (emit) {\n    var unsubscribe = messaging.onMessage(emit);\n    return unsubscribe;\n  });\n  this._messageChannel = channel;\n  return channel;\n}\n\nfunction syncMessages(options) {\n  var channel;\n  return _regenerator.default.wrap(function syncMessages$(_context) {\n    while (1) {\n      switch (_context.prev = _context.next) {\n        case 0:\n          _context.next = 2;\n          return (0, _effects.call)(this.messaging.channel);\n\n        case 2:\n          channel = _context.sent;\n          _context.next = 5;\n          return (0, _effects.fork)(_utils.syncChannel, channel, options);\n\n        case 5:\n        case \"end\":\n          return _context.stop();\n      }\n    }\n  }, _marked, this);\n}\n\nfunction tokenRefreshChannel() {\n  if (this._tokenRefreshChannel) return this._tokenRefreshChannel;\n  var messaging = this.app.messaging();\n  var channel = (0, _reduxSaga.eventChannel)(function (emit) {\n    var unsubscribe = messaging.onTokenRefresh(function () {\n      messaging.getToken().then(emit);\n    });\n    return unsubscribe;\n  });\n  this._tokenRefreshChannel = channel;\n  return channel;\n}\n\nfunction syncToken(options) {\n  var channel;\n  return _regenerator.default.wrap(function syncToken$(_context2) {\n    while (1) {\n      switch (_context2.prev = _context2.next) {\n        case 0:\n          _context2.next = 2;\n          return (0, _effects.call)(this.messaging.tokenRefreshChannel);\n\n        case 2:\n          channel = _context2.sent;\n          _context2.next = 5;\n          return (0, _effects.fork)(_utils.syncChannel, channel, options);\n\n        case 5:\n        case \"end\":\n          return _context2.stop();\n      }\n    }\n  }, _marked2, this);\n}\n\nvar _default = {\n  channel: channel,\n  syncMessages: syncMessages,\n  syncToken: syncToken,\n  tokenRefreshChannel: tokenRefreshChannel\n};\nexports.default = _default;","map":{"version":3,"sources":["/Users/pezannekhambatta/Desktop/resumio/node_modules/redux-saga-firebase/dist/messaging.js"],"names":["_interopRequireDefault","require","Object","defineProperty","exports","value","default","_regenerator","_reduxSaga","_effects","_utils","_marked","mark","syncMessages","_marked2","syncToken","channel","_messageChannel","messaging","app","eventChannel","emit","unsubscribe","onMessage","options","wrap","syncMessages$","_context","prev","next","call","sent","fork","syncChannel","stop","tokenRefreshChannel","_tokenRefreshChannel","onTokenRefresh","getToken","then","syncToken$","_context2","_default"],"mappings":"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","sourcesContent":["\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _regenerator = _interopRequireDefault(require(\"@babel/runtime/regenerator\"));\n\nvar _reduxSaga = require(\"redux-saga\");\n\nvar _effects = require(\"redux-saga/effects\");\n\nvar _utils = require(\"./utils\");\n\nvar _marked =\n/*#__PURE__*/\n_regenerator.default.mark(syncMessages),\n    _marked2 =\n/*#__PURE__*/\n_regenerator.default.mark(syncToken);\n\nfunction channel() {\n  if (this._messageChannel) return this._messageChannel;\n  var messaging = this.app.messaging();\n  var channel = (0, _reduxSaga.eventChannel)(function (emit) {\n    var unsubscribe = messaging.onMessage(emit);\n    return unsubscribe;\n  });\n  this._messageChannel = channel;\n  return channel;\n}\n\nfunction syncMessages(options) {\n  var channel;\n  return _regenerator.default.wrap(function syncMessages$(_context) {\n    while (1) {\n      switch (_context.prev = _context.next) {\n        case 0:\n          _context.next = 2;\n          return (0, _effects.call)(this.messaging.channel);\n\n        case 2:\n          channel = _context.sent;\n          _context.next = 5;\n          return (0, _effects.fork)(_utils.syncChannel, channel, options);\n\n        case 5:\n        case \"end\":\n          return _context.stop();\n      }\n    }\n  }, _marked, this);\n}\n\nfunction tokenRefreshChannel() {\n  if (this._tokenRefreshChannel) return this._tokenRefreshChannel;\n  var messaging = this.app.messaging();\n  var channel = (0, _reduxSaga.eventChannel)(function (emit) {\n    var unsubscribe = messaging.onTokenRefresh(function () {\n      messaging.getToken().then(emit);\n    });\n    return unsubscribe;\n  });\n  this._tokenRefreshChannel = channel;\n  return channel;\n}\n\nfunction syncToken(options) {\n  var channel;\n  return _regenerator.default.wrap(function syncToken$(_context2) {\n    while (1) {\n      switch (_context2.prev = _context2.next) {\n        case 0:\n          _context2.next = 2;\n          return (0, _effects.call)(this.messaging.tokenRefreshChannel);\n\n        case 2:\n          channel = _context2.sent;\n          _context2.next = 5;\n          return (0, _effects.fork)(_utils.syncChannel, channel, options);\n\n        case 5:\n        case \"end\":\n          return _context2.stop();\n      }\n    }\n  }, _marked2, this);\n}\n\nvar _default = {\n  channel: channel,\n  syncMessages: syncMessages,\n  syncToken: syncToken,\n  tokenRefreshChannel: tokenRefreshChannel\n};\nexports.default = _default;"]},"metadata":{},"sourceType":"script"}