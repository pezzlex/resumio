{"ast":null,"code":"import _regeneratorRuntime from \"/Users/pezannekhambatta/Desktop/resumio/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/Users/pezannekhambatta/Desktop/resumio/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _objectSpread from \"/Users/pezannekhambatta/Desktop/resumio/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";\nimport _slicedToArray from \"/Users/pezannekhambatta/Desktop/resumio/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/Users/pezannekhambatta/Desktop/resumio/packages/isomorphic-boilerplate-single/src/containers/FirebaseForm/FirebaseForm.js\";\nimport React from 'react';\nimport Button from '@iso/components/uielements/button';\nimport Input from '@iso/components/uielements/input';\nimport Modal from '@iso/components/Feedback/Modal';\nimport notification from '@iso/components/Feedback/Notification';\nimport { signInWithEmail, signUpWithEmailAndPassword, resetPassword } from '@iso/lib/firebase/firebase.authentication.util';\nexport default function (props) {\n  const _React$useState = React.useState({\n    visible: false,\n    email: 'demo@gmail.com',\n    password: 'demodemo',\n    confirmLoading: false\n  }),\n        _React$useState2 = _slicedToArray(_React$useState, 2),\n        state = _React$useState2[0],\n        setState = _React$useState2[1];\n\n  const handleChange = e => {\n    const _e$target = e.target,\n          name = _e$target.name,\n          value = _e$target.value;\n    setState(_objectSpread(_objectSpread({}, state), {}, {\n      [name]: value\n    }));\n  };\n\n  const showModal = () => {\n    setState(_objectSpread(_objectSpread({}, state), {}, {\n      visible: true\n    }));\n  };\n\n  const handleCancel = e => {\n    setState(_objectSpread(_objectSpread({}, state), {}, {\n      visible: false\n    }));\n  };\n\n  const handleLogin = /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n      var email, password, user, message, token;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) switch (_context.prev = _context.next) {\n          case 0:\n            email = state.email, password = state.password;\n\n            if (email && password) {\n              _context.next = 4;\n              break;\n            }\n\n            notification('error', 'Please fill in email. and password');\n            return _context.abrupt(\"return\");\n\n          case 4:\n            setState(_objectSpread(_objectSpread({}, state), {}, {\n              confirmLoading: true\n            }));\n\n            if (!props.signup) {\n              _context.next = 17;\n              break;\n            }\n\n            _context.prev = 6;\n            _context.next = 9;\n            return signUpWithEmailAndPassword(email, password).then(authUser => {\n              user = authUser.user;\n              console.log(user, 'User');\n            });\n\n          case 9:\n            _context.next = 15;\n            break;\n\n          case 11:\n            _context.prev = 11;\n            _context.t0 = _context[\"catch\"](6);\n            message = _context.t0.message;\n            console.log(_context.t0.message, 'Error');\n\n          case 15:\n            _context.next = 26;\n            break;\n\n          case 17:\n            _context.prev = 17;\n            _context.next = 20;\n            return signInWithEmail(email, password).then(authUser => {\n              user = authUser.user;\n            });\n\n          case 20:\n            _context.next = 26;\n            break;\n\n          case 22:\n            _context.prev = 22;\n            _context.t1 = _context[\"catch\"](17);\n            message = _context.t1.message;\n            console.log(_context.t1.message, 'Error');\n\n          case 26:\n            if (!user) {\n              _context.next = 34;\n              break;\n            }\n\n            _context.next = 29;\n            return user.getIdToken();\n\n          case 29:\n            token = _context.sent;\n            props.login(token);\n            props.history.push('/dashboard');\n            _context.next = 36;\n            break;\n\n          case 34:\n            notification('error', message);\n            setState(_objectSpread(_objectSpread({}, state), {}, {\n              confirmLoading: false\n            }));\n\n          case 36:\n          case \"end\":\n            return _context.stop();\n        }\n      }, _callee, null, [[6, 11], [17, 22]]);\n    }));\n\n    return function handleLogin() {\n      return _ref.apply(this, arguments);\n    };\n  }();\n\n  const handleResetPassword = () => {\n    const email = state.email;\n\n    if (!email) {\n      notification('error', \"Please fill in email.\");\n      return;\n    }\n\n    resetPassword(email).then(() => notification('success', \"Password reset email sent to \".concat(email, \".\"))).catch(error => notification('error', 'Email address not found.'));\n  };\n\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Button, {\n    type: \"primary\",\n    onClick: showModal,\n    className: \"btnFirebase\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 7\n    }\n  }, props.signup ? 'Sign up with Firebase' : 'Sign in with Firebase'), /*#__PURE__*/React.createElement(Modal, {\n    title: props.signup ? 'Sign up with Firebase' : 'Sign in with Firebase',\n    visible: state.visible,\n    confirmLoading: state.confirmLoading,\n    onCancel: handleCancel,\n    onOk: handleLogin,\n    className: \"isoFirebaseLoginModal\",\n    cancelText: \"Cancel\",\n    okText: props.signup ? 'Sign Up' : 'Login',\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"form\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"isoInputWrapper\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 13\n    }\n  }, \"Email\"), /*#__PURE__*/React.createElement(Input, {\n    name: \"email\",\n    size: \"large\",\n    placeholder: \"Email\",\n    value: state.email,\n    onChange: handleChange,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 13\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"isoInputWrapper\",\n    style: {\n      marginBottom: 10\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 121,\n      columnNumber: 13\n    }\n  }, \"Password\"), /*#__PURE__*/React.createElement(Input, {\n    name: \"password\",\n    type: \"password\",\n    size: \"large\",\n    placeholder: \"Password\",\n    value: state.password,\n    onChange: handleChange,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 122,\n      columnNumber: 13\n    }\n  })), /*#__PURE__*/React.createElement(\"span\", {\n    className: \"isoResetPass\",\n    onClick: handleResetPassword,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 131,\n      columnNumber: 11\n    }\n  }, \"Reset Password\"))));\n}","map":{"version":3,"sources":["/Users/pezannekhambatta/Desktop/resumio/packages/isomorphic-boilerplate-single/src/containers/FirebaseForm/FirebaseForm.js"],"names":["React","Button","Input","Modal","notification","signInWithEmail","signUpWithEmailAndPassword","resetPassword","props","useState","visible","email","password","confirmLoading","state","setState","handleChange","e","target","name","value","showModal","handleCancel","handleLogin","signup","then","authUser","user","console","log","message","getIdToken","token","login","history","push","handleResetPassword","catch","error","marginBottom"],"mappings":"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","sourcesContent":["import React from 'react';\nimport Button from '@iso/components/uielements/button';\nimport Input from '@iso/components/uielements/input';\nimport Modal from '@iso/components/Feedback/Modal';\nimport notification from '@iso/components/Feedback/Notification';\nimport {\n  signInWithEmail,\n  signUpWithEmailAndPassword,\n  resetPassword,\n} from '@iso/lib/firebase/firebase.authentication.util';\n\nexport default function(props) {\n  const [state, setState] = React.useState({\n    visible: false,\n    email: 'demo@gmail.com',\n    password: 'demodemo',\n    confirmLoading: false,\n  });\n  const handleChange = e => {\n    const { name, value } = e.target;\n    setState({\n      ...state,\n      [name]: value,\n    });\n  };\n  const showModal = () => {\n    setState({\n      ...state,\n      visible: true,\n    });\n  };\n  const handleCancel = e => {\n    setState({\n      ...state,\n      visible: false,\n    });\n  };\n  const handleLogin = async () => {\n    const { email, password } = state;\n    if (!(email && password)) {\n      notification('error', 'Please fill in email. and password');\n      return;\n    }\n    setState({\n      ...state,\n      confirmLoading: true,\n    });\n    let user;\n    let message;\n    if (props.signup) {\n      try {\n        await signUpWithEmailAndPassword(email, password).then(authUser => {\n          user = authUser.user;\n          console.log(user, 'User');\n        });\n      } catch (error) {\n        message = error.message;\n        console.log(error.message, 'Error');\n      }\n    } else {\n      try {\n        await signInWithEmail(email, password).then(authUser => {\n          user = authUser.user;\n        });\n      } catch (error) {\n        message = error.message;\n        console.log(error.message, 'Error');\n      }\n    }\n    if (user) {\n      const token = await user.getIdToken();\n      props.login(token);\n      props.history.push('/dashboard');\n    } else {\n      notification('error', message);\n      setState({\n        ...state,\n        confirmLoading: false,\n      });\n    }\n  };\n  const handleResetPassword = () => {\n    const { email } = state;\n    if (!email) {\n      notification('error', `Please fill in email.`);\n      return;\n    }\n    resetPassword(email)\n      .then(() =>\n        notification('success', `Password reset email sent to ${email}.`)\n      )\n      .catch(error => notification('error', 'Email address not found.'));\n  };\n  return (\n    <>\n      <Button type=\"primary\" onClick={showModal} className=\"btnFirebase\">\n        {props.signup ? 'Sign up with Firebase' : 'Sign in with Firebase'}\n      </Button>\n      <Modal\n        title={props.signup ? 'Sign up with Firebase' : 'Sign in with Firebase'}\n        visible={state.visible}\n        confirmLoading={state.confirmLoading}\n        onCancel={handleCancel}\n        onOk={handleLogin}\n        className=\"isoFirebaseLoginModal\"\n        cancelText=\"Cancel\"\n        okText={props.signup ? 'Sign Up' : 'Login'}\n      >\n        <form>\n          <div className=\"isoInputWrapper\">\n            <label>Email</label>\n            <Input\n              name=\"email\"\n              size=\"large\"\n              placeholder=\"Email\"\n              value={state.email}\n              onChange={handleChange}\n            />\n          </div>\n          <div className=\"isoInputWrapper\" style={{ marginBottom: 10 }}>\n            <label>Password</label>\n            <Input\n              name=\"password\"\n              type=\"password\"\n              size=\"large\"\n              placeholder=\"Password\"\n              value={state.password}\n              onChange={handleChange}\n            />\n          </div>\n          <span className=\"isoResetPass\" onClick={handleResetPassword}>\n            Reset Password\n          </span>\n        </form>\n      </Modal>\n    </>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}