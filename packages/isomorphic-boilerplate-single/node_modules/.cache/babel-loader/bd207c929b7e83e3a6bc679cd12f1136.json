{"ast":null,"code":"// Generated by CoffeeScript 1.7.1\n(function () {\n  var Struct,\n      VersionedStruct,\n      __hasProp = {}.hasOwnProperty,\n      __extends = function __extends(child, parent) {\n    for (var key in parent) {\n      if (__hasProp.call(parent, key)) child[key] = parent[key];\n    }\n\n    function ctor() {\n      this.constructor = child;\n    }\n\n    ctor.prototype = parent.prototype;\n    child.prototype = new ctor();\n    child.__super__ = parent.prototype;\n    return child;\n  };\n\n  Struct = require('./Struct');\n\n  VersionedStruct = function (_super) {\n    __extends(VersionedStruct, _super);\n\n    function VersionedStruct(type, versions) {\n      this.type = type;\n      this.versions = versions != null ? versions : {};\n\n      if (typeof this.type === 'string') {\n        this.versionGetter = new Function('parent', \"return parent.\" + this.type);\n        this.versionSetter = new Function('parent', 'version', \"return parent.\" + this.type + \" = version\");\n      }\n    }\n\n    VersionedStruct.prototype.decode = function (stream, parent, length) {\n      var fields, res, _ref;\n\n      if (length == null) {\n        length = 0;\n      }\n\n      res = this._setup(stream, parent, length);\n\n      if (typeof this.type === 'string') {\n        res.version = this.versionGetter(parent);\n      } else {\n        res.version = this.type.decode(stream);\n      }\n\n      if (this.versions.header) {\n        this._parseFields(stream, res, this.versions.header);\n      }\n\n      fields = this.versions[res.version];\n\n      if (fields == null) {\n        throw new Error(\"Unknown version \" + res.version);\n      }\n\n      if (fields instanceof VersionedStruct) {\n        return fields.decode(stream, parent);\n      }\n\n      this._parseFields(stream, res, fields);\n\n      if ((_ref = this.process) != null) {\n        _ref.call(res, stream);\n      }\n\n      return res;\n    };\n\n    VersionedStruct.prototype.size = function (val, parent, includePointers) {\n      var ctx, fields, key, size, type, _ref;\n\n      if (includePointers == null) {\n        includePointers = true;\n      }\n\n      if (!val) {\n        throw new Error('Not a fixed size');\n      }\n\n      ctx = {\n        parent: parent,\n        val: val,\n        pointerSize: 0\n      };\n      size = 0;\n\n      if (typeof this.type !== 'string') {\n        size += this.type.size(val.version, ctx);\n      }\n\n      if (this.versions.header) {\n        _ref = this.versions.header;\n\n        for (key in _ref) {\n          type = _ref[key];\n\n          if (type.size != null) {\n            size += type.size(val[key], ctx);\n          }\n        }\n      }\n\n      fields = this.versions[val.version];\n\n      if (fields == null) {\n        throw new Error(\"Unknown version \" + val.version);\n      }\n\n      for (key in fields) {\n        type = fields[key];\n\n        if (type.size != null) {\n          size += type.size(val[key], ctx);\n        }\n      }\n\n      if (includePointers) {\n        size += ctx.pointerSize;\n      }\n\n      return size;\n    };\n\n    VersionedStruct.prototype.encode = function (stream, val, parent) {\n      var ctx, fields, i, key, ptr, type, _ref, _ref1;\n\n      if ((_ref = this.preEncode) != null) {\n        _ref.call(val, stream);\n      }\n\n      ctx = {\n        pointers: [],\n        startOffset: stream.pos,\n        parent: parent,\n        val: val,\n        pointerSize: 0\n      };\n      ctx.pointerOffset = stream.pos + this.size(val, ctx, false);\n\n      if (typeof this.type !== 'string') {\n        this.type.encode(stream, val.version);\n      }\n\n      if (this.versions.header) {\n        _ref1 = this.versions.header;\n\n        for (key in _ref1) {\n          type = _ref1[key];\n\n          if (type.encode != null) {\n            type.encode(stream, val[key], ctx);\n          }\n        }\n      }\n\n      fields = this.versions[val.version];\n\n      for (key in fields) {\n        type = fields[key];\n\n        if (type.encode != null) {\n          type.encode(stream, val[key], ctx);\n        }\n      }\n\n      i = 0;\n\n      while (i < ctx.pointers.length) {\n        ptr = ctx.pointers[i++];\n        ptr.type.encode(stream, ptr.val, ptr.parent);\n      }\n    };\n\n    return VersionedStruct;\n  }(Struct);\n\n  module.exports = VersionedStruct;\n}).call(this);","map":{"version":3,"sources":["/Users/pezannekhambatta/Desktop/resumio/node_modules/restructure/src/VersionedStruct.js"],"names":["Struct","VersionedStruct","__hasProp","hasOwnProperty","__extends","child","parent","key","call","ctor","constructor","prototype","__super__","require","_super","type","versions","versionGetter","Function","versionSetter","decode","stream","length","fields","res","_ref","_setup","version","header","_parseFields","Error","process","size","val","includePointers","ctx","pointerSize","encode","i","ptr","_ref1","preEncode","pointers","startOffset","pos","pointerOffset","module","exports"],"mappings":"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","sourcesContent":["// Generated by CoffeeScript 1.7.1\n(function() {\n  var Struct, VersionedStruct,\n    __hasProp = {}.hasOwnProperty,\n    __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };\n\n  Struct = require('./Struct');\n\n  VersionedStruct = (function(_super) {\n    __extends(VersionedStruct, _super);\n\n    function VersionedStruct(type, versions) {\n      this.type = type;\n      this.versions = versions != null ? versions : {};\n      if (typeof this.type === 'string') {\n        this.versionGetter = new Function('parent', \"return parent.\" + this.type);\n        this.versionSetter = new Function('parent', 'version', \"return parent.\" + this.type + \" = version\");\n      }\n    }\n\n    VersionedStruct.prototype.decode = function(stream, parent, length) {\n      var fields, res, _ref;\n      if (length == null) {\n        length = 0;\n      }\n      res = this._setup(stream, parent, length);\n      if (typeof this.type === 'string') {\n        res.version = this.versionGetter(parent);\n      } else {\n        res.version = this.type.decode(stream);\n      }\n      if (this.versions.header) {\n        this._parseFields(stream, res, this.versions.header);\n      }\n      fields = this.versions[res.version];\n      if (fields == null) {\n        throw new Error(\"Unknown version \" + res.version);\n      }\n      if (fields instanceof VersionedStruct) {\n        return fields.decode(stream, parent);\n      }\n      this._parseFields(stream, res, fields);\n      if ((_ref = this.process) != null) {\n        _ref.call(res, stream);\n      }\n      return res;\n    };\n\n    VersionedStruct.prototype.size = function(val, parent, includePointers) {\n      var ctx, fields, key, size, type, _ref;\n      if (includePointers == null) {\n        includePointers = true;\n      }\n      if (!val) {\n        throw new Error('Not a fixed size');\n      }\n      ctx = {\n        parent: parent,\n        val: val,\n        pointerSize: 0\n      };\n      size = 0;\n      if (typeof this.type !== 'string') {\n        size += this.type.size(val.version, ctx);\n      }\n      if (this.versions.header) {\n        _ref = this.versions.header;\n        for (key in _ref) {\n          type = _ref[key];\n          if (type.size != null) {\n            size += type.size(val[key], ctx);\n          }\n        }\n      }\n      fields = this.versions[val.version];\n      if (fields == null) {\n        throw new Error(\"Unknown version \" + val.version);\n      }\n      for (key in fields) {\n        type = fields[key];\n        if (type.size != null) {\n          size += type.size(val[key], ctx);\n        }\n      }\n      if (includePointers) {\n        size += ctx.pointerSize;\n      }\n      return size;\n    };\n\n    VersionedStruct.prototype.encode = function(stream, val, parent) {\n      var ctx, fields, i, key, ptr, type, _ref, _ref1;\n      if ((_ref = this.preEncode) != null) {\n        _ref.call(val, stream);\n      }\n      ctx = {\n        pointers: [],\n        startOffset: stream.pos,\n        parent: parent,\n        val: val,\n        pointerSize: 0\n      };\n      ctx.pointerOffset = stream.pos + this.size(val, ctx, false);\n      if (typeof this.type !== 'string') {\n        this.type.encode(stream, val.version);\n      }\n      if (this.versions.header) {\n        _ref1 = this.versions.header;\n        for (key in _ref1) {\n          type = _ref1[key];\n          if (type.encode != null) {\n            type.encode(stream, val[key], ctx);\n          }\n        }\n      }\n      fields = this.versions[val.version];\n      for (key in fields) {\n        type = fields[key];\n        if (type.encode != null) {\n          type.encode(stream, val[key], ctx);\n        }\n      }\n      i = 0;\n      while (i < ctx.pointers.length) {\n        ptr = ctx.pointers[i++];\n        ptr.type.encode(stream, ptr.val, ptr.parent);\n      }\n    };\n\n    return VersionedStruct;\n\n  })(Struct);\n\n  module.exports = VersionedStruct;\n\n}).call(this);\n"]},"metadata":{},"sourceType":"script"}