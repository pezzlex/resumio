{"ast":null,"code":"'use strict';\n\nexports.__esModule = true;\nexports.reset = exports.auth = exports.ui = undefined;\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) {\n  return typeof obj;\n} : function (obj) {\n  return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n};\n\nexports.setup = setup;\nexports.id = id;\nexports.clientID = clientID;\nexports.domain = domain;\nexports.clientBaseUrl = clientBaseUrl;\nexports.tenantBaseUrl = tenantBaseUrl;\nexports.useTenantInfo = useTenantInfo;\nexports.connectionResolver = connectionResolver;\nexports.setResolvedConnection = setResolvedConnection;\nexports.resolvedConnection = resolvedConnection;\nexports.languageBaseUrl = languageBaseUrl;\nexports.setSubmitting = setSubmitting;\nexports.submitting = submitting;\nexports.setGlobalError = setGlobalError;\nexports.globalError = globalError;\nexports.clearGlobalError = clearGlobalError;\nexports.setGlobalSuccess = setGlobalSuccess;\nexports.globalSuccess = globalSuccess;\nexports.clearGlobalSuccess = clearGlobalSuccess;\nexports.setGlobalInfo = setGlobalInfo;\nexports.globalInfo = globalInfo;\nexports.clearGlobalInfo = clearGlobalInfo;\nexports.rendering = rendering;\nexports.stopRendering = stopRendering;\nexports.setSupressSubmitOverlay = setSupressSubmitOverlay;\nexports.suppressSubmitOverlay = suppressSubmitOverlay;\nexports.withAuthOptions = withAuthOptions;\nexports.extractTenantBaseUrlOption = extractTenantBaseUrlOption;\nexports.render = render;\nexports.setLoggedIn = setLoggedIn;\nexports.loggedIn = loggedIn;\nexports.defaultADUsernameFromEmailPrefix = defaultADUsernameFromEmailPrefix;\nexports.setCaptcha = setCaptcha;\nexports.captcha = captcha;\nexports.prefill = prefill;\nexports.warn = warn;\nexports.error = error;\nexports.allowedConnections = allowedConnections;\nexports.connections = connections;\nexports.connection = connection;\nexports.hasOneConnection = hasOneConnection;\nexports.hasOnlyConnections = hasOnlyConnections;\nexports.hasSomeConnections = hasSomeConnections;\nexports.countConnections = countConnections;\nexports.findConnection = findConnection;\nexports.hasConnection = hasConnection;\nexports.filterConnections = filterConnections;\nexports.runHook = runHook;\nexports.emitEvent = emitEvent;\nexports.handleEvent = handleEvent;\nexports.loginErrorMessage = loginErrorMessage;\nexports.stop = stop;\nexports.hasStopped = hasStopped;\nexports.hashCleanup = hashCleanup;\nexports.emitHashParsedEvent = emitHashParsedEvent;\nexports.emitAuthenticatedEvent = emitAuthenticatedEvent;\nexports.emitAuthorizationErrorEvent = emitAuthorizationErrorEvent;\nexports.emitUnrecoverableErrorEvent = emitUnrecoverableErrorEvent;\nexports.showBadge = showBadge;\nexports.overrideOptions = overrideOptions;\n\nvar _urlJoin = require('url-join');\n\nvar _urlJoin2 = _interopRequireDefault(_urlJoin);\n\nvar _immutable = require('immutable');\n\nvar _immutable2 = _interopRequireDefault(_immutable);\n\nvar _media_utils = require('../utils/media_utils');\n\nvar _string_utils = require('../utils/string_utils');\n\nvar _url_utils = require('../utils/url_utils');\n\nvar _i18n = require('../i18n');\n\nvar i18n = _interopRequireWildcard(_i18n);\n\nvar _trim = require('trim');\n\nvar _trim2 = _interopRequireDefault(_trim);\n\nvar _gravatar_provider = require('../avatar/gravatar_provider');\n\nvar gp = _interopRequireWildcard(_gravatar_provider);\n\nvar _data_utils = require('../utils/data_utils');\n\nvar _index = require('./client/index');\n\nvar _captcha = require('../field/captcha');\n\nvar captchaField = _interopRequireWildcard(_captcha);\n\nfunction _interopRequireWildcard(obj) {\n  if (obj && obj.__esModule) {\n    return obj;\n  } else {\n    var newObj = {};\n\n    if (obj != null) {\n      for (var key in obj) {\n        if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key];\n      }\n    }\n\n    newObj.default = obj;\n    return newObj;\n  }\n}\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nvar _dataFns = (0, _data_utils.dataFns)(['core']),\n    get = _dataFns.get,\n    init = _dataFns.init,\n    remove = _dataFns.remove,\n    reset = _dataFns.reset,\n    set = _dataFns.set,\n    tget = _dataFns.tget,\n    tset = _dataFns.tset,\n    tremove = _dataFns.tremove;\n\nfunction setup(id, clientID, domain, options, hookRunner, emitEventFn, handleEventFn) {\n  var m = init(id, _immutable2.default.fromJS({\n    clientBaseUrl: extractClientBaseUrlOption(options, domain),\n    tenantBaseUrl: extractTenantBaseUrlOption(options, domain),\n    languageBaseUrl: extractLanguageBaseUrlOption(options, domain),\n    auth: extractAuthOptions(options),\n    clientID: clientID,\n    domain: domain,\n    emitEventFn: emitEventFn,\n    hookRunner: hookRunner,\n    useTenantInfo: options.__useTenantInfo || false,\n    hashCleanup: options.hashCleanup === false ? false : true,\n    allowedConnections: _immutable2.default.fromJS(options.allowedConnections || []),\n    ui: extractUIOptions(id, options),\n    defaultADUsernameFromEmailPrefix: options.defaultADUsernameFromEmailPrefix === false ? false : true,\n    prefill: options.prefill || {},\n    connectionResolver: options.connectionResolver,\n    handleEventFn: handleEventFn\n  }));\n  m = i18n.initI18n(m);\n  return m;\n}\n\nfunction id(m) {\n  return m.get('id');\n}\n\nfunction clientID(m) {\n  return get(m, 'clientID');\n}\n\nfunction domain(m) {\n  return get(m, 'domain');\n}\n\nfunction clientBaseUrl(m) {\n  return get(m, 'clientBaseUrl');\n}\n\nfunction tenantBaseUrl(m) {\n  return get(m, 'tenantBaseUrl');\n}\n\nfunction useTenantInfo(m) {\n  return get(m, 'useTenantInfo');\n}\n\nfunction connectionResolver(m) {\n  return get(m, 'connectionResolver');\n}\n\nfunction setResolvedConnection(m, resolvedConnection) {\n  if (!resolvedConnection) {\n    return set(m, 'resolvedConnection', undefined);\n  }\n\n  if (!resolvedConnection.type || !resolvedConnection.name) {\n    throw new Error('Invalid connection object. The resolved connection must look like: `{ type: \"database\", name: \"connection name\" }`.');\n  }\n\n  if (resolvedConnection.type !== 'database') {\n    throw new Error('Invalid connection type. Only database connections can be resolved with a custom resolver.');\n  }\n\n  return set(m, 'resolvedConnection', _immutable2.default.fromJS(resolvedConnection));\n}\n\nfunction resolvedConnection(m) {\n  var resolvedConnection = get(m, 'resolvedConnection');\n\n  if (!resolvedConnection) {\n    return undefined;\n  }\n\n  return findConnection(m, resolvedConnection.get('name'));\n}\n\nfunction languageBaseUrl(m) {\n  return get(m, 'languageBaseUrl');\n}\n\nfunction setSubmitting(m, value) {\n  var error = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : '';\n  m = tset(m, 'submitting', value);\n  m = clearGlobalSuccess(m);\n  m = error && !value ? setGlobalError(m, error) : clearGlobalError(m);\n  return m;\n}\n\nfunction submitting(m) {\n  return tget(m, 'submitting', false);\n}\n\nfunction setGlobalError(m, str) {\n  return tset(m, 'globalError', str);\n}\n\nfunction globalError(m) {\n  return tget(m, 'globalError', '');\n}\n\nfunction clearGlobalError(m) {\n  return tremove(m, 'globalError');\n}\n\nfunction setGlobalSuccess(m, str) {\n  return tset(m, 'globalSuccess', str);\n}\n\nfunction globalSuccess(m) {\n  return tget(m, 'globalSuccess', '');\n}\n\nfunction clearGlobalSuccess(m) {\n  return tremove(m, 'globalSuccess');\n}\n\nfunction setGlobalInfo(m, str) {\n  return tset(m, 'globalInfo', str);\n}\n\nfunction globalInfo(m) {\n  return tget(m, 'globalInfo', '');\n}\n\nfunction clearGlobalInfo(m) {\n  return tremove(m, 'globalInfo');\n}\n\nfunction rendering(m) {\n  return tget(m, 'render', false);\n}\n\nfunction stopRendering(m) {\n  return tremove(m, 'render');\n}\n\nfunction setSupressSubmitOverlay(m, b) {\n  return set(m, 'suppressSubmitOverlay', b);\n}\n\nfunction suppressSubmitOverlay(m) {\n  return get(m, 'suppressSubmitOverlay');\n}\n\nfunction extractUIOptions(id, options) {\n  var closable = options.container ? false : undefined === options.closable ? true : !!options.closable;\n  var theme = options.theme || {};\n  var labeledSubmitButton = theme.labeledSubmitButton,\n      hideMainScreenTitle = theme.hideMainScreenTitle,\n      logo = theme.logo,\n      primaryColor = theme.primaryColor,\n      authButtons = theme.authButtons;\n  var avatar = options.avatar !== null;\n  var customAvatarProvider = options.avatar && typeof options.avatar.url === 'function' && typeof options.avatar.displayName === 'function' && options.avatar;\n  var avatarProvider = customAvatarProvider || gp;\n  return new _immutable2.default.fromJS({\n    containerID: options.container || 'auth0-lock-container-' + id,\n    appendContainer: !options.container,\n    autoclose: undefined === options.autoclose ? false : closable && options.autoclose,\n    autofocus: undefined === options.autofocus ? !(options.container || (0, _media_utils.isSmallScreen)()) : !!options.autofocus,\n    avatar: avatar,\n    avatarProvider: avatarProvider,\n    logo: typeof logo === 'string' ? logo : undefined,\n    closable: closable,\n    hideMainScreenTitle: !!hideMainScreenTitle,\n    labeledSubmitButton: undefined === labeledSubmitButton ? true : !!labeledSubmitButton,\n    language: undefined === options.language ? 'en' : (0, _trim2.default)(options.language || '').toLowerCase(),\n    dict: _typeof(options.languageDictionary) === 'object' ? options.languageDictionary : {},\n    disableWarnings: options.disableWarnings === undefined ? false : !!options.disableWarnings,\n    mobile: undefined === options.mobile ? false : !!options.mobile,\n    popupOptions: undefined === options.popupOptions ? {} : options.popupOptions,\n    primaryColor: typeof primaryColor === 'string' ? primaryColor : undefined,\n    rememberLastLogin: undefined === options.rememberLastLogin ? true : !!options.rememberLastLogin,\n    allowAutocomplete: !!options.allowAutocomplete,\n    authButtonsTheme: (typeof authButtons === 'undefined' ? 'undefined' : _typeof(authButtons)) === 'object' ? authButtons : {},\n    allowShowPassword: !!options.allowShowPassword,\n    allowPasswordAutocomplete: !!options.allowPasswordAutocomplete,\n    scrollGlobalMessagesIntoView: undefined === options.scrollGlobalMessagesIntoView ? true : !!options.scrollGlobalMessagesIntoView\n  });\n}\n\nvar _dataFns2 = (0, _data_utils.dataFns)(['core', 'ui']),\n    getUI = _dataFns2.get,\n    setUI = _dataFns2.set;\n\nvar _dataFns3 = (0, _data_utils.dataFns)(['core', 'transient', 'ui']),\n    tgetUI = _dataFns3.get,\n    tsetUI = _dataFns3.set;\n\nvar getUIAttribute = function getUIAttribute(m, attribute) {\n  return tgetUI(m, attribute) || getUI(m, attribute);\n};\n\nvar ui = exports.ui = {\n  containerID: function containerID(lock) {\n    return getUIAttribute(lock, 'containerID');\n  },\n  appendContainer: function appendContainer(lock) {\n    return getUIAttribute(lock, 'appendContainer');\n  },\n  autoclose: function autoclose(lock) {\n    return getUIAttribute(lock, 'autoclose');\n  },\n  autofocus: function autofocus(lock) {\n    return getUIAttribute(lock, 'autofocus');\n  },\n  avatar: function avatar(lock) {\n    return getUIAttribute(lock, 'avatar');\n  },\n  avatarProvider: function avatarProvider(lock) {\n    return getUIAttribute(lock, 'avatarProvider');\n  },\n  closable: function closable(lock) {\n    return getUIAttribute(lock, 'closable');\n  },\n  dict: function dict(lock) {\n    return getUIAttribute(lock, 'dict');\n  },\n  disableWarnings: function disableWarnings(lock) {\n    return getUIAttribute(lock, 'disableWarnings');\n  },\n  labeledSubmitButton: function labeledSubmitButton(lock) {\n    return getUIAttribute(lock, 'labeledSubmitButton');\n  },\n  hideMainScreenTitle: function hideMainScreenTitle(lock) {\n    return getUIAttribute(lock, 'hideMainScreenTitle');\n  },\n  language: function language(lock) {\n    return getUIAttribute(lock, 'language');\n  },\n  logo: function logo(lock) {\n    return getUIAttribute(lock, 'logo');\n  },\n  mobile: function mobile(lock) {\n    return getUIAttribute(lock, 'mobile');\n  },\n  popupOptions: function popupOptions(lock) {\n    return getUIAttribute(lock, 'popupOptions');\n  },\n  primaryColor: function primaryColor(lock) {\n    return getUIAttribute(lock, 'primaryColor');\n  },\n  authButtonsTheme: function authButtonsTheme(lock) {\n    return getUIAttribute(lock, 'authButtonsTheme');\n  },\n  rememberLastLogin: function rememberLastLogin(m) {\n    return tget(m, 'rememberLastLogin', getUIAttribute(m, 'rememberLastLogin'));\n  },\n  allowAutocomplete: function allowAutocomplete(m) {\n    return tget(m, 'allowAutocomplete', getUIAttribute(m, 'allowAutocomplete'));\n  },\n  scrollGlobalMessagesIntoView: function scrollGlobalMessagesIntoView(lock) {\n    return getUIAttribute(lock, 'scrollGlobalMessagesIntoView');\n  },\n  allowShowPassword: function allowShowPassword(m) {\n    return tget(m, 'allowShowPassword', getUIAttribute(m, 'allowShowPassword'));\n  },\n  allowPasswordAutocomplete: function allowPasswordAutocomplete(m) {\n    return tget(m, 'allowPasswordAutocomplete', getUIAttribute(m, 'allowPasswordAutocomplete'));\n  }\n};\n\nvar _dataFns4 = (0, _data_utils.dataFns)(['core', 'auth']),\n    getAuthAttribute = _dataFns4.get;\n\nvar auth = exports.auth = {\n  connectionScopes: function connectionScopes(m) {\n    return getAuthAttribute(m, 'connectionScopes');\n  },\n  params: function params(m) {\n    return tget(m, 'authParams') || getAuthAttribute(m, 'params');\n  },\n  autoParseHash: function autoParseHash(lock) {\n    return getAuthAttribute(lock, 'autoParseHash');\n  },\n  redirect: function redirect(lock) {\n    return getAuthAttribute(lock, 'redirect');\n  },\n  redirectUrl: function redirectUrl(lock) {\n    return getAuthAttribute(lock, 'redirectUrl');\n  },\n  responseType: function responseType(lock) {\n    return getAuthAttribute(lock, 'responseType');\n  },\n  sso: function sso(lock) {\n    return getAuthAttribute(lock, 'sso');\n  }\n};\n\nfunction extractAuthOptions(options) {\n  var _ref = options.auth || {},\n      audience = _ref.audience,\n      connectionScopes = _ref.connectionScopes,\n      params = _ref.params,\n      autoParseHash = _ref.autoParseHash,\n      redirect = _ref.redirect,\n      redirectUrl = _ref.redirectUrl,\n      responseMode = _ref.responseMode,\n      responseType = _ref.responseType,\n      sso = _ref.sso,\n      state = _ref.state,\n      nonce = _ref.nonce;\n\n  if (options.auth && options.auth.redirectUri) {\n    console.warn(\"You're sending an `auth` option named `redirectUri`. This option will be ignored. Use `redirectUrl` instead.\");\n  }\n\n  audience = typeof audience === 'string' ? audience : undefined;\n  connectionScopes = (typeof connectionScopes === 'undefined' ? 'undefined' : _typeof(connectionScopes)) === 'object' ? connectionScopes : {};\n  params = (typeof params === 'undefined' ? 'undefined' : _typeof(params)) === 'object' ? params : {}; // by default is null because we need to know if it was set when we curate the responseType\n\n  redirectUrl = typeof redirectUrl === 'string' && redirectUrl ? redirectUrl : null;\n  autoParseHash = typeof autoParseHash === 'boolean' ? autoParseHash : true;\n  redirect = typeof redirect === 'boolean' ? redirect : true;\n  responseMode = typeof responseMode === 'string' ? responseMode : undefined;\n  state = typeof state === 'string' ? state : undefined;\n  nonce = typeof nonce === 'string' ? nonce : undefined; // if responseType was not set and there is a redirectUrl, it defaults to code. Otherwise token.\n\n  responseType = typeof responseType === 'string' ? responseType : redirectUrl ? 'code' : 'token'; // now we set the default because we already did the validation\n\n  redirectUrl = redirectUrl || '' + (0, _url_utils.getOriginFromUrl)(window.location.href) + window.location.pathname;\n  sso = typeof sso === 'boolean' ? sso : true;\n\n  if (!params.scope) {\n    params.scope = 'openid profile email';\n  }\n\n  return _immutable2.default.fromJS({\n    audience: audience,\n    connectionScopes: connectionScopes,\n    params: params,\n    autoParseHash: autoParseHash,\n    redirect: redirect,\n    redirectUrl: redirectUrl,\n    responseMode: responseMode,\n    responseType: responseType,\n    sso: sso,\n    state: state,\n    nonce: nonce\n  });\n}\n\nfunction withAuthOptions(m, opts) {\n  return _immutable2.default.fromJS(opts).merge(get(m, 'auth')).toJS();\n}\n\nfunction extractClientBaseUrlOption(opts, domain) {\n  if (opts.clientBaseUrl && typeof opts.clientBaseUrl === 'string') {\n    return opts.clientBaseUrl;\n  }\n\n  if (opts.configurationBaseUrl && typeof opts.configurationBaseUrl === 'string') {\n    return opts.configurationBaseUrl;\n  }\n\n  if (opts.assetsUrl && typeof opts.assetsUrl === 'string') {\n    return opts.assetsUrl;\n  }\n\n  var domainUrl = 'https://' + domain;\n  var hostname = (0, _url_utils.getLocationFromUrl)(domainUrl).hostname;\n  var DOT_AUTH0_DOT_COM = '.auth0.com';\n  var AUTH0_US_CDN_URL = 'https://cdn.auth0.com';\n\n  if ((0, _string_utils.endsWith)(hostname, DOT_AUTH0_DOT_COM)) {\n    var parts = hostname.split('.');\n    return parts.length > 3 ? 'https://cdn.' + parts[parts.length - 3] + DOT_AUTH0_DOT_COM : AUTH0_US_CDN_URL;\n  } else {\n    return domainUrl;\n  }\n}\n\nfunction extractTenantBaseUrlOption(opts, domain) {\n  if (opts.configurationBaseUrl && typeof opts.configurationBaseUrl === 'string') {\n    if (opts.overrides && opts.overrides.__tenant) {\n      // When using a custom domain and a configuration URL hosted in auth0's cdn\n      return (0, _urlJoin2.default)(opts.configurationBaseUrl, 'tenants', 'v1', opts.overrides.__tenant + '.js');\n    }\n\n    return (0, _urlJoin2.default)(opts.configurationBaseUrl, 'info-v1.js');\n  }\n\n  if (opts.assetsUrl && typeof opts.assetsUrl === 'string') {\n    return opts.assetsUrl;\n  }\n\n  var domainUrl = 'https://' + domain;\n  var hostname = (0, _url_utils.getLocationFromUrl)(domainUrl).hostname;\n  var DOT_AUTH0_DOT_COM = '.auth0.com';\n  var AUTH0_US_CDN_URL = 'https://cdn.auth0.com';\n  var parts = hostname.split('.');\n  var tenant_name = parts[0];\n  var domain;\n\n  if ((0, _string_utils.endsWith)(hostname, DOT_AUTH0_DOT_COM)) {\n    domain = parts.length > 3 ? 'https://cdn.' + parts[parts.length - 3] + DOT_AUTH0_DOT_COM : AUTH0_US_CDN_URL;\n    return (0, _urlJoin2.default)(domain, 'tenants', 'v1', tenant_name + '.js');\n  } else {\n    return (0, _urlJoin2.default)(domainUrl, 'info-v1.js');\n  }\n}\n\nfunction extractLanguageBaseUrlOption(opts, domain) {\n  if (opts.languageBaseUrl && typeof opts.languageBaseUrl === 'string') {\n    return opts.languageBaseUrl;\n  }\n\n  if (opts.assetsUrl && typeof opts.assetsUrl === 'string') {\n    return opts.assetsUrl;\n  }\n\n  return 'https://cdn.auth0.com';\n}\n\nfunction render(m) {\n  return tset(m, 'render', true);\n}\n\nexports.reset = reset;\n\nfunction setLoggedIn(m, value) {\n  return tset(m, 'loggedIn', value);\n}\n\nfunction loggedIn(m) {\n  return tget(m, 'loggedIn', false);\n}\n\nfunction defaultADUsernameFromEmailPrefix(m) {\n  return get(m, 'defaultADUsernameFromEmailPrefix', true);\n}\n\nfunction setCaptcha(m, value, wasInvalid) {\n  m = captchaField.reset(m, wasInvalid);\n  return set(m, 'captcha', _immutable2.default.fromJS(value));\n}\n\nfunction captcha(m) {\n  return get(m, 'captcha');\n}\n\nfunction prefill(m) {\n  return get(m, 'prefill', {});\n}\n\nfunction warn(x, str) {\n  var shouldOutput = _immutable.Map.isMap(x) ? !ui.disableWarnings(x) : !x.disableWarnings;\n\n  if (shouldOutput && console && console.warn) {\n    console.warn(str);\n  }\n}\n\nfunction error(x, str) {\n  var shouldOutput = _immutable.Map.isMap(x) ? !ui.disableWarnings(x) : !x.disableWarnings;\n\n  if (shouldOutput && console && console.error) {\n    console.error(str);\n  }\n}\n\nfunction allowedConnections(m) {\n  return tget(m, 'allowedConnections') || get(m, 'allowedConnections');\n}\n\nfunction connections(m) {\n  for (var _len = arguments.length, strategies = Array(_len > 2 ? _len - 2 : 0), _key = 2; _key < _len; _key++) {\n    strategies[_key - 2] = arguments[_key];\n  }\n\n  var type = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : undefined;\n\n  if (arguments.length === 1) {\n    return tget(m, 'connections', (0, _immutable.Map)()).filter(function (v, k) {\n      return k !== 'unknown';\n    }).valueSeq().flatten(true);\n  }\n\n  var xs = tget(m, ['connections', type], (0, _immutable.List)());\n  return strategies.length > 0 ? xs.filter(function (x) {\n    return ~strategies.indexOf(x.get('strategy'));\n  }) : xs;\n}\n\nfunction connection(m) {\n  var type = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : undefined;\n\n  for (var _len2 = arguments.length, strategies = Array(_len2 > 2 ? _len2 - 2 : 0), _key2 = 2; _key2 < _len2; _key2++) {\n    strategies[_key2 - 2] = arguments[_key2];\n  }\n\n  return connections.apply(undefined, [m, type].concat(strategies)).get(0);\n}\n\nfunction hasOneConnection(m) {\n  var type = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : undefined;\n  var xs = connections(m);\n  return xs.count() === 1 && (!type || xs.getIn([0, 'type']) === type);\n}\n\nfunction hasOnlyConnections(m) {\n  var type = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : undefined;\n  var all = connections(m).count();\n\n  for (var _len3 = arguments.length, strategies = Array(_len3 > 2 ? _len3 - 2 : 0), _key3 = 2; _key3 < _len3; _key3++) {\n    strategies[_key3 - 2] = arguments[_key3];\n  }\n\n  var filtered = connections.apply(undefined, [m, type].concat(strategies)).count();\n  return all > 0 && all === filtered;\n}\n\nfunction hasSomeConnections(m) {\n  var type = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : undefined;\n\n  for (var _len4 = arguments.length, strategies = Array(_len4 > 2 ? _len4 - 2 : 0), _key4 = 2; _key4 < _len4; _key4++) {\n    strategies[_key4 - 2] = arguments[_key4];\n  }\n\n  return countConnections.apply(undefined, [m, type].concat(strategies)) > 0;\n}\n\nfunction countConnections(m) {\n  var type = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : undefined;\n\n  for (var _len5 = arguments.length, strategies = Array(_len5 > 2 ? _len5 - 2 : 0), _key5 = 2; _key5 < _len5; _key5++) {\n    strategies[_key5 - 2] = arguments[_key5];\n  }\n\n  return connections.apply(undefined, [m, type].concat(strategies)).count();\n}\n\nfunction findConnection(m, name) {\n  return connections(m).find(function (m1) {\n    return m1.get('name') === name;\n  });\n}\n\nfunction hasConnection(m, name) {\n  return !!findConnection(m, name);\n}\n\nfunction filterConnections(m) {\n  var allowed = allowedConnections(m);\n  var order = allowed.count() === 0 ? function (_) {\n    return 0;\n  } : function (c) {\n    return allowed.indexOf(c.get('name'));\n  };\n  return tset(m, 'connections', (0, _index.clientConnections)(m).map(function (cs) {\n    return cs.filter(function (c) {\n      return order(c) >= 0;\n    }).sort(function (c1, c2) {\n      return order(c1) - order(c2);\n    });\n  }));\n}\n\nfunction runHook(m, str) {\n  for (var _len6 = arguments.length, args = Array(_len6 > 2 ? _len6 - 2 : 0), _key6 = 2; _key6 < _len6; _key6++) {\n    args[_key6 - 2] = arguments[_key6];\n  }\n\n  return get(m, 'hookRunner').apply(undefined, [str, m].concat(args));\n}\n\nfunction emitEvent(m, str) {\n  for (var _len7 = arguments.length, args = Array(_len7 > 2 ? _len7 - 2 : 0), _key7 = 2; _key7 < _len7; _key7++) {\n    args[_key7 - 2] = arguments[_key7];\n  }\n\n  setTimeout(function () {\n    var emitEventFn = get(m, 'emitEventFn');\n    var hadListener = emitEventFn.apply(undefined, [str].concat(args)); // Handle uncaught custom error\n\n    if (str === 'unrecoverable_error' && !hadListener) {\n      throw new (Function.prototype.bind.apply(Error, [null].concat(args)))();\n    }\n  }, 0);\n}\n\nfunction handleEvent(m, str) {\n  var handleEventFn = get(m, 'handleEventFn');\n\n  for (var _len8 = arguments.length, args = Array(_len8 > 2 ? _len8 - 2 : 0), _key8 = 2; _key8 < _len8; _key8++) {\n    args[_key8 - 2] = arguments[_key8];\n  }\n\n  handleEventFn.apply(undefined, [str].concat(args));\n}\n\nfunction loginErrorMessage(m, error, type) {\n  // NOTE: previous version of lock checked for status codes and, at\n  // some point, if the status code was 401 it defaults to an\n  // \"invalid_user_password\" error (actually the\n  // \"wrongEmailPasswordErrorText\" dict entry) instead of checking\n  // explicitly. We should figure out if there was a reason for that.\n  if (error.status === 0) {\n    return i18n.html(m, ['error', 'login', 'lock.network']);\n  } // Custom rule error (except blocked_user)\n\n\n  if (error.code === 'rule_error') {\n    return error.description || i18n.html(m, ['error', 'login', 'lock.fallback']);\n  }\n\n  var INVALID_MAP = {\n    code: 'lock.invalid_code',\n    email: 'lock.invalid_email_password',\n    username: 'lock.invalid_username_password'\n  };\n  var code = error.error || error.code;\n\n  if (code === 'invalid_user_password' && INVALID_MAP[type]) {\n    code = INVALID_MAP[type];\n  }\n\n  if (code === 'a0.mfa_registration_required') {\n    code = 'lock.mfa_registration_required';\n  }\n\n  if (code === 'a0.mfa_invalid_code') {\n    code = 'lock.mfa_invalid_code';\n  }\n\n  if (code === 'password_expired') {\n    code = 'password_change_required';\n  }\n\n  return i18n.html(m, ['error', 'login', code]) || i18n.html(m, ['error', 'login', 'lock.fallback']);\n} // TODO: rename to something less generic that is easier to grep\n\n\nfunction stop(m, error) {\n  if (error) {\n    setTimeout(function () {\n      return emitEvent(m, 'unrecoverable_error', error);\n    }, 17);\n  }\n\n  return set(m, 'stopped', true);\n}\n\nfunction hasStopped(m) {\n  return get(m, 'stopped');\n}\n\nfunction hashCleanup(m) {\n  return get(m, 'hashCleanup');\n}\n\nfunction emitHashParsedEvent(m, parsedHash) {\n  emitEvent(m, 'hash_parsed', parsedHash);\n}\n\nfunction emitAuthenticatedEvent(m, result) {\n  emitEvent(m, 'authenticated', result);\n}\n\nfunction emitAuthorizationErrorEvent(m, error) {\n  emitEvent(m, 'authorization_error', error);\n}\n\nfunction emitUnrecoverableErrorEvent(m, error) {\n  emitEvent(m, 'unrecoverable_error', error);\n}\n\nfunction showBadge(m) {\n  return (0, _index.hasFreeSubscription)(m) || false;\n}\n\nfunction overrideOptions(m, opts) {\n  if (!opts) opts = {};\n\n  if (opts.allowedConnections) {\n    m = tset(m, 'allowedConnections', _immutable2.default.fromJS(opts.allowedConnections));\n  }\n\n  if (opts.flashMessage) {\n    var type = opts.flashMessage.type;\n    var typeCapitalized = type.charAt(0).toUpperCase() + type.slice(1);\n    m = tset(m, 'global' + typeCapitalized, opts.flashMessage.text);\n  }\n\n  if (opts.auth && opts.auth.params) {\n    m = tset(m, 'authParams', _immutable2.default.fromJS(opts.auth.params));\n  }\n\n  if (opts.theme) {\n    if (opts.theme.primaryColor) {\n      m = tset(m, ['ui', 'primaryColor'], opts.theme.primaryColor);\n    }\n\n    if (opts.theme.logo) {\n      m = tset(m, ['ui', 'logo'], opts.theme.logo);\n    }\n  }\n\n  if (opts.language || opts.languageDictionary) {\n    if (opts.language) {\n      m = tset(m, ['ui', 'language'], opts.language);\n    }\n\n    if (opts.languageDictionary) {\n      m = tset(m, ['ui', 'dict'], opts.languageDictionary);\n    }\n\n    m = i18n.initI18n(m);\n  }\n\n  if (typeof opts.rememberLastLogin === 'boolean') {\n    m = tset(m, 'rememberLastLogin', opts.rememberLastLogin);\n  }\n\n  if (typeof opts.allowAutocomplete === 'boolean') {\n    m = tset(m, 'allowAutocomplete', opts.allowAutocomplete);\n  }\n\n  if (typeof opts.allowShowPassword === 'boolean') {\n    m = tset(m, 'allowShowPassword', opts.allowShowPassword);\n  }\n\n  if (typeof opts.allowPasswordAutocomplete === 'boolean') {\n    m = tset(m, 'allowPasswordAutocomplete', opts.allowPasswordAutocomplete);\n  }\n\n  return m;\n}","map":{"version":3,"sources":["/Users/pezannekhambatta/Desktop/resumio/node_modules/auth0-lock/lib/core/index.js"],"names":["exports","__esModule","reset","auth","ui","undefined","_typeof","Symbol","iterator","obj","constructor","prototype","setup","id","clientID","domain","clientBaseUrl","tenantBaseUrl","useTenantInfo","connectionResolver","setResolvedConnection","resolvedConnection","languageBaseUrl","setSubmitting","submitting","setGlobalError","globalError","clearGlobalError","setGlobalSuccess","globalSuccess","clearGlobalSuccess","setGlobalInfo","globalInfo","clearGlobalInfo","rendering","stopRendering","setSupressSubmitOverlay","suppressSubmitOverlay","withAuthOptions","extractTenantBaseUrlOption","render","setLoggedIn","loggedIn","defaultADUsernameFromEmailPrefix","setCaptcha","captcha","prefill","warn","error","allowedConnections","connections","connection","hasOneConnection","hasOnlyConnections","hasSomeConnections","countConnections","findConnection","hasConnection","filterConnections","runHook","emitEvent","handleEvent","loginErrorMessage","stop","hasStopped","hashCleanup","emitHashParsedEvent","emitAuthenticatedEvent","emitAuthorizationErrorEvent","emitUnrecoverableErrorEvent","showBadge","overrideOptions","_urlJoin","require","_urlJoin2","_interopRequireDefault","_immutable","_immutable2","_media_utils","_string_utils","_url_utils","_i18n","i18n","_interopRequireWildcard","_trim","_trim2","_gravatar_provider","gp","_data_utils","_index","_captcha","captchaField","newObj","key","Object","hasOwnProperty","call","default","_dataFns","dataFns","get","init","remove","set","tget","tset","tremove","options","hookRunner","emitEventFn","handleEventFn","m","fromJS","extractClientBaseUrlOption","extractLanguageBaseUrlOption","extractAuthOptions","__useTenantInfo","extractUIOptions","initI18n","type","name","Error","value","arguments","length","str","b","closable","container","theme","labeledSubmitButton","hideMainScreenTitle","logo","primaryColor","authButtons","avatar","customAvatarProvider","url","displayName","avatarProvider","containerID","appendContainer","autoclose","autofocus","isSmallScreen","language","toLowerCase","dict","languageDictionary","disableWarnings","mobile","popupOptions","rememberLastLogin","allowAutocomplete","authButtonsTheme","allowShowPassword","allowPasswordAutocomplete","scrollGlobalMessagesIntoView","_dataFns2","getUI","setUI","_dataFns3","tgetUI","tsetUI","getUIAttribute","attribute","lock","_dataFns4","getAuthAttribute","connectionScopes","params","autoParseHash","redirect","redirectUrl","responseType","sso","_ref","audience","responseMode","state","nonce","redirectUri","console","getOriginFromUrl","window","location","href","pathname","scope","opts","merge","toJS","configurationBaseUrl","assetsUrl","domainUrl","hostname","getLocationFromUrl","DOT_AUTH0_DOT_COM","AUTH0_US_CDN_URL","endsWith","parts","split","overrides","__tenant","tenant_name","wasInvalid","x","shouldOutput","Map","isMap","_len","strategies","Array","_key","filter","v","k","valueSeq","flatten","xs","List","indexOf","_len2","_key2","apply","concat","count","getIn","all","_len3","_key3","filtered","_len4","_key4","_len5","_key5","find","m1","allowed","order","_","c","clientConnections","map","cs","sort","c1","c2","_len6","args","_key6","_len7","_key7","setTimeout","hadListener","Function","bind","_len8","_key8","status","html","code","description","INVALID_MAP","email","username","parsedHash","result","hasFreeSubscription","flashMessage","typeCapitalized","charAt","toUpperCase","slice","text"],"mappings":"AAAA;;AAEAA,OAAO,CAACC,UAAR,GAAqB,IAArB;AACAD,OAAO,CAACE,KAAR,GAAgBF,OAAO,CAACG,IAAR,GAAeH,OAAO,CAACI,EAAR,GAAaC,SAA5C;;AAEA,IAAIC,OAAO,GAAG,OAAOC,MAAP,KAAkB,UAAlB,IAAgC,OAAOA,MAAM,CAACC,QAAd,KAA2B,QAA3D,GAAsE,UAAUC,GAAV,EAAe;AAAE,SAAO,OAAOA,GAAd;AAAoB,CAA3G,GAA8G,UAAUA,GAAV,EAAe;AAAE,SAAOA,GAAG,IAAI,OAAOF,MAAP,KAAkB,UAAzB,IAAuCE,GAAG,CAACC,WAAJ,KAAoBH,MAA3D,IAAqEE,GAAG,KAAKF,MAAM,CAACI,SAApF,GAAgG,QAAhG,GAA2G,OAAOF,GAAzH;AAA+H,CAA5Q;;AAEAT,OAAO,CAACY,KAAR,GAAgBA,KAAhB;AACAZ,OAAO,CAACa,EAAR,GAAaA,EAAb;AACAb,OAAO,CAACc,QAAR,GAAmBA,QAAnB;AACAd,OAAO,CAACe,MAAR,GAAiBA,MAAjB;AACAf,OAAO,CAACgB,aAAR,GAAwBA,aAAxB;AACAhB,OAAO,CAACiB,aAAR,GAAwBA,aAAxB;AACAjB,OAAO,CAACkB,aAAR,GAAwBA,aAAxB;AACAlB,OAAO,CAACmB,kBAAR,GAA6BA,kBAA7B;AACAnB,OAAO,CAACoB,qBAAR,GAAgCA,qBAAhC;AACApB,OAAO,CAACqB,kBAAR,GAA6BA,kBAA7B;AACArB,OAAO,CAACsB,eAAR,GAA0BA,eAA1B;AACAtB,OAAO,CAACuB,aAAR,GAAwBA,aAAxB;AACAvB,OAAO,CAACwB,UAAR,GAAqBA,UAArB;AACAxB,OAAO,CAACyB,cAAR,GAAyBA,cAAzB;AACAzB,OAAO,CAAC0B,WAAR,GAAsBA,WAAtB;AACA1B,OAAO,CAAC2B,gBAAR,GAA2BA,gBAA3B;AACA3B,OAAO,CAAC4B,gBAAR,GAA2BA,gBAA3B;AACA5B,OAAO,CAAC6B,aAAR,GAAwBA,aAAxB;AACA7B,OAAO,CAAC8B,kBAAR,GAA6BA,kBAA7B;AACA9B,OAAO,CAAC+B,aAAR,GAAwBA,aAAxB;AACA/B,OAAO,CAACgC,UAAR,GAAqBA,UAArB;AACAhC,OAAO,CAACiC,eAAR,GAA0BA,eAA1B;AACAjC,OAAO,CAACkC,SAAR,GAAoBA,SAApB;AACAlC,OAAO,CAACmC,aAAR,GAAwBA,aAAxB;AACAnC,OAAO,CAACoC,uBAAR,GAAkCA,uBAAlC;AACApC,OAAO,CAACqC,qBAAR,GAAgCA,qBAAhC;AACArC,OAAO,CAACsC,eAAR,GAA0BA,eAA1B;AACAtC,OAAO,CAACuC,0BAAR,GAAqCA,0BAArC;AACAvC,OAAO,CAACwC,MAAR,GAAiBA,MAAjB;AACAxC,OAAO,CAACyC,WAAR,GAAsBA,WAAtB;AACAzC,OAAO,CAAC0C,QAAR,GAAmBA,QAAnB;AACA1C,OAAO,CAAC2C,gCAAR,GAA2CA,gCAA3C;AACA3C,OAAO,CAAC4C,UAAR,GAAqBA,UAArB;AACA5C,OAAO,CAAC6C,OAAR,GAAkBA,OAAlB;AACA7C,OAAO,CAAC8C,OAAR,GAAkBA,OAAlB;AACA9C,OAAO,CAAC+C,IAAR,GAAeA,IAAf;AACA/C,OAAO,CAACgD,KAAR,GAAgBA,KAAhB;AACAhD,OAAO,CAACiD,kBAAR,GAA6BA,kBAA7B;AACAjD,OAAO,CAACkD,WAAR,GAAsBA,WAAtB;AACAlD,OAAO,CAACmD,UAAR,GAAqBA,UAArB;AACAnD,OAAO,CAACoD,gBAAR,GAA2BA,gBAA3B;AACApD,OAAO,CAACqD,kBAAR,GAA6BA,kBAA7B;AACArD,OAAO,CAACsD,kBAAR,GAA6BA,kBAA7B;AACAtD,OAAO,CAACuD,gBAAR,GAA2BA,gBAA3B;AACAvD,OAAO,CAACwD,cAAR,GAAyBA,cAAzB;AACAxD,OAAO,CAACyD,aAAR,GAAwBA,aAAxB;AACAzD,OAAO,CAAC0D,iBAAR,GAA4BA,iBAA5B;AACA1D,OAAO,CAAC2D,OAAR,GAAkBA,OAAlB;AACA3D,OAAO,CAAC4D,SAAR,GAAoBA,SAApB;AACA5D,OAAO,CAAC6D,WAAR,GAAsBA,WAAtB;AACA7D,OAAO,CAAC8D,iBAAR,GAA4BA,iBAA5B;AACA9D,OAAO,CAAC+D,IAAR,GAAeA,IAAf;AACA/D,OAAO,CAACgE,UAAR,GAAqBA,UAArB;AACAhE,OAAO,CAACiE,WAAR,GAAsBA,WAAtB;AACAjE,OAAO,CAACkE,mBAAR,GAA8BA,mBAA9B;AACAlE,OAAO,CAACmE,sBAAR,GAAiCA,sBAAjC;AACAnE,OAAO,CAACoE,2BAAR,GAAsCA,2BAAtC;AACApE,OAAO,CAACqE,2BAAR,GAAsCA,2BAAtC;AACArE,OAAO,CAACsE,SAAR,GAAoBA,SAApB;AACAtE,OAAO,CAACuE,eAAR,GAA0BA,eAA1B;;AAEA,IAAIC,QAAQ,GAAGC,OAAO,CAAC,UAAD,CAAtB;;AAEA,IAAIC,SAAS,GAAGC,sBAAsB,CAACH,QAAD,CAAtC;;AAEA,IAAII,UAAU,GAAGH,OAAO,CAAC,WAAD,CAAxB;;AAEA,IAAII,WAAW,GAAGF,sBAAsB,CAACC,UAAD,CAAxC;;AAEA,IAAIE,YAAY,GAAGL,OAAO,CAAC,sBAAD,CAA1B;;AAEA,IAAIM,aAAa,GAAGN,OAAO,CAAC,uBAAD,CAA3B;;AAEA,IAAIO,UAAU,GAAGP,OAAO,CAAC,oBAAD,CAAxB;;AAEA,IAAIQ,KAAK,GAAGR,OAAO,CAAC,SAAD,CAAnB;;AAEA,IAAIS,IAAI,GAAGC,uBAAuB,CAACF,KAAD,CAAlC;;AAEA,IAAIG,KAAK,GAAGX,OAAO,CAAC,MAAD,CAAnB;;AAEA,IAAIY,MAAM,GAAGV,sBAAsB,CAACS,KAAD,CAAnC;;AAEA,IAAIE,kBAAkB,GAAGb,OAAO,CAAC,6BAAD,CAAhC;;AAEA,IAAIc,EAAE,GAAGJ,uBAAuB,CAACG,kBAAD,CAAhC;;AAEA,IAAIE,WAAW,GAAGf,OAAO,CAAC,qBAAD,CAAzB;;AAEA,IAAIgB,MAAM,GAAGhB,OAAO,CAAC,gBAAD,CAApB;;AAEA,IAAIiB,QAAQ,GAAGjB,OAAO,CAAC,kBAAD,CAAtB;;AAEA,IAAIkB,YAAY,GAAGR,uBAAuB,CAACO,QAAD,CAA1C;;AAEA,SAASP,uBAAT,CAAiC1E,GAAjC,EAAsC;AAAE,MAAIA,GAAG,IAAIA,GAAG,CAACR,UAAf,EAA2B;AAAE,WAAOQ,GAAP;AAAa,GAA1C,MAAgD;AAAE,QAAImF,MAAM,GAAG,EAAb;;AAAiB,QAAInF,GAAG,IAAI,IAAX,EAAiB;AAAE,WAAK,IAAIoF,GAAT,IAAgBpF,GAAhB,EAAqB;AAAE,YAAIqF,MAAM,CAACnF,SAAP,CAAiBoF,cAAjB,CAAgCC,IAAhC,CAAqCvF,GAArC,EAA0CoF,GAA1C,CAAJ,EAAoDD,MAAM,CAACC,GAAD,CAAN,GAAcpF,GAAG,CAACoF,GAAD,CAAjB;AAAyB;AAAE;;AAACD,IAAAA,MAAM,CAACK,OAAP,GAAiBxF,GAAjB;AAAsB,WAAOmF,MAAP;AAAgB;AAAE;;AAE7Q,SAASjB,sBAAT,CAAgClE,GAAhC,EAAqC;AAAE,SAAOA,GAAG,IAAIA,GAAG,CAACR,UAAX,GAAwBQ,GAAxB,GAA8B;AAAEwF,IAAAA,OAAO,EAAExF;AAAX,GAArC;AAAwD;;AAE/F,IAAIyF,QAAQ,GAAG,CAAC,GAAGV,WAAW,CAACW,OAAhB,EAAyB,CAAC,MAAD,CAAzB,CAAf;AAAA,IACIC,GAAG,GAAGF,QAAQ,CAACE,GADnB;AAAA,IAEIC,IAAI,GAAGH,QAAQ,CAACG,IAFpB;AAAA,IAGIC,MAAM,GAAGJ,QAAQ,CAACI,MAHtB;AAAA,IAIIpG,KAAK,GAAGgG,QAAQ,CAAChG,KAJrB;AAAA,IAKIqG,GAAG,GAAGL,QAAQ,CAACK,GALnB;AAAA,IAMIC,IAAI,GAAGN,QAAQ,CAACM,IANpB;AAAA,IAOIC,IAAI,GAAGP,QAAQ,CAACO,IAPpB;AAAA,IAQIC,OAAO,GAAGR,QAAQ,CAACQ,OARvB;;AAUA,SAAS9F,KAAT,CAAeC,EAAf,EAAmBC,QAAnB,EAA6BC,MAA7B,EAAqC4F,OAArC,EAA8CC,UAA9C,EAA0DC,WAA1D,EAAuEC,aAAvE,EAAsF;AACpF,MAAIC,CAAC,GAAGV,IAAI,CAACxF,EAAD,EAAKgE,WAAW,CAACoB,OAAZ,CAAoBe,MAApB,CAA2B;AAC1ChG,IAAAA,aAAa,EAAEiG,0BAA0B,CAACN,OAAD,EAAU5F,MAAV,CADC;AAE1CE,IAAAA,aAAa,EAAEsB,0BAA0B,CAACoE,OAAD,EAAU5F,MAAV,CAFC;AAG1CO,IAAAA,eAAe,EAAE4F,4BAA4B,CAACP,OAAD,EAAU5F,MAAV,CAHH;AAI1CZ,IAAAA,IAAI,EAAEgH,kBAAkB,CAACR,OAAD,CAJkB;AAK1C7F,IAAAA,QAAQ,EAAEA,QALgC;AAM1CC,IAAAA,MAAM,EAAEA,MANkC;AAO1C8F,IAAAA,WAAW,EAAEA,WAP6B;AAQ1CD,IAAAA,UAAU,EAAEA,UAR8B;AAS1C1F,IAAAA,aAAa,EAAEyF,OAAO,CAACS,eAAR,IAA2B,KATA;AAU1CnD,IAAAA,WAAW,EAAE0C,OAAO,CAAC1C,WAAR,KAAwB,KAAxB,GAAgC,KAAhC,GAAwC,IAVX;AAW1ChB,IAAAA,kBAAkB,EAAE4B,WAAW,CAACoB,OAAZ,CAAoBe,MAApB,CAA2BL,OAAO,CAAC1D,kBAAR,IAA8B,EAAzD,CAXsB;AAY1C7C,IAAAA,EAAE,EAAEiH,gBAAgB,CAACxG,EAAD,EAAK8F,OAAL,CAZsB;AAa1ChE,IAAAA,gCAAgC,EAAEgE,OAAO,CAAChE,gCAAR,KAA6C,KAA7C,GAAqD,KAArD,GAA6D,IAbrD;AAc1CG,IAAAA,OAAO,EAAE6D,OAAO,CAAC7D,OAAR,IAAmB,EAdc;AAe1C3B,IAAAA,kBAAkB,EAAEwF,OAAO,CAACxF,kBAfc;AAgB1C2F,IAAAA,aAAa,EAAEA;AAhB2B,GAA3B,CAAL,CAAZ;AAmBAC,EAAAA,CAAC,GAAG7B,IAAI,CAACoC,QAAL,CAAcP,CAAd,CAAJ;AAEA,SAAOA,CAAP;AACD;;AAED,SAASlG,EAAT,CAAYkG,CAAZ,EAAe;AACb,SAAOA,CAAC,CAACX,GAAF,CAAM,IAAN,CAAP;AACD;;AAED,SAAStF,QAAT,CAAkBiG,CAAlB,EAAqB;AACnB,SAAOX,GAAG,CAACW,CAAD,EAAI,UAAJ,CAAV;AACD;;AAED,SAAShG,MAAT,CAAgBgG,CAAhB,EAAmB;AACjB,SAAOX,GAAG,CAACW,CAAD,EAAI,QAAJ,CAAV;AACD;;AAED,SAAS/F,aAAT,CAAuB+F,CAAvB,EAA0B;AACxB,SAAOX,GAAG,CAACW,CAAD,EAAI,eAAJ,CAAV;AACD;;AAED,SAAS9F,aAAT,CAAuB8F,CAAvB,EAA0B;AACxB,SAAOX,GAAG,CAACW,CAAD,EAAI,eAAJ,CAAV;AACD;;AAED,SAAS7F,aAAT,CAAuB6F,CAAvB,EAA0B;AACxB,SAAOX,GAAG,CAACW,CAAD,EAAI,eAAJ,CAAV;AACD;;AAED,SAAS5F,kBAAT,CAA4B4F,CAA5B,EAA+B;AAC7B,SAAOX,GAAG,CAACW,CAAD,EAAI,oBAAJ,CAAV;AACD;;AAED,SAAS3F,qBAAT,CAA+B2F,CAA/B,EAAkC1F,kBAAlC,EAAsD;AACpD,MAAI,CAACA,kBAAL,EAAyB;AACvB,WAAOkF,GAAG,CAACQ,CAAD,EAAI,oBAAJ,EAA0B1G,SAA1B,CAAV;AACD;;AACD,MAAI,CAACgB,kBAAkB,CAACkG,IAApB,IAA4B,CAAClG,kBAAkB,CAACmG,IAApD,EAA0D;AACxD,UAAM,IAAIC,KAAJ,CAAU,qHAAV,CAAN;AACD;;AACD,MAAIpG,kBAAkB,CAACkG,IAAnB,KAA4B,UAAhC,EAA4C;AAC1C,UAAM,IAAIE,KAAJ,CAAU,4FAAV,CAAN;AACD;;AACD,SAAOlB,GAAG,CAACQ,CAAD,EAAI,oBAAJ,EAA0BlC,WAAW,CAACoB,OAAZ,CAAoBe,MAApB,CAA2B3F,kBAA3B,CAA1B,CAAV;AACD;;AAED,SAASA,kBAAT,CAA4B0F,CAA5B,EAA+B;AAC7B,MAAI1F,kBAAkB,GAAG+E,GAAG,CAACW,CAAD,EAAI,oBAAJ,CAA5B;;AACA,MAAI,CAAC1F,kBAAL,EAAyB;AACvB,WAAOhB,SAAP;AACD;;AACD,SAAOmD,cAAc,CAACuD,CAAD,EAAI1F,kBAAkB,CAAC+E,GAAnB,CAAuB,MAAvB,CAAJ,CAArB;AACD;;AAED,SAAS9E,eAAT,CAAyByF,CAAzB,EAA4B;AAC1B,SAAOX,GAAG,CAACW,CAAD,EAAI,iBAAJ,CAAV;AACD;;AAED,SAASxF,aAAT,CAAuBwF,CAAvB,EAA0BW,KAA1B,EAAiC;AAC/B,MAAI1E,KAAK,GAAG2E,SAAS,CAACC,MAAV,GAAmB,CAAnB,IAAwBD,SAAS,CAAC,CAAD,CAAT,KAAiBtH,SAAzC,GAAqDsH,SAAS,CAAC,CAAD,CAA9D,GAAoE,EAAhF;AAEAZ,EAAAA,CAAC,GAAGN,IAAI,CAACM,CAAD,EAAI,YAAJ,EAAkBW,KAAlB,CAAR;AACAX,EAAAA,CAAC,GAAGjF,kBAAkB,CAACiF,CAAD,CAAtB;AACAA,EAAAA,CAAC,GAAG/D,KAAK,IAAI,CAAC0E,KAAV,GAAkBjG,cAAc,CAACsF,CAAD,EAAI/D,KAAJ,CAAhC,GAA6CrB,gBAAgB,CAACoF,CAAD,CAAjE;AACA,SAAOA,CAAP;AACD;;AAED,SAASvF,UAAT,CAAoBuF,CAApB,EAAuB;AACrB,SAAOP,IAAI,CAACO,CAAD,EAAI,YAAJ,EAAkB,KAAlB,CAAX;AACD;;AAED,SAAStF,cAAT,CAAwBsF,CAAxB,EAA2Bc,GAA3B,EAAgC;AAC9B,SAAOpB,IAAI,CAACM,CAAD,EAAI,aAAJ,EAAmBc,GAAnB,CAAX;AACD;;AAED,SAASnG,WAAT,CAAqBqF,CAArB,EAAwB;AACtB,SAAOP,IAAI,CAACO,CAAD,EAAI,aAAJ,EAAmB,EAAnB,CAAX;AACD;;AAED,SAASpF,gBAAT,CAA0BoF,CAA1B,EAA6B;AAC3B,SAAOL,OAAO,CAACK,CAAD,EAAI,aAAJ,CAAd;AACD;;AAED,SAASnF,gBAAT,CAA0BmF,CAA1B,EAA6Bc,GAA7B,EAAkC;AAChC,SAAOpB,IAAI,CAACM,CAAD,EAAI,eAAJ,EAAqBc,GAArB,CAAX;AACD;;AAED,SAAShG,aAAT,CAAuBkF,CAAvB,EAA0B;AACxB,SAAOP,IAAI,CAACO,CAAD,EAAI,eAAJ,EAAqB,EAArB,CAAX;AACD;;AAED,SAASjF,kBAAT,CAA4BiF,CAA5B,EAA+B;AAC7B,SAAOL,OAAO,CAACK,CAAD,EAAI,eAAJ,CAAd;AACD;;AAED,SAAShF,aAAT,CAAuBgF,CAAvB,EAA0Bc,GAA1B,EAA+B;AAC7B,SAAOpB,IAAI,CAACM,CAAD,EAAI,YAAJ,EAAkBc,GAAlB,CAAX;AACD;;AAED,SAAS7F,UAAT,CAAoB+E,CAApB,EAAuB;AACrB,SAAOP,IAAI,CAACO,CAAD,EAAI,YAAJ,EAAkB,EAAlB,CAAX;AACD;;AAED,SAAS9E,eAAT,CAAyB8E,CAAzB,EAA4B;AAC1B,SAAOL,OAAO,CAACK,CAAD,EAAI,YAAJ,CAAd;AACD;;AAED,SAAS7E,SAAT,CAAmB6E,CAAnB,EAAsB;AACpB,SAAOP,IAAI,CAACO,CAAD,EAAI,QAAJ,EAAc,KAAd,CAAX;AACD;;AAED,SAAS5E,aAAT,CAAuB4E,CAAvB,EAA0B;AACxB,SAAOL,OAAO,CAACK,CAAD,EAAI,QAAJ,CAAd;AACD;;AAED,SAAS3E,uBAAT,CAAiC2E,CAAjC,EAAoCe,CAApC,EAAuC;AACrC,SAAOvB,GAAG,CAACQ,CAAD,EAAI,uBAAJ,EAA6Be,CAA7B,CAAV;AACD;;AAED,SAASzF,qBAAT,CAA+B0E,CAA/B,EAAkC;AAChC,SAAOX,GAAG,CAACW,CAAD,EAAI,uBAAJ,CAAV;AACD;;AAED,SAASM,gBAAT,CAA0BxG,EAA1B,EAA8B8F,OAA9B,EAAuC;AACrC,MAAIoB,QAAQ,GAAGpB,OAAO,CAACqB,SAAR,GAAoB,KAApB,GAA4B3H,SAAS,KAAKsG,OAAO,CAACoB,QAAtB,GAAiC,IAAjC,GAAwC,CAAC,CAACpB,OAAO,CAACoB,QAA7F;AACA,MAAIE,KAAK,GAAGtB,OAAO,CAACsB,KAAR,IAAiB,EAA7B;AACA,MAAIC,mBAAmB,GAAGD,KAAK,CAACC,mBAAhC;AAAA,MACIC,mBAAmB,GAAGF,KAAK,CAACE,mBADhC;AAAA,MAEIC,IAAI,GAAGH,KAAK,CAACG,IAFjB;AAAA,MAGIC,YAAY,GAAGJ,KAAK,CAACI,YAHzB;AAAA,MAIIC,WAAW,GAAGL,KAAK,CAACK,WAJxB;AAOA,MAAIC,MAAM,GAAG5B,OAAO,CAAC4B,MAAR,KAAmB,IAAhC;AACA,MAAIC,oBAAoB,GAAG7B,OAAO,CAAC4B,MAAR,IAAkB,OAAO5B,OAAO,CAAC4B,MAAR,CAAeE,GAAtB,KAA8B,UAAhD,IAA8D,OAAO9B,OAAO,CAAC4B,MAAR,CAAeG,WAAtB,KAAsC,UAApG,IAAkH/B,OAAO,CAAC4B,MAArJ;AACA,MAAII,cAAc,GAAGH,oBAAoB,IAAIjD,EAA7C;AAEA,SAAO,IAAIV,WAAW,CAACoB,OAAZ,CAAoBe,MAAxB,CAA+B;AACpC4B,IAAAA,WAAW,EAAEjC,OAAO,CAACqB,SAAR,IAAqB,0BAA0BnH,EADxB;AAEpCgI,IAAAA,eAAe,EAAE,CAAClC,OAAO,CAACqB,SAFU;AAGpCc,IAAAA,SAAS,EAAEzI,SAAS,KAAKsG,OAAO,CAACmC,SAAtB,GAAkC,KAAlC,GAA0Cf,QAAQ,IAAIpB,OAAO,CAACmC,SAHrC;AAIpCC,IAAAA,SAAS,EAAE1I,SAAS,KAAKsG,OAAO,CAACoC,SAAtB,GAAkC,EAAEpC,OAAO,CAACqB,SAAR,IAAqB,CAAC,GAAGlD,YAAY,CAACkE,aAAjB,GAAvB,CAAlC,GAA8F,CAAC,CAACrC,OAAO,CAACoC,SAJ/E;AAKpCR,IAAAA,MAAM,EAAEA,MAL4B;AAMpCI,IAAAA,cAAc,EAAEA,cANoB;AAOpCP,IAAAA,IAAI,EAAE,OAAOA,IAAP,KAAgB,QAAhB,GAA2BA,IAA3B,GAAkC/H,SAPJ;AAQpC0H,IAAAA,QAAQ,EAAEA,QAR0B;AASpCI,IAAAA,mBAAmB,EAAE,CAAC,CAACA,mBATa;AAUpCD,IAAAA,mBAAmB,EAAE7H,SAAS,KAAK6H,mBAAd,GAAoC,IAApC,GAA2C,CAAC,CAACA,mBAV9B;AAWpCe,IAAAA,QAAQ,EAAE5I,SAAS,KAAKsG,OAAO,CAACsC,QAAtB,GAAiC,IAAjC,GAAwC,CAAC,GAAG5D,MAAM,CAACY,OAAX,EAAoBU,OAAO,CAACsC,QAAR,IAAoB,EAAxC,EAA4CC,WAA5C,EAXd;AAYpCC,IAAAA,IAAI,EAAE7I,OAAO,CAACqG,OAAO,CAACyC,kBAAT,CAAP,KAAwC,QAAxC,GAAmDzC,OAAO,CAACyC,kBAA3D,GAAgF,EAZlD;AAapCC,IAAAA,eAAe,EAAE1C,OAAO,CAAC0C,eAAR,KAA4BhJ,SAA5B,GAAwC,KAAxC,GAAgD,CAAC,CAACsG,OAAO,CAAC0C,eAbvC;AAcpCC,IAAAA,MAAM,EAAEjJ,SAAS,KAAKsG,OAAO,CAAC2C,MAAtB,GAA+B,KAA/B,GAAuC,CAAC,CAAC3C,OAAO,CAAC2C,MAdrB;AAepCC,IAAAA,YAAY,EAAElJ,SAAS,KAAKsG,OAAO,CAAC4C,YAAtB,GAAqC,EAArC,GAA0C5C,OAAO,CAAC4C,YAf5B;AAgBpClB,IAAAA,YAAY,EAAE,OAAOA,YAAP,KAAwB,QAAxB,GAAmCA,YAAnC,GAAkDhI,SAhB5B;AAiBpCmJ,IAAAA,iBAAiB,EAAEnJ,SAAS,KAAKsG,OAAO,CAAC6C,iBAAtB,GAA0C,IAA1C,GAAiD,CAAC,CAAC7C,OAAO,CAAC6C,iBAjB1C;AAkBpCC,IAAAA,iBAAiB,EAAE,CAAC,CAAC9C,OAAO,CAAC8C,iBAlBO;AAmBpCC,IAAAA,gBAAgB,EAAE,CAAC,OAAOpB,WAAP,KAAuB,WAAvB,GAAqC,WAArC,GAAmDhI,OAAO,CAACgI,WAAD,CAA3D,MAA8E,QAA9E,GAAyFA,WAAzF,GAAuG,EAnBrF;AAoBpCqB,IAAAA,iBAAiB,EAAE,CAAC,CAAChD,OAAO,CAACgD,iBApBO;AAqBpCC,IAAAA,yBAAyB,EAAE,CAAC,CAACjD,OAAO,CAACiD,yBArBD;AAsBpCC,IAAAA,4BAA4B,EAAExJ,SAAS,KAAKsG,OAAO,CAACkD,4BAAtB,GAAqD,IAArD,GAA4D,CAAC,CAAClD,OAAO,CAACkD;AAtBhE,GAA/B,CAAP;AAwBD;;AAED,IAAIC,SAAS,GAAG,CAAC,GAAGtE,WAAW,CAACW,OAAhB,EAAyB,CAAC,MAAD,EAAS,IAAT,CAAzB,CAAhB;AAAA,IACI4D,KAAK,GAAGD,SAAS,CAAC1D,GADtB;AAAA,IAEI4D,KAAK,GAAGF,SAAS,CAACvD,GAFtB;;AAIA,IAAI0D,SAAS,GAAG,CAAC,GAAGzE,WAAW,CAACW,OAAhB,EAAyB,CAAC,MAAD,EAAS,WAAT,EAAsB,IAAtB,CAAzB,CAAhB;AAAA,IACI+D,MAAM,GAAGD,SAAS,CAAC7D,GADvB;AAAA,IAEI+D,MAAM,GAAGF,SAAS,CAAC1D,GAFvB;;AAIA,IAAI6D,cAAc,GAAG,SAASA,cAAT,CAAwBrD,CAAxB,EAA2BsD,SAA3B,EAAsC;AACzD,SAAOH,MAAM,CAACnD,CAAD,EAAIsD,SAAJ,CAAN,IAAwBN,KAAK,CAAChD,CAAD,EAAIsD,SAAJ,CAApC;AACD,CAFD;;AAIA,IAAIjK,EAAE,GAAGJ,OAAO,CAACI,EAAR,GAAa;AACpBwI,EAAAA,WAAW,EAAE,SAASA,WAAT,CAAqB0B,IAArB,EAA2B;AACtC,WAAOF,cAAc,CAACE,IAAD,EAAO,aAAP,CAArB;AACD,GAHmB;AAIpBzB,EAAAA,eAAe,EAAE,SAASA,eAAT,CAAyByB,IAAzB,EAA+B;AAC9C,WAAOF,cAAc,CAACE,IAAD,EAAO,iBAAP,CAArB;AACD,GANmB;AAOpBxB,EAAAA,SAAS,EAAE,SAASA,SAAT,CAAmBwB,IAAnB,EAAyB;AAClC,WAAOF,cAAc,CAACE,IAAD,EAAO,WAAP,CAArB;AACD,GATmB;AAUpBvB,EAAAA,SAAS,EAAE,SAASA,SAAT,CAAmBuB,IAAnB,EAAyB;AAClC,WAAOF,cAAc,CAACE,IAAD,EAAO,WAAP,CAArB;AACD,GAZmB;AAapB/B,EAAAA,MAAM,EAAE,SAASA,MAAT,CAAgB+B,IAAhB,EAAsB;AAC5B,WAAOF,cAAc,CAACE,IAAD,EAAO,QAAP,CAArB;AACD,GAfmB;AAgBpB3B,EAAAA,cAAc,EAAE,SAASA,cAAT,CAAwB2B,IAAxB,EAA8B;AAC5C,WAAOF,cAAc,CAACE,IAAD,EAAO,gBAAP,CAArB;AACD,GAlBmB;AAmBpBvC,EAAAA,QAAQ,EAAE,SAASA,QAAT,CAAkBuC,IAAlB,EAAwB;AAChC,WAAOF,cAAc,CAACE,IAAD,EAAO,UAAP,CAArB;AACD,GArBmB;AAsBpBnB,EAAAA,IAAI,EAAE,SAASA,IAAT,CAAcmB,IAAd,EAAoB;AACxB,WAAOF,cAAc,CAACE,IAAD,EAAO,MAAP,CAArB;AACD,GAxBmB;AAyBpBjB,EAAAA,eAAe,EAAE,SAASA,eAAT,CAAyBiB,IAAzB,EAA+B;AAC9C,WAAOF,cAAc,CAACE,IAAD,EAAO,iBAAP,CAArB;AACD,GA3BmB;AA4BpBpC,EAAAA,mBAAmB,EAAE,SAASA,mBAAT,CAA6BoC,IAA7B,EAAmC;AACtD,WAAOF,cAAc,CAACE,IAAD,EAAO,qBAAP,CAArB;AACD,GA9BmB;AA+BpBnC,EAAAA,mBAAmB,EAAE,SAASA,mBAAT,CAA6BmC,IAA7B,EAAmC;AACtD,WAAOF,cAAc,CAACE,IAAD,EAAO,qBAAP,CAArB;AACD,GAjCmB;AAkCpBrB,EAAAA,QAAQ,EAAE,SAASA,QAAT,CAAkBqB,IAAlB,EAAwB;AAChC,WAAOF,cAAc,CAACE,IAAD,EAAO,UAAP,CAArB;AACD,GApCmB;AAqCpBlC,EAAAA,IAAI,EAAE,SAASA,IAAT,CAAckC,IAAd,EAAoB;AACxB,WAAOF,cAAc,CAACE,IAAD,EAAO,MAAP,CAArB;AACD,GAvCmB;AAwCpBhB,EAAAA,MAAM,EAAE,SAASA,MAAT,CAAgBgB,IAAhB,EAAsB;AAC5B,WAAOF,cAAc,CAACE,IAAD,EAAO,QAAP,CAArB;AACD,GA1CmB;AA2CpBf,EAAAA,YAAY,EAAE,SAASA,YAAT,CAAsBe,IAAtB,EAA4B;AACxC,WAAOF,cAAc,CAACE,IAAD,EAAO,cAAP,CAArB;AACD,GA7CmB;AA8CpBjC,EAAAA,YAAY,EAAE,SAASA,YAAT,CAAsBiC,IAAtB,EAA4B;AACxC,WAAOF,cAAc,CAACE,IAAD,EAAO,cAAP,CAArB;AACD,GAhDmB;AAiDpBZ,EAAAA,gBAAgB,EAAE,SAASA,gBAAT,CAA0BY,IAA1B,EAAgC;AAChD,WAAOF,cAAc,CAACE,IAAD,EAAO,kBAAP,CAArB;AACD,GAnDmB;AAoDpBd,EAAAA,iBAAiB,EAAE,SAASA,iBAAT,CAA2BzC,CAA3B,EAA8B;AAC/C,WAAOP,IAAI,CAACO,CAAD,EAAI,mBAAJ,EAAyBqD,cAAc,CAACrD,CAAD,EAAI,mBAAJ,CAAvC,CAAX;AACD,GAtDmB;AAuDpB0C,EAAAA,iBAAiB,EAAE,SAASA,iBAAT,CAA2B1C,CAA3B,EAA8B;AAC/C,WAAOP,IAAI,CAACO,CAAD,EAAI,mBAAJ,EAAyBqD,cAAc,CAACrD,CAAD,EAAI,mBAAJ,CAAvC,CAAX;AACD,GAzDmB;AA0DpB8C,EAAAA,4BAA4B,EAAE,SAASA,4BAAT,CAAsCS,IAAtC,EAA4C;AACxE,WAAOF,cAAc,CAACE,IAAD,EAAO,8BAAP,CAArB;AACD,GA5DmB;AA6DpBX,EAAAA,iBAAiB,EAAE,SAASA,iBAAT,CAA2B5C,CAA3B,EAA8B;AAC/C,WAAOP,IAAI,CAACO,CAAD,EAAI,mBAAJ,EAAyBqD,cAAc,CAACrD,CAAD,EAAI,mBAAJ,CAAvC,CAAX;AACD,GA/DmB;AAgEpB6C,EAAAA,yBAAyB,EAAE,SAASA,yBAAT,CAAmC7C,CAAnC,EAAsC;AAC/D,WAAOP,IAAI,CAACO,CAAD,EAAI,2BAAJ,EAAiCqD,cAAc,CAACrD,CAAD,EAAI,2BAAJ,CAA/C,CAAX;AACD;AAlEmB,CAAtB;;AAqEA,IAAIwD,SAAS,GAAG,CAAC,GAAG/E,WAAW,CAACW,OAAhB,EAAyB,CAAC,MAAD,EAAS,MAAT,CAAzB,CAAhB;AAAA,IACIqE,gBAAgB,GAAGD,SAAS,CAACnE,GADjC;;AAGA,IAAIjG,IAAI,GAAGH,OAAO,CAACG,IAAR,GAAe;AACxBsK,EAAAA,gBAAgB,EAAE,SAASA,gBAAT,CAA0B1D,CAA1B,EAA6B;AAC7C,WAAOyD,gBAAgB,CAACzD,CAAD,EAAI,kBAAJ,CAAvB;AACD,GAHuB;AAIxB2D,EAAAA,MAAM,EAAE,SAASA,MAAT,CAAgB3D,CAAhB,EAAmB;AACzB,WAAOP,IAAI,CAACO,CAAD,EAAI,YAAJ,CAAJ,IAAyByD,gBAAgB,CAACzD,CAAD,EAAI,QAAJ,CAAhD;AACD,GANuB;AAOxB4D,EAAAA,aAAa,EAAE,SAASA,aAAT,CAAuBL,IAAvB,EAA6B;AAC1C,WAAOE,gBAAgB,CAACF,IAAD,EAAO,eAAP,CAAvB;AACD,GATuB;AAUxBM,EAAAA,QAAQ,EAAE,SAASA,QAAT,CAAkBN,IAAlB,EAAwB;AAChC,WAAOE,gBAAgB,CAACF,IAAD,EAAO,UAAP,CAAvB;AACD,GAZuB;AAaxBO,EAAAA,WAAW,EAAE,SAASA,WAAT,CAAqBP,IAArB,EAA2B;AACtC,WAAOE,gBAAgB,CAACF,IAAD,EAAO,aAAP,CAAvB;AACD,GAfuB;AAgBxBQ,EAAAA,YAAY,EAAE,SAASA,YAAT,CAAsBR,IAAtB,EAA4B;AACxC,WAAOE,gBAAgB,CAACF,IAAD,EAAO,cAAP,CAAvB;AACD,GAlBuB;AAmBxBS,EAAAA,GAAG,EAAE,SAASA,GAAT,CAAaT,IAAb,EAAmB;AACtB,WAAOE,gBAAgB,CAACF,IAAD,EAAO,KAAP,CAAvB;AACD;AArBuB,CAA1B;;AAwBA,SAASnD,kBAAT,CAA4BR,OAA5B,EAAqC;AACnC,MAAIqE,IAAI,GAAGrE,OAAO,CAACxG,IAAR,IAAgB,EAA3B;AAAA,MACI8K,QAAQ,GAAGD,IAAI,CAACC,QADpB;AAAA,MAEIR,gBAAgB,GAAGO,IAAI,CAACP,gBAF5B;AAAA,MAGIC,MAAM,GAAGM,IAAI,CAACN,MAHlB;AAAA,MAIIC,aAAa,GAAGK,IAAI,CAACL,aAJzB;AAAA,MAKIC,QAAQ,GAAGI,IAAI,CAACJ,QALpB;AAAA,MAMIC,WAAW,GAAGG,IAAI,CAACH,WANvB;AAAA,MAOIK,YAAY,GAAGF,IAAI,CAACE,YAPxB;AAAA,MAQIJ,YAAY,GAAGE,IAAI,CAACF,YARxB;AAAA,MASIC,GAAG,GAAGC,IAAI,CAACD,GATf;AAAA,MAUII,KAAK,GAAGH,IAAI,CAACG,KAVjB;AAAA,MAWIC,KAAK,GAAGJ,IAAI,CAACI,KAXjB;;AAaA,MAAIzE,OAAO,CAACxG,IAAR,IAAgBwG,OAAO,CAACxG,IAAR,CAAakL,WAAjC,EAA8C;AAC5CC,IAAAA,OAAO,CAACvI,IAAR,CAAa,8GAAb;AACD;;AAEDkI,EAAAA,QAAQ,GAAG,OAAOA,QAAP,KAAoB,QAApB,GAA+BA,QAA/B,GAA0C5K,SAArD;AACAoK,EAAAA,gBAAgB,GAAG,CAAC,OAAOA,gBAAP,KAA4B,WAA5B,GAA0C,WAA1C,GAAwDnK,OAAO,CAACmK,gBAAD,CAAhE,MAAwF,QAAxF,GAAmGA,gBAAnG,GAAsH,EAAzI;AACAC,EAAAA,MAAM,GAAG,CAAC,OAAOA,MAAP,KAAkB,WAAlB,GAAgC,WAAhC,GAA8CpK,OAAO,CAACoK,MAAD,CAAtD,MAAoE,QAApE,GAA+EA,MAA/E,GAAwF,EAAjG,CApBmC,CAqBnC;;AACAG,EAAAA,WAAW,GAAG,OAAOA,WAAP,KAAuB,QAAvB,IAAmCA,WAAnC,GAAiDA,WAAjD,GAA+D,IAA7E;AACAF,EAAAA,aAAa,GAAG,OAAOA,aAAP,KAAyB,SAAzB,GAAqCA,aAArC,GAAqD,IAArE;AACAC,EAAAA,QAAQ,GAAG,OAAOA,QAAP,KAAoB,SAApB,GAAgCA,QAAhC,GAA2C,IAAtD;AACAM,EAAAA,YAAY,GAAG,OAAOA,YAAP,KAAwB,QAAxB,GAAmCA,YAAnC,GAAkD7K,SAAjE;AACA8K,EAAAA,KAAK,GAAG,OAAOA,KAAP,KAAiB,QAAjB,GAA4BA,KAA5B,GAAoC9K,SAA5C;AACA+K,EAAAA,KAAK,GAAG,OAAOA,KAAP,KAAiB,QAAjB,GAA4BA,KAA5B,GAAoC/K,SAA5C,CA3BmC,CA4BnC;;AACAyK,EAAAA,YAAY,GAAG,OAAOA,YAAP,KAAwB,QAAxB,GAAmCA,YAAnC,GAAkDD,WAAW,GAAG,MAAH,GAAY,OAAxF,CA7BmC,CA8BnC;;AACAA,EAAAA,WAAW,GAAGA,WAAW,IAAI,KAAK,CAAC,GAAG7F,UAAU,CAACuG,gBAAf,EAAiCC,MAAM,CAACC,QAAP,CAAgBC,IAAjD,CAAL,GAA8DF,MAAM,CAACC,QAAP,CAAgBE,QAA3G;AAEAZ,EAAAA,GAAG,GAAG,OAAOA,GAAP,KAAe,SAAf,GAA2BA,GAA3B,GAAiC,IAAvC;;AAEA,MAAI,CAACL,MAAM,CAACkB,KAAZ,EAAmB;AACjBlB,IAAAA,MAAM,CAACkB,KAAP,GAAe,sBAAf;AACD;;AAED,SAAO/G,WAAW,CAACoB,OAAZ,CAAoBe,MAApB,CAA2B;AAChCiE,IAAAA,QAAQ,EAAEA,QADsB;AAEhCR,IAAAA,gBAAgB,EAAEA,gBAFc;AAGhCC,IAAAA,MAAM,EAAEA,MAHwB;AAIhCC,IAAAA,aAAa,EAAEA,aAJiB;AAKhCC,IAAAA,QAAQ,EAAEA,QALsB;AAMhCC,IAAAA,WAAW,EAAEA,WANmB;AAOhCK,IAAAA,YAAY,EAAEA,YAPkB;AAQhCJ,IAAAA,YAAY,EAAEA,YARkB;AAShCC,IAAAA,GAAG,EAAEA,GAT2B;AAUhCI,IAAAA,KAAK,EAAEA,KAVyB;AAWhCC,IAAAA,KAAK,EAAEA;AAXyB,GAA3B,CAAP;AAaD;;AAED,SAAS9I,eAAT,CAAyByE,CAAzB,EAA4B8E,IAA5B,EAAkC;AAChC,SAAOhH,WAAW,CAACoB,OAAZ,CAAoBe,MAApB,CAA2B6E,IAA3B,EAAiCC,KAAjC,CAAuC1F,GAAG,CAACW,CAAD,EAAI,MAAJ,CAA1C,EAAuDgF,IAAvD,EAAP;AACD;;AAED,SAAS9E,0BAAT,CAAoC4E,IAApC,EAA0C9K,MAA1C,EAAkD;AAChD,MAAI8K,IAAI,CAAC7K,aAAL,IAAsB,OAAO6K,IAAI,CAAC7K,aAAZ,KAA8B,QAAxD,EAAkE;AAChE,WAAO6K,IAAI,CAAC7K,aAAZ;AACD;;AAED,MAAI6K,IAAI,CAACG,oBAAL,IAA6B,OAAOH,IAAI,CAACG,oBAAZ,KAAqC,QAAtE,EAAgF;AAC9E,WAAOH,IAAI,CAACG,oBAAZ;AACD;;AAED,MAAIH,IAAI,CAACI,SAAL,IAAkB,OAAOJ,IAAI,CAACI,SAAZ,KAA0B,QAAhD,EAA0D;AACxD,WAAOJ,IAAI,CAACI,SAAZ;AACD;;AAED,MAAIC,SAAS,GAAG,aAAanL,MAA7B;AACA,MAAIoL,QAAQ,GAAG,CAAC,GAAGnH,UAAU,CAACoH,kBAAf,EAAmCF,SAAnC,EAA8CC,QAA7D;AACA,MAAIE,iBAAiB,GAAG,YAAxB;AACA,MAAIC,gBAAgB,GAAG,uBAAvB;;AACA,MAAI,CAAC,GAAGvH,aAAa,CAACwH,QAAlB,EAA4BJ,QAA5B,EAAsCE,iBAAtC,CAAJ,EAA8D;AAC5D,QAAIG,KAAK,GAAGL,QAAQ,CAACM,KAAT,CAAe,GAAf,CAAZ;AACA,WAAOD,KAAK,CAAC5E,MAAN,GAAe,CAAf,GAAmB,iBAAiB4E,KAAK,CAACA,KAAK,CAAC5E,MAAN,GAAe,CAAhB,CAAtB,GAA2CyE,iBAA9D,GAAkFC,gBAAzF;AACD,GAHD,MAGO;AACL,WAAOJ,SAAP;AACD;AACF;;AAED,SAAS3J,0BAAT,CAAoCsJ,IAApC,EAA0C9K,MAA1C,EAAkD;AAChD,MAAI8K,IAAI,CAACG,oBAAL,IAA6B,OAAOH,IAAI,CAACG,oBAAZ,KAAqC,QAAtE,EAAgF;AAC9E,QAAIH,IAAI,CAACa,SAAL,IAAkBb,IAAI,CAACa,SAAL,CAAeC,QAArC,EAA+C;AAC7C;AACA,aAAO,CAAC,GAAGjI,SAAS,CAACuB,OAAd,EAAuB4F,IAAI,CAACG,oBAA5B,EAAkD,SAAlD,EAA6D,IAA7D,EAAmEH,IAAI,CAACa,SAAL,CAAeC,QAAf,GAA0B,KAA7F,CAAP;AACD;;AACD,WAAO,CAAC,GAAGjI,SAAS,CAACuB,OAAd,EAAuB4F,IAAI,CAACG,oBAA5B,EAAkD,YAAlD,CAAP;AACD;;AAED,MAAIH,IAAI,CAACI,SAAL,IAAkB,OAAOJ,IAAI,CAACI,SAAZ,KAA0B,QAAhD,EAA0D;AACxD,WAAOJ,IAAI,CAACI,SAAZ;AACD;;AAED,MAAIC,SAAS,GAAG,aAAanL,MAA7B;AACA,MAAIoL,QAAQ,GAAG,CAAC,GAAGnH,UAAU,CAACoH,kBAAf,EAAmCF,SAAnC,EAA8CC,QAA7D;AACA,MAAIE,iBAAiB,GAAG,YAAxB;AACA,MAAIC,gBAAgB,GAAG,uBAAvB;AAEA,MAAIE,KAAK,GAAGL,QAAQ,CAACM,KAAT,CAAe,GAAf,CAAZ;AACA,MAAIG,WAAW,GAAGJ,KAAK,CAAC,CAAD,CAAvB;AACA,MAAIzL,MAAJ;;AAEA,MAAI,CAAC,GAAGgE,aAAa,CAACwH,QAAlB,EAA4BJ,QAA5B,EAAsCE,iBAAtC,CAAJ,EAA8D;AAC5DtL,IAAAA,MAAM,GAAGyL,KAAK,CAAC5E,MAAN,GAAe,CAAf,GAAmB,iBAAiB4E,KAAK,CAACA,KAAK,CAAC5E,MAAN,GAAe,CAAhB,CAAtB,GAA2CyE,iBAA9D,GAAkFC,gBAA3F;AAEA,WAAO,CAAC,GAAG5H,SAAS,CAACuB,OAAd,EAAuBlF,MAAvB,EAA+B,SAA/B,EAA0C,IAA1C,EAAgD6L,WAAW,GAAG,KAA9D,CAAP;AACD,GAJD,MAIO;AACL,WAAO,CAAC,GAAGlI,SAAS,CAACuB,OAAd,EAAuBiG,SAAvB,EAAkC,YAAlC,CAAP;AACD;AACF;;AAED,SAAShF,4BAAT,CAAsC2E,IAAtC,EAA4C9K,MAA5C,EAAoD;AAClD,MAAI8K,IAAI,CAACvK,eAAL,IAAwB,OAAOuK,IAAI,CAACvK,eAAZ,KAAgC,QAA5D,EAAsE;AACpE,WAAOuK,IAAI,CAACvK,eAAZ;AACD;;AAED,MAAIuK,IAAI,CAACI,SAAL,IAAkB,OAAOJ,IAAI,CAACI,SAAZ,KAA0B,QAAhD,EAA0D;AACxD,WAAOJ,IAAI,CAACI,SAAZ;AACD;;AAED,SAAO,uBAAP;AACD;;AAED,SAASzJ,MAAT,CAAgBuE,CAAhB,EAAmB;AACjB,SAAON,IAAI,CAACM,CAAD,EAAI,QAAJ,EAAc,IAAd,CAAX;AACD;;AAED/G,OAAO,CAACE,KAAR,GAAgBA,KAAhB;;AACA,SAASuC,WAAT,CAAqBsE,CAArB,EAAwBW,KAAxB,EAA+B;AAC7B,SAAOjB,IAAI,CAACM,CAAD,EAAI,UAAJ,EAAgBW,KAAhB,CAAX;AACD;;AAED,SAAShF,QAAT,CAAkBqE,CAAlB,EAAqB;AACnB,SAAOP,IAAI,CAACO,CAAD,EAAI,UAAJ,EAAgB,KAAhB,CAAX;AACD;;AAED,SAASpE,gCAAT,CAA0CoE,CAA1C,EAA6C;AAC3C,SAAOX,GAAG,CAACW,CAAD,EAAI,kCAAJ,EAAwC,IAAxC,CAAV;AACD;;AAED,SAASnE,UAAT,CAAoBmE,CAApB,EAAuBW,KAAvB,EAA8BmF,UAA9B,EAA0C;AACxC9F,EAAAA,CAAC,GAAGpB,YAAY,CAACzF,KAAb,CAAmB6G,CAAnB,EAAsB8F,UAAtB,CAAJ;AACA,SAAOtG,GAAG,CAACQ,CAAD,EAAI,SAAJ,EAAelC,WAAW,CAACoB,OAAZ,CAAoBe,MAApB,CAA2BU,KAA3B,CAAf,CAAV;AACD;;AAED,SAAS7E,OAAT,CAAiBkE,CAAjB,EAAoB;AAClB,SAAOX,GAAG,CAACW,CAAD,EAAI,SAAJ,CAAV;AACD;;AAED,SAASjE,OAAT,CAAiBiE,CAAjB,EAAoB;AAClB,SAAOX,GAAG,CAACW,CAAD,EAAI,SAAJ,EAAe,EAAf,CAAV;AACD;;AAED,SAAShE,IAAT,CAAc+J,CAAd,EAAiBjF,GAAjB,EAAsB;AACpB,MAAIkF,YAAY,GAAGnI,UAAU,CAACoI,GAAX,CAAeC,KAAf,CAAqBH,CAArB,IAA0B,CAAC1M,EAAE,CAACiJ,eAAH,CAAmByD,CAAnB,CAA3B,GAAmD,CAACA,CAAC,CAACzD,eAAzE;;AAEA,MAAI0D,YAAY,IAAIzB,OAAhB,IAA2BA,OAAO,CAACvI,IAAvC,EAA6C;AAC3CuI,IAAAA,OAAO,CAACvI,IAAR,CAAa8E,GAAb;AACD;AACF;;AAED,SAAS7E,KAAT,CAAe8J,CAAf,EAAkBjF,GAAlB,EAAuB;AACrB,MAAIkF,YAAY,GAAGnI,UAAU,CAACoI,GAAX,CAAeC,KAAf,CAAqBH,CAArB,IAA0B,CAAC1M,EAAE,CAACiJ,eAAH,CAAmByD,CAAnB,CAA3B,GAAmD,CAACA,CAAC,CAACzD,eAAzE;;AAEA,MAAI0D,YAAY,IAAIzB,OAAhB,IAA2BA,OAAO,CAACtI,KAAvC,EAA8C;AAC5CsI,IAAAA,OAAO,CAACtI,KAAR,CAAc6E,GAAd;AACD;AACF;;AAED,SAAS5E,kBAAT,CAA4B8D,CAA5B,EAA+B;AAC7B,SAAOP,IAAI,CAACO,CAAD,EAAI,oBAAJ,CAAJ,IAAiCX,GAAG,CAACW,CAAD,EAAI,oBAAJ,CAA3C;AACD;;AAED,SAAS7D,WAAT,CAAqB6D,CAArB,EAAwB;AACtB,OAAK,IAAImG,IAAI,GAAGvF,SAAS,CAACC,MAArB,EAA6BuF,UAAU,GAAGC,KAAK,CAACF,IAAI,GAAG,CAAP,GAAWA,IAAI,GAAG,CAAlB,GAAsB,CAAvB,CAA/C,EAA0EG,IAAI,GAAG,CAAtF,EAAyFA,IAAI,GAAGH,IAAhG,EAAsGG,IAAI,EAA1G,EAA8G;AAC5GF,IAAAA,UAAU,CAACE,IAAI,GAAG,CAAR,CAAV,GAAuB1F,SAAS,CAAC0F,IAAD,CAAhC;AACD;;AAED,MAAI9F,IAAI,GAAGI,SAAS,CAACC,MAAV,GAAmB,CAAnB,IAAwBD,SAAS,CAAC,CAAD,CAAT,KAAiBtH,SAAzC,GAAqDsH,SAAS,CAAC,CAAD,CAA9D,GAAoEtH,SAA/E;;AAEA,MAAIsH,SAAS,CAACC,MAAV,KAAqB,CAAzB,EAA4B;AAC1B,WAAOpB,IAAI,CAACO,CAAD,EAAI,aAAJ,EAAmB,CAAC,GAAGnC,UAAU,CAACoI,GAAf,GAAnB,CAAJ,CAA8CM,MAA9C,CAAqD,UAAUC,CAAV,EAAaC,CAAb,EAAgB;AAC1E,aAAOA,CAAC,KAAK,SAAb;AACD,KAFM,EAEJC,QAFI,GAEOC,OAFP,CAEe,IAFf,CAAP;AAGD;;AAED,MAAIC,EAAE,GAAGnH,IAAI,CAACO,CAAD,EAAI,CAAC,aAAD,EAAgBQ,IAAhB,CAAJ,EAA2B,CAAC,GAAG3C,UAAU,CAACgJ,IAAf,GAA3B,CAAb;AACA,SAAOT,UAAU,CAACvF,MAAX,GAAoB,CAApB,GAAwB+F,EAAE,CAACL,MAAH,CAAU,UAAUR,CAAV,EAAa;AACpD,WAAO,CAACK,UAAU,CAACU,OAAX,CAAmBf,CAAC,CAAC1G,GAAF,CAAM,UAAN,CAAnB,CAAR;AACD,GAF8B,CAAxB,GAEFuH,EAFL;AAGD;;AAED,SAASxK,UAAT,CAAoB4D,CAApB,EAAuB;AACrB,MAAIQ,IAAI,GAAGI,SAAS,CAACC,MAAV,GAAmB,CAAnB,IAAwBD,SAAS,CAAC,CAAD,CAAT,KAAiBtH,SAAzC,GAAqDsH,SAAS,CAAC,CAAD,CAA9D,GAAoEtH,SAA/E;;AAEA,OAAK,IAAIyN,KAAK,GAAGnG,SAAS,CAACC,MAAtB,EAA8BuF,UAAU,GAAGC,KAAK,CAACU,KAAK,GAAG,CAAR,GAAYA,KAAK,GAAG,CAApB,GAAwB,CAAzB,CAAhD,EAA6EC,KAAK,GAAG,CAA1F,EAA6FA,KAAK,GAAGD,KAArG,EAA4GC,KAAK,EAAjH,EAAqH;AACnHZ,IAAAA,UAAU,CAACY,KAAK,GAAG,CAAT,CAAV,GAAwBpG,SAAS,CAACoG,KAAD,CAAjC;AACD;;AAED,SAAO7K,WAAW,CAAC8K,KAAZ,CAAkB3N,SAAlB,EAA6B,CAAC0G,CAAD,EAAIQ,IAAJ,EAAU0G,MAAV,CAAiBd,UAAjB,CAA7B,EAA2D/G,GAA3D,CAA+D,CAA/D,CAAP;AACD;;AAED,SAAShD,gBAAT,CAA0B2D,CAA1B,EAA6B;AAC3B,MAAIQ,IAAI,GAAGI,SAAS,CAACC,MAAV,GAAmB,CAAnB,IAAwBD,SAAS,CAAC,CAAD,CAAT,KAAiBtH,SAAzC,GAAqDsH,SAAS,CAAC,CAAD,CAA9D,GAAoEtH,SAA/E;AAEA,MAAIsN,EAAE,GAAGzK,WAAW,CAAC6D,CAAD,CAApB;AACA,SAAO4G,EAAE,CAACO,KAAH,OAAe,CAAf,KAAqB,CAAC3G,IAAD,IAASoG,EAAE,CAACQ,KAAH,CAAS,CAAC,CAAD,EAAI,MAAJ,CAAT,MAA0B5G,IAAxD,CAAP;AACD;;AAED,SAASlE,kBAAT,CAA4B0D,CAA5B,EAA+B;AAC7B,MAAIQ,IAAI,GAAGI,SAAS,CAACC,MAAV,GAAmB,CAAnB,IAAwBD,SAAS,CAAC,CAAD,CAAT,KAAiBtH,SAAzC,GAAqDsH,SAAS,CAAC,CAAD,CAA9D,GAAoEtH,SAA/E;AAEA,MAAI+N,GAAG,GAAGlL,WAAW,CAAC6D,CAAD,CAAX,CAAemH,KAAf,EAAV;;AAEA,OAAK,IAAIG,KAAK,GAAG1G,SAAS,CAACC,MAAtB,EAA8BuF,UAAU,GAAGC,KAAK,CAACiB,KAAK,GAAG,CAAR,GAAYA,KAAK,GAAG,CAApB,GAAwB,CAAzB,CAAhD,EAA6EC,KAAK,GAAG,CAA1F,EAA6FA,KAAK,GAAGD,KAArG,EAA4GC,KAAK,EAAjH,EAAqH;AACnHnB,IAAAA,UAAU,CAACmB,KAAK,GAAG,CAAT,CAAV,GAAwB3G,SAAS,CAAC2G,KAAD,CAAjC;AACD;;AAED,MAAIC,QAAQ,GAAGrL,WAAW,CAAC8K,KAAZ,CAAkB3N,SAAlB,EAA6B,CAAC0G,CAAD,EAAIQ,IAAJ,EAAU0G,MAAV,CAAiBd,UAAjB,CAA7B,EAA2De,KAA3D,EAAf;AACA,SAAOE,GAAG,GAAG,CAAN,IAAWA,GAAG,KAAKG,QAA1B;AACD;;AAED,SAASjL,kBAAT,CAA4ByD,CAA5B,EAA+B;AAC7B,MAAIQ,IAAI,GAAGI,SAAS,CAACC,MAAV,GAAmB,CAAnB,IAAwBD,SAAS,CAAC,CAAD,CAAT,KAAiBtH,SAAzC,GAAqDsH,SAAS,CAAC,CAAD,CAA9D,GAAoEtH,SAA/E;;AAEA,OAAK,IAAImO,KAAK,GAAG7G,SAAS,CAACC,MAAtB,EAA8BuF,UAAU,GAAGC,KAAK,CAACoB,KAAK,GAAG,CAAR,GAAYA,KAAK,GAAG,CAApB,GAAwB,CAAzB,CAAhD,EAA6EC,KAAK,GAAG,CAA1F,EAA6FA,KAAK,GAAGD,KAArG,EAA4GC,KAAK,EAAjH,EAAqH;AACnHtB,IAAAA,UAAU,CAACsB,KAAK,GAAG,CAAT,CAAV,GAAwB9G,SAAS,CAAC8G,KAAD,CAAjC;AACD;;AAED,SAAOlL,gBAAgB,CAACyK,KAAjB,CAAuB3N,SAAvB,EAAkC,CAAC0G,CAAD,EAAIQ,IAAJ,EAAU0G,MAAV,CAAiBd,UAAjB,CAAlC,IAAkE,CAAzE;AACD;;AAED,SAAS5J,gBAAT,CAA0BwD,CAA1B,EAA6B;AAC3B,MAAIQ,IAAI,GAAGI,SAAS,CAACC,MAAV,GAAmB,CAAnB,IAAwBD,SAAS,CAAC,CAAD,CAAT,KAAiBtH,SAAzC,GAAqDsH,SAAS,CAAC,CAAD,CAA9D,GAAoEtH,SAA/E;;AAEA,OAAK,IAAIqO,KAAK,GAAG/G,SAAS,CAACC,MAAtB,EAA8BuF,UAAU,GAAGC,KAAK,CAACsB,KAAK,GAAG,CAAR,GAAYA,KAAK,GAAG,CAApB,GAAwB,CAAzB,CAAhD,EAA6EC,KAAK,GAAG,CAA1F,EAA6FA,KAAK,GAAGD,KAArG,EAA4GC,KAAK,EAAjH,EAAqH;AACnHxB,IAAAA,UAAU,CAACwB,KAAK,GAAG,CAAT,CAAV,GAAwBhH,SAAS,CAACgH,KAAD,CAAjC;AACD;;AAED,SAAOzL,WAAW,CAAC8K,KAAZ,CAAkB3N,SAAlB,EAA6B,CAAC0G,CAAD,EAAIQ,IAAJ,EAAU0G,MAAV,CAAiBd,UAAjB,CAA7B,EAA2De,KAA3D,EAAP;AACD;;AAED,SAAS1K,cAAT,CAAwBuD,CAAxB,EAA2BS,IAA3B,EAAiC;AAC/B,SAAOtE,WAAW,CAAC6D,CAAD,CAAX,CAAe6H,IAAf,CAAoB,UAAUC,EAAV,EAAc;AACvC,WAAOA,EAAE,CAACzI,GAAH,CAAO,MAAP,MAAmBoB,IAA1B;AACD,GAFM,CAAP;AAGD;;AAED,SAAS/D,aAAT,CAAuBsD,CAAvB,EAA0BS,IAA1B,EAAgC;AAC9B,SAAO,CAAC,CAAChE,cAAc,CAACuD,CAAD,EAAIS,IAAJ,CAAvB;AACD;;AAED,SAAS9D,iBAAT,CAA2BqD,CAA3B,EAA8B;AAC5B,MAAI+H,OAAO,GAAG7L,kBAAkB,CAAC8D,CAAD,CAAhC;AAEA,MAAIgI,KAAK,GAAGD,OAAO,CAACZ,KAAR,OAAoB,CAApB,GAAwB,UAAUc,CAAV,EAAa;AAC/C,WAAO,CAAP;AACD,GAFW,GAER,UAAUC,CAAV,EAAa;AACf,WAAOH,OAAO,CAACjB,OAAR,CAAgBoB,CAAC,CAAC7I,GAAF,CAAM,MAAN,CAAhB,CAAP;AACD,GAJD;AAMA,SAAOK,IAAI,CAACM,CAAD,EAAI,aAAJ,EAAmB,CAAC,GAAGtB,MAAM,CAACyJ,iBAAX,EAA8BnI,CAA9B,EAAiCoI,GAAjC,CAAqC,UAAUC,EAAV,EAAc;AAC/E,WAAOA,EAAE,CAAC9B,MAAH,CAAU,UAAU2B,CAAV,EAAa;AAC5B,aAAOF,KAAK,CAACE,CAAD,CAAL,IAAY,CAAnB;AACD,KAFM,EAEJI,IAFI,CAEC,UAAUC,EAAV,EAAcC,EAAd,EAAkB;AACxB,aAAOR,KAAK,CAACO,EAAD,CAAL,GAAYP,KAAK,CAACQ,EAAD,CAAxB;AACD,KAJM,CAAP;AAKD,GAN6B,CAAnB,CAAX;AAOD;;AAED,SAAS5L,OAAT,CAAiBoD,CAAjB,EAAoBc,GAApB,EAAyB;AACvB,OAAK,IAAI2H,KAAK,GAAG7H,SAAS,CAACC,MAAtB,EAA8B6H,IAAI,GAAGrC,KAAK,CAACoC,KAAK,GAAG,CAAR,GAAYA,KAAK,GAAG,CAApB,GAAwB,CAAzB,CAA1C,EAAuEE,KAAK,GAAG,CAApF,EAAuFA,KAAK,GAAGF,KAA/F,EAAsGE,KAAK,EAA3G,EAA+G;AAC7GD,IAAAA,IAAI,CAACC,KAAK,GAAG,CAAT,CAAJ,GAAkB/H,SAAS,CAAC+H,KAAD,CAA3B;AACD;;AAED,SAAOtJ,GAAG,CAACW,CAAD,EAAI,YAAJ,CAAH,CAAqBiH,KAArB,CAA2B3N,SAA3B,EAAsC,CAACwH,GAAD,EAAMd,CAAN,EAASkH,MAAT,CAAgBwB,IAAhB,CAAtC,CAAP;AACD;;AAED,SAAS7L,SAAT,CAAmBmD,CAAnB,EAAsBc,GAAtB,EAA2B;AACzB,OAAK,IAAI8H,KAAK,GAAGhI,SAAS,CAACC,MAAtB,EAA8B6H,IAAI,GAAGrC,KAAK,CAACuC,KAAK,GAAG,CAAR,GAAYA,KAAK,GAAG,CAApB,GAAwB,CAAzB,CAA1C,EAAuEC,KAAK,GAAG,CAApF,EAAuFA,KAAK,GAAGD,KAA/F,EAAsGC,KAAK,EAA3G,EAA+G;AAC7GH,IAAAA,IAAI,CAACG,KAAK,GAAG,CAAT,CAAJ,GAAkBjI,SAAS,CAACiI,KAAD,CAA3B;AACD;;AAEDC,EAAAA,UAAU,CAAC,YAAY;AACrB,QAAIhJ,WAAW,GAAGT,GAAG,CAACW,CAAD,EAAI,aAAJ,CAArB;AACA,QAAI+I,WAAW,GAAGjJ,WAAW,CAACmH,KAAZ,CAAkB3N,SAAlB,EAA6B,CAACwH,GAAD,EAAMoG,MAAN,CAAawB,IAAb,CAA7B,CAAlB,CAFqB,CAGrB;;AACA,QAAI5H,GAAG,KAAK,qBAAR,IAAiC,CAACiI,WAAtC,EAAmD;AACjD,YAAM,KAAKC,QAAQ,CAACpP,SAAT,CAAmBqP,IAAnB,CAAwBhC,KAAxB,CAA8BvG,KAA9B,EAAqC,CAAC,IAAD,EAAOwG,MAAP,CAAcwB,IAAd,CAArC,CAAL,GAAN;AACD;AACF,GAPS,EAOP,CAPO,CAAV;AAQD;;AAED,SAAS5L,WAAT,CAAqBkD,CAArB,EAAwBc,GAAxB,EAA6B;AAC3B,MAAIf,aAAa,GAAGV,GAAG,CAACW,CAAD,EAAI,eAAJ,CAAvB;;AAEA,OAAK,IAAIkJ,KAAK,GAAGtI,SAAS,CAACC,MAAtB,EAA8B6H,IAAI,GAAGrC,KAAK,CAAC6C,KAAK,GAAG,CAAR,GAAYA,KAAK,GAAG,CAApB,GAAwB,CAAzB,CAA1C,EAAuEC,KAAK,GAAG,CAApF,EAAuFA,KAAK,GAAGD,KAA/F,EAAsGC,KAAK,EAA3G,EAA+G;AAC7GT,IAAAA,IAAI,CAACS,KAAK,GAAG,CAAT,CAAJ,GAAkBvI,SAAS,CAACuI,KAAD,CAA3B;AACD;;AAEDpJ,EAAAA,aAAa,CAACkH,KAAd,CAAoB3N,SAApB,EAA+B,CAACwH,GAAD,EAAMoG,MAAN,CAAawB,IAAb,CAA/B;AACD;;AAED,SAAS3L,iBAAT,CAA2BiD,CAA3B,EAA8B/D,KAA9B,EAAqCuE,IAArC,EAA2C;AACzC;AACA;AACA;AACA;AACA;AAEA,MAAIvE,KAAK,CAACmN,MAAN,KAAiB,CAArB,EAAwB;AACtB,WAAOjL,IAAI,CAACkL,IAAL,CAAUrJ,CAAV,EAAa,CAAC,OAAD,EAAU,OAAV,EAAmB,cAAnB,CAAb,CAAP;AACD,GATwC,CAWzC;;;AACA,MAAI/D,KAAK,CAACqN,IAAN,KAAe,YAAnB,EAAiC;AAC/B,WAAOrN,KAAK,CAACsN,WAAN,IAAqBpL,IAAI,CAACkL,IAAL,CAAUrJ,CAAV,EAAa,CAAC,OAAD,EAAU,OAAV,EAAmB,eAAnB,CAAb,CAA5B;AACD;;AAED,MAAIwJ,WAAW,GAAG;AAChBF,IAAAA,IAAI,EAAE,mBADU;AAEhBG,IAAAA,KAAK,EAAE,6BAFS;AAGhBC,IAAAA,QAAQ,EAAE;AAHM,GAAlB;AAMA,MAAIJ,IAAI,GAAGrN,KAAK,CAACA,KAAN,IAAeA,KAAK,CAACqN,IAAhC;;AACA,MAAIA,IAAI,KAAK,uBAAT,IAAoCE,WAAW,CAAChJ,IAAD,CAAnD,EAA2D;AACzD8I,IAAAA,IAAI,GAAGE,WAAW,CAAChJ,IAAD,CAAlB;AACD;;AAED,MAAI8I,IAAI,KAAK,8BAAb,EAA6C;AAC3CA,IAAAA,IAAI,GAAG,gCAAP;AACD;;AAED,MAAIA,IAAI,KAAK,qBAAb,EAAoC;AAClCA,IAAAA,IAAI,GAAG,uBAAP;AACD;;AACD,MAAIA,IAAI,KAAK,kBAAb,EAAiC;AAC/BA,IAAAA,IAAI,GAAG,0BAAP;AACD;;AAED,SAAOnL,IAAI,CAACkL,IAAL,CAAUrJ,CAAV,EAAa,CAAC,OAAD,EAAU,OAAV,EAAmBsJ,IAAnB,CAAb,KAA0CnL,IAAI,CAACkL,IAAL,CAAUrJ,CAAV,EAAa,CAAC,OAAD,EAAU,OAAV,EAAmB,eAAnB,CAAb,CAAjD;AACD,C,CAED;;;AACA,SAAShD,IAAT,CAAcgD,CAAd,EAAiB/D,KAAjB,EAAwB;AACtB,MAAIA,KAAJ,EAAW;AACT6M,IAAAA,UAAU,CAAC,YAAY;AACrB,aAAOjM,SAAS,CAACmD,CAAD,EAAI,qBAAJ,EAA2B/D,KAA3B,CAAhB;AACD,KAFS,EAEP,EAFO,CAAV;AAGD;;AAED,SAAOuD,GAAG,CAACQ,CAAD,EAAI,SAAJ,EAAe,IAAf,CAAV;AACD;;AAED,SAAS/C,UAAT,CAAoB+C,CAApB,EAAuB;AACrB,SAAOX,GAAG,CAACW,CAAD,EAAI,SAAJ,CAAV;AACD;;AAED,SAAS9C,WAAT,CAAqB8C,CAArB,EAAwB;AACtB,SAAOX,GAAG,CAACW,CAAD,EAAI,aAAJ,CAAV;AACD;;AAED,SAAS7C,mBAAT,CAA6B6C,CAA7B,EAAgC2J,UAAhC,EAA4C;AAC1C9M,EAAAA,SAAS,CAACmD,CAAD,EAAI,aAAJ,EAAmB2J,UAAnB,CAAT;AACD;;AAED,SAASvM,sBAAT,CAAgC4C,CAAhC,EAAmC4J,MAAnC,EAA2C;AACzC/M,EAAAA,SAAS,CAACmD,CAAD,EAAI,eAAJ,EAAqB4J,MAArB,CAAT;AACD;;AAED,SAASvM,2BAAT,CAAqC2C,CAArC,EAAwC/D,KAAxC,EAA+C;AAC7CY,EAAAA,SAAS,CAACmD,CAAD,EAAI,qBAAJ,EAA2B/D,KAA3B,CAAT;AACD;;AAED,SAASqB,2BAAT,CAAqC0C,CAArC,EAAwC/D,KAAxC,EAA+C;AAC7CY,EAAAA,SAAS,CAACmD,CAAD,EAAI,qBAAJ,EAA2B/D,KAA3B,CAAT;AACD;;AAED,SAASsB,SAAT,CAAmByC,CAAnB,EAAsB;AACpB,SAAO,CAAC,GAAGtB,MAAM,CAACmL,mBAAX,EAAgC7J,CAAhC,KAAsC,KAA7C;AACD;;AAED,SAASxC,eAAT,CAAyBwC,CAAzB,EAA4B8E,IAA5B,EAAkC;AAChC,MAAI,CAACA,IAAL,EAAWA,IAAI,GAAG,EAAP;;AAEX,MAAIA,IAAI,CAAC5I,kBAAT,EAA6B;AAC3B8D,IAAAA,CAAC,GAAGN,IAAI,CAACM,CAAD,EAAI,oBAAJ,EAA0BlC,WAAW,CAACoB,OAAZ,CAAoBe,MAApB,CAA2B6E,IAAI,CAAC5I,kBAAhC,CAA1B,CAAR;AACD;;AAED,MAAI4I,IAAI,CAACgF,YAAT,EAAuB;AACrB,QAAItJ,IAAI,GAAGsE,IAAI,CAACgF,YAAL,CAAkBtJ,IAA7B;AAEA,QAAIuJ,eAAe,GAAGvJ,IAAI,CAACwJ,MAAL,CAAY,CAAZ,EAAeC,WAAf,KAA+BzJ,IAAI,CAAC0J,KAAL,CAAW,CAAX,CAArD;AACAlK,IAAAA,CAAC,GAAGN,IAAI,CAACM,CAAD,EAAI,WAAW+J,eAAf,EAAgCjF,IAAI,CAACgF,YAAL,CAAkBK,IAAlD,CAAR;AACD;;AAED,MAAIrF,IAAI,CAAC1L,IAAL,IAAa0L,IAAI,CAAC1L,IAAL,CAAUuK,MAA3B,EAAmC;AACjC3D,IAAAA,CAAC,GAAGN,IAAI,CAACM,CAAD,EAAI,YAAJ,EAAkBlC,WAAW,CAACoB,OAAZ,CAAoBe,MAApB,CAA2B6E,IAAI,CAAC1L,IAAL,CAAUuK,MAArC,CAAlB,CAAR;AACD;;AAED,MAAImB,IAAI,CAAC5D,KAAT,EAAgB;AACd,QAAI4D,IAAI,CAAC5D,KAAL,CAAWI,YAAf,EAA6B;AAC3BtB,MAAAA,CAAC,GAAGN,IAAI,CAACM,CAAD,EAAI,CAAC,IAAD,EAAO,cAAP,CAAJ,EAA4B8E,IAAI,CAAC5D,KAAL,CAAWI,YAAvC,CAAR;AACD;;AAED,QAAIwD,IAAI,CAAC5D,KAAL,CAAWG,IAAf,EAAqB;AACnBrB,MAAAA,CAAC,GAAGN,IAAI,CAACM,CAAD,EAAI,CAAC,IAAD,EAAO,MAAP,CAAJ,EAAoB8E,IAAI,CAAC5D,KAAL,CAAWG,IAA/B,CAAR;AACD;AACF;;AAED,MAAIyD,IAAI,CAAC5C,QAAL,IAAiB4C,IAAI,CAACzC,kBAA1B,EAA8C;AAC5C,QAAIyC,IAAI,CAAC5C,QAAT,EAAmB;AACjBlC,MAAAA,CAAC,GAAGN,IAAI,CAACM,CAAD,EAAI,CAAC,IAAD,EAAO,UAAP,CAAJ,EAAwB8E,IAAI,CAAC5C,QAA7B,CAAR;AACD;;AAED,QAAI4C,IAAI,CAACzC,kBAAT,EAA6B;AAC3BrC,MAAAA,CAAC,GAAGN,IAAI,CAACM,CAAD,EAAI,CAAC,IAAD,EAAO,MAAP,CAAJ,EAAoB8E,IAAI,CAACzC,kBAAzB,CAAR;AACD;;AAEDrC,IAAAA,CAAC,GAAG7B,IAAI,CAACoC,QAAL,CAAcP,CAAd,CAAJ;AACD;;AAED,MAAI,OAAO8E,IAAI,CAACrC,iBAAZ,KAAkC,SAAtC,EAAiD;AAC/CzC,IAAAA,CAAC,GAAGN,IAAI,CAACM,CAAD,EAAI,mBAAJ,EAAyB8E,IAAI,CAACrC,iBAA9B,CAAR;AACD;;AACD,MAAI,OAAOqC,IAAI,CAACpC,iBAAZ,KAAkC,SAAtC,EAAiD;AAC/C1C,IAAAA,CAAC,GAAGN,IAAI,CAACM,CAAD,EAAI,mBAAJ,EAAyB8E,IAAI,CAACpC,iBAA9B,CAAR;AACD;;AACD,MAAI,OAAOoC,IAAI,CAAClC,iBAAZ,KAAkC,SAAtC,EAAiD;AAC/C5C,IAAAA,CAAC,GAAGN,IAAI,CAACM,CAAD,EAAI,mBAAJ,EAAyB8E,IAAI,CAAClC,iBAA9B,CAAR;AACD;;AACD,MAAI,OAAOkC,IAAI,CAACjC,yBAAZ,KAA0C,SAA9C,EAAyD;AACvD7C,IAAAA,CAAC,GAAGN,IAAI,CAACM,CAAD,EAAI,2BAAJ,EAAiC8E,IAAI,CAACjC,yBAAtC,CAAR;AACD;;AAED,SAAO7C,CAAP;AACD","sourcesContent":["'use strict';\n\nexports.__esModule = true;\nexports.reset = exports.auth = exports.ui = undefined;\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\nexports.setup = setup;\nexports.id = id;\nexports.clientID = clientID;\nexports.domain = domain;\nexports.clientBaseUrl = clientBaseUrl;\nexports.tenantBaseUrl = tenantBaseUrl;\nexports.useTenantInfo = useTenantInfo;\nexports.connectionResolver = connectionResolver;\nexports.setResolvedConnection = setResolvedConnection;\nexports.resolvedConnection = resolvedConnection;\nexports.languageBaseUrl = languageBaseUrl;\nexports.setSubmitting = setSubmitting;\nexports.submitting = submitting;\nexports.setGlobalError = setGlobalError;\nexports.globalError = globalError;\nexports.clearGlobalError = clearGlobalError;\nexports.setGlobalSuccess = setGlobalSuccess;\nexports.globalSuccess = globalSuccess;\nexports.clearGlobalSuccess = clearGlobalSuccess;\nexports.setGlobalInfo = setGlobalInfo;\nexports.globalInfo = globalInfo;\nexports.clearGlobalInfo = clearGlobalInfo;\nexports.rendering = rendering;\nexports.stopRendering = stopRendering;\nexports.setSupressSubmitOverlay = setSupressSubmitOverlay;\nexports.suppressSubmitOverlay = suppressSubmitOverlay;\nexports.withAuthOptions = withAuthOptions;\nexports.extractTenantBaseUrlOption = extractTenantBaseUrlOption;\nexports.render = render;\nexports.setLoggedIn = setLoggedIn;\nexports.loggedIn = loggedIn;\nexports.defaultADUsernameFromEmailPrefix = defaultADUsernameFromEmailPrefix;\nexports.setCaptcha = setCaptcha;\nexports.captcha = captcha;\nexports.prefill = prefill;\nexports.warn = warn;\nexports.error = error;\nexports.allowedConnections = allowedConnections;\nexports.connections = connections;\nexports.connection = connection;\nexports.hasOneConnection = hasOneConnection;\nexports.hasOnlyConnections = hasOnlyConnections;\nexports.hasSomeConnections = hasSomeConnections;\nexports.countConnections = countConnections;\nexports.findConnection = findConnection;\nexports.hasConnection = hasConnection;\nexports.filterConnections = filterConnections;\nexports.runHook = runHook;\nexports.emitEvent = emitEvent;\nexports.handleEvent = handleEvent;\nexports.loginErrorMessage = loginErrorMessage;\nexports.stop = stop;\nexports.hasStopped = hasStopped;\nexports.hashCleanup = hashCleanup;\nexports.emitHashParsedEvent = emitHashParsedEvent;\nexports.emitAuthenticatedEvent = emitAuthenticatedEvent;\nexports.emitAuthorizationErrorEvent = emitAuthorizationErrorEvent;\nexports.emitUnrecoverableErrorEvent = emitUnrecoverableErrorEvent;\nexports.showBadge = showBadge;\nexports.overrideOptions = overrideOptions;\n\nvar _urlJoin = require('url-join');\n\nvar _urlJoin2 = _interopRequireDefault(_urlJoin);\n\nvar _immutable = require('immutable');\n\nvar _immutable2 = _interopRequireDefault(_immutable);\n\nvar _media_utils = require('../utils/media_utils');\n\nvar _string_utils = require('../utils/string_utils');\n\nvar _url_utils = require('../utils/url_utils');\n\nvar _i18n = require('../i18n');\n\nvar i18n = _interopRequireWildcard(_i18n);\n\nvar _trim = require('trim');\n\nvar _trim2 = _interopRequireDefault(_trim);\n\nvar _gravatar_provider = require('../avatar/gravatar_provider');\n\nvar gp = _interopRequireWildcard(_gravatar_provider);\n\nvar _data_utils = require('../utils/data_utils');\n\nvar _index = require('./client/index');\n\nvar _captcha = require('../field/captcha');\n\nvar captchaField = _interopRequireWildcard(_captcha);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar _dataFns = (0, _data_utils.dataFns)(['core']),\n    get = _dataFns.get,\n    init = _dataFns.init,\n    remove = _dataFns.remove,\n    reset = _dataFns.reset,\n    set = _dataFns.set,\n    tget = _dataFns.tget,\n    tset = _dataFns.tset,\n    tremove = _dataFns.tremove;\n\nfunction setup(id, clientID, domain, options, hookRunner, emitEventFn, handleEventFn) {\n  var m = init(id, _immutable2.default.fromJS({\n    clientBaseUrl: extractClientBaseUrlOption(options, domain),\n    tenantBaseUrl: extractTenantBaseUrlOption(options, domain),\n    languageBaseUrl: extractLanguageBaseUrlOption(options, domain),\n    auth: extractAuthOptions(options),\n    clientID: clientID,\n    domain: domain,\n    emitEventFn: emitEventFn,\n    hookRunner: hookRunner,\n    useTenantInfo: options.__useTenantInfo || false,\n    hashCleanup: options.hashCleanup === false ? false : true,\n    allowedConnections: _immutable2.default.fromJS(options.allowedConnections || []),\n    ui: extractUIOptions(id, options),\n    defaultADUsernameFromEmailPrefix: options.defaultADUsernameFromEmailPrefix === false ? false : true,\n    prefill: options.prefill || {},\n    connectionResolver: options.connectionResolver,\n    handleEventFn: handleEventFn\n  }));\n\n  m = i18n.initI18n(m);\n\n  return m;\n}\n\nfunction id(m) {\n  return m.get('id');\n}\n\nfunction clientID(m) {\n  return get(m, 'clientID');\n}\n\nfunction domain(m) {\n  return get(m, 'domain');\n}\n\nfunction clientBaseUrl(m) {\n  return get(m, 'clientBaseUrl');\n}\n\nfunction tenantBaseUrl(m) {\n  return get(m, 'tenantBaseUrl');\n}\n\nfunction useTenantInfo(m) {\n  return get(m, 'useTenantInfo');\n}\n\nfunction connectionResolver(m) {\n  return get(m, 'connectionResolver');\n}\n\nfunction setResolvedConnection(m, resolvedConnection) {\n  if (!resolvedConnection) {\n    return set(m, 'resolvedConnection', undefined);\n  }\n  if (!resolvedConnection.type || !resolvedConnection.name) {\n    throw new Error('Invalid connection object. The resolved connection must look like: `{ type: \"database\", name: \"connection name\" }`.');\n  }\n  if (resolvedConnection.type !== 'database') {\n    throw new Error('Invalid connection type. Only database connections can be resolved with a custom resolver.');\n  }\n  return set(m, 'resolvedConnection', _immutable2.default.fromJS(resolvedConnection));\n}\n\nfunction resolvedConnection(m) {\n  var resolvedConnection = get(m, 'resolvedConnection');\n  if (!resolvedConnection) {\n    return undefined;\n  }\n  return findConnection(m, resolvedConnection.get('name'));\n}\n\nfunction languageBaseUrl(m) {\n  return get(m, 'languageBaseUrl');\n}\n\nfunction setSubmitting(m, value) {\n  var error = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : '';\n\n  m = tset(m, 'submitting', value);\n  m = clearGlobalSuccess(m);\n  m = error && !value ? setGlobalError(m, error) : clearGlobalError(m);\n  return m;\n}\n\nfunction submitting(m) {\n  return tget(m, 'submitting', false);\n}\n\nfunction setGlobalError(m, str) {\n  return tset(m, 'globalError', str);\n}\n\nfunction globalError(m) {\n  return tget(m, 'globalError', '');\n}\n\nfunction clearGlobalError(m) {\n  return tremove(m, 'globalError');\n}\n\nfunction setGlobalSuccess(m, str) {\n  return tset(m, 'globalSuccess', str);\n}\n\nfunction globalSuccess(m) {\n  return tget(m, 'globalSuccess', '');\n}\n\nfunction clearGlobalSuccess(m) {\n  return tremove(m, 'globalSuccess');\n}\n\nfunction setGlobalInfo(m, str) {\n  return tset(m, 'globalInfo', str);\n}\n\nfunction globalInfo(m) {\n  return tget(m, 'globalInfo', '');\n}\n\nfunction clearGlobalInfo(m) {\n  return tremove(m, 'globalInfo');\n}\n\nfunction rendering(m) {\n  return tget(m, 'render', false);\n}\n\nfunction stopRendering(m) {\n  return tremove(m, 'render');\n}\n\nfunction setSupressSubmitOverlay(m, b) {\n  return set(m, 'suppressSubmitOverlay', b);\n}\n\nfunction suppressSubmitOverlay(m) {\n  return get(m, 'suppressSubmitOverlay');\n}\n\nfunction extractUIOptions(id, options) {\n  var closable = options.container ? false : undefined === options.closable ? true : !!options.closable;\n  var theme = options.theme || {};\n  var labeledSubmitButton = theme.labeledSubmitButton,\n      hideMainScreenTitle = theme.hideMainScreenTitle,\n      logo = theme.logo,\n      primaryColor = theme.primaryColor,\n      authButtons = theme.authButtons;\n\n\n  var avatar = options.avatar !== null;\n  var customAvatarProvider = options.avatar && typeof options.avatar.url === 'function' && typeof options.avatar.displayName === 'function' && options.avatar;\n  var avatarProvider = customAvatarProvider || gp;\n\n  return new _immutable2.default.fromJS({\n    containerID: options.container || 'auth0-lock-container-' + id,\n    appendContainer: !options.container,\n    autoclose: undefined === options.autoclose ? false : closable && options.autoclose,\n    autofocus: undefined === options.autofocus ? !(options.container || (0, _media_utils.isSmallScreen)()) : !!options.autofocus,\n    avatar: avatar,\n    avatarProvider: avatarProvider,\n    logo: typeof logo === 'string' ? logo : undefined,\n    closable: closable,\n    hideMainScreenTitle: !!hideMainScreenTitle,\n    labeledSubmitButton: undefined === labeledSubmitButton ? true : !!labeledSubmitButton,\n    language: undefined === options.language ? 'en' : (0, _trim2.default)(options.language || '').toLowerCase(),\n    dict: _typeof(options.languageDictionary) === 'object' ? options.languageDictionary : {},\n    disableWarnings: options.disableWarnings === undefined ? false : !!options.disableWarnings,\n    mobile: undefined === options.mobile ? false : !!options.mobile,\n    popupOptions: undefined === options.popupOptions ? {} : options.popupOptions,\n    primaryColor: typeof primaryColor === 'string' ? primaryColor : undefined,\n    rememberLastLogin: undefined === options.rememberLastLogin ? true : !!options.rememberLastLogin,\n    allowAutocomplete: !!options.allowAutocomplete,\n    authButtonsTheme: (typeof authButtons === 'undefined' ? 'undefined' : _typeof(authButtons)) === 'object' ? authButtons : {},\n    allowShowPassword: !!options.allowShowPassword,\n    allowPasswordAutocomplete: !!options.allowPasswordAutocomplete,\n    scrollGlobalMessagesIntoView: undefined === options.scrollGlobalMessagesIntoView ? true : !!options.scrollGlobalMessagesIntoView\n  });\n}\n\nvar _dataFns2 = (0, _data_utils.dataFns)(['core', 'ui']),\n    getUI = _dataFns2.get,\n    setUI = _dataFns2.set;\n\nvar _dataFns3 = (0, _data_utils.dataFns)(['core', 'transient', 'ui']),\n    tgetUI = _dataFns3.get,\n    tsetUI = _dataFns3.set;\n\nvar getUIAttribute = function getUIAttribute(m, attribute) {\n  return tgetUI(m, attribute) || getUI(m, attribute);\n};\n\nvar ui = exports.ui = {\n  containerID: function containerID(lock) {\n    return getUIAttribute(lock, 'containerID');\n  },\n  appendContainer: function appendContainer(lock) {\n    return getUIAttribute(lock, 'appendContainer');\n  },\n  autoclose: function autoclose(lock) {\n    return getUIAttribute(lock, 'autoclose');\n  },\n  autofocus: function autofocus(lock) {\n    return getUIAttribute(lock, 'autofocus');\n  },\n  avatar: function avatar(lock) {\n    return getUIAttribute(lock, 'avatar');\n  },\n  avatarProvider: function avatarProvider(lock) {\n    return getUIAttribute(lock, 'avatarProvider');\n  },\n  closable: function closable(lock) {\n    return getUIAttribute(lock, 'closable');\n  },\n  dict: function dict(lock) {\n    return getUIAttribute(lock, 'dict');\n  },\n  disableWarnings: function disableWarnings(lock) {\n    return getUIAttribute(lock, 'disableWarnings');\n  },\n  labeledSubmitButton: function labeledSubmitButton(lock) {\n    return getUIAttribute(lock, 'labeledSubmitButton');\n  },\n  hideMainScreenTitle: function hideMainScreenTitle(lock) {\n    return getUIAttribute(lock, 'hideMainScreenTitle');\n  },\n  language: function language(lock) {\n    return getUIAttribute(lock, 'language');\n  },\n  logo: function logo(lock) {\n    return getUIAttribute(lock, 'logo');\n  },\n  mobile: function mobile(lock) {\n    return getUIAttribute(lock, 'mobile');\n  },\n  popupOptions: function popupOptions(lock) {\n    return getUIAttribute(lock, 'popupOptions');\n  },\n  primaryColor: function primaryColor(lock) {\n    return getUIAttribute(lock, 'primaryColor');\n  },\n  authButtonsTheme: function authButtonsTheme(lock) {\n    return getUIAttribute(lock, 'authButtonsTheme');\n  },\n  rememberLastLogin: function rememberLastLogin(m) {\n    return tget(m, 'rememberLastLogin', getUIAttribute(m, 'rememberLastLogin'));\n  },\n  allowAutocomplete: function allowAutocomplete(m) {\n    return tget(m, 'allowAutocomplete', getUIAttribute(m, 'allowAutocomplete'));\n  },\n  scrollGlobalMessagesIntoView: function scrollGlobalMessagesIntoView(lock) {\n    return getUIAttribute(lock, 'scrollGlobalMessagesIntoView');\n  },\n  allowShowPassword: function allowShowPassword(m) {\n    return tget(m, 'allowShowPassword', getUIAttribute(m, 'allowShowPassword'));\n  },\n  allowPasswordAutocomplete: function allowPasswordAutocomplete(m) {\n    return tget(m, 'allowPasswordAutocomplete', getUIAttribute(m, 'allowPasswordAutocomplete'));\n  }\n};\n\nvar _dataFns4 = (0, _data_utils.dataFns)(['core', 'auth']),\n    getAuthAttribute = _dataFns4.get;\n\nvar auth = exports.auth = {\n  connectionScopes: function connectionScopes(m) {\n    return getAuthAttribute(m, 'connectionScopes');\n  },\n  params: function params(m) {\n    return tget(m, 'authParams') || getAuthAttribute(m, 'params');\n  },\n  autoParseHash: function autoParseHash(lock) {\n    return getAuthAttribute(lock, 'autoParseHash');\n  },\n  redirect: function redirect(lock) {\n    return getAuthAttribute(lock, 'redirect');\n  },\n  redirectUrl: function redirectUrl(lock) {\n    return getAuthAttribute(lock, 'redirectUrl');\n  },\n  responseType: function responseType(lock) {\n    return getAuthAttribute(lock, 'responseType');\n  },\n  sso: function sso(lock) {\n    return getAuthAttribute(lock, 'sso');\n  }\n};\n\nfunction extractAuthOptions(options) {\n  var _ref = options.auth || {},\n      audience = _ref.audience,\n      connectionScopes = _ref.connectionScopes,\n      params = _ref.params,\n      autoParseHash = _ref.autoParseHash,\n      redirect = _ref.redirect,\n      redirectUrl = _ref.redirectUrl,\n      responseMode = _ref.responseMode,\n      responseType = _ref.responseType,\n      sso = _ref.sso,\n      state = _ref.state,\n      nonce = _ref.nonce;\n\n  if (options.auth && options.auth.redirectUri) {\n    console.warn(\"You're sending an `auth` option named `redirectUri`. This option will be ignored. Use `redirectUrl` instead.\");\n  }\n\n  audience = typeof audience === 'string' ? audience : undefined;\n  connectionScopes = (typeof connectionScopes === 'undefined' ? 'undefined' : _typeof(connectionScopes)) === 'object' ? connectionScopes : {};\n  params = (typeof params === 'undefined' ? 'undefined' : _typeof(params)) === 'object' ? params : {};\n  // by default is null because we need to know if it was set when we curate the responseType\n  redirectUrl = typeof redirectUrl === 'string' && redirectUrl ? redirectUrl : null;\n  autoParseHash = typeof autoParseHash === 'boolean' ? autoParseHash : true;\n  redirect = typeof redirect === 'boolean' ? redirect : true;\n  responseMode = typeof responseMode === 'string' ? responseMode : undefined;\n  state = typeof state === 'string' ? state : undefined;\n  nonce = typeof nonce === 'string' ? nonce : undefined;\n  // if responseType was not set and there is a redirectUrl, it defaults to code. Otherwise token.\n  responseType = typeof responseType === 'string' ? responseType : redirectUrl ? 'code' : 'token';\n  // now we set the default because we already did the validation\n  redirectUrl = redirectUrl || '' + (0, _url_utils.getOriginFromUrl)(window.location.href) + window.location.pathname;\n\n  sso = typeof sso === 'boolean' ? sso : true;\n\n  if (!params.scope) {\n    params.scope = 'openid profile email';\n  }\n\n  return _immutable2.default.fromJS({\n    audience: audience,\n    connectionScopes: connectionScopes,\n    params: params,\n    autoParseHash: autoParseHash,\n    redirect: redirect,\n    redirectUrl: redirectUrl,\n    responseMode: responseMode,\n    responseType: responseType,\n    sso: sso,\n    state: state,\n    nonce: nonce\n  });\n}\n\nfunction withAuthOptions(m, opts) {\n  return _immutable2.default.fromJS(opts).merge(get(m, 'auth')).toJS();\n}\n\nfunction extractClientBaseUrlOption(opts, domain) {\n  if (opts.clientBaseUrl && typeof opts.clientBaseUrl === 'string') {\n    return opts.clientBaseUrl;\n  }\n\n  if (opts.configurationBaseUrl && typeof opts.configurationBaseUrl === 'string') {\n    return opts.configurationBaseUrl;\n  }\n\n  if (opts.assetsUrl && typeof opts.assetsUrl === 'string') {\n    return opts.assetsUrl;\n  }\n\n  var domainUrl = 'https://' + domain;\n  var hostname = (0, _url_utils.getLocationFromUrl)(domainUrl).hostname;\n  var DOT_AUTH0_DOT_COM = '.auth0.com';\n  var AUTH0_US_CDN_URL = 'https://cdn.auth0.com';\n  if ((0, _string_utils.endsWith)(hostname, DOT_AUTH0_DOT_COM)) {\n    var parts = hostname.split('.');\n    return parts.length > 3 ? 'https://cdn.' + parts[parts.length - 3] + DOT_AUTH0_DOT_COM : AUTH0_US_CDN_URL;\n  } else {\n    return domainUrl;\n  }\n}\n\nfunction extractTenantBaseUrlOption(opts, domain) {\n  if (opts.configurationBaseUrl && typeof opts.configurationBaseUrl === 'string') {\n    if (opts.overrides && opts.overrides.__tenant) {\n      // When using a custom domain and a configuration URL hosted in auth0's cdn\n      return (0, _urlJoin2.default)(opts.configurationBaseUrl, 'tenants', 'v1', opts.overrides.__tenant + '.js');\n    }\n    return (0, _urlJoin2.default)(opts.configurationBaseUrl, 'info-v1.js');\n  }\n\n  if (opts.assetsUrl && typeof opts.assetsUrl === 'string') {\n    return opts.assetsUrl;\n  }\n\n  var domainUrl = 'https://' + domain;\n  var hostname = (0, _url_utils.getLocationFromUrl)(domainUrl).hostname;\n  var DOT_AUTH0_DOT_COM = '.auth0.com';\n  var AUTH0_US_CDN_URL = 'https://cdn.auth0.com';\n\n  var parts = hostname.split('.');\n  var tenant_name = parts[0];\n  var domain;\n\n  if ((0, _string_utils.endsWith)(hostname, DOT_AUTH0_DOT_COM)) {\n    domain = parts.length > 3 ? 'https://cdn.' + parts[parts.length - 3] + DOT_AUTH0_DOT_COM : AUTH0_US_CDN_URL;\n\n    return (0, _urlJoin2.default)(domain, 'tenants', 'v1', tenant_name + '.js');\n  } else {\n    return (0, _urlJoin2.default)(domainUrl, 'info-v1.js');\n  }\n}\n\nfunction extractLanguageBaseUrlOption(opts, domain) {\n  if (opts.languageBaseUrl && typeof opts.languageBaseUrl === 'string') {\n    return opts.languageBaseUrl;\n  }\n\n  if (opts.assetsUrl && typeof opts.assetsUrl === 'string') {\n    return opts.assetsUrl;\n  }\n\n  return 'https://cdn.auth0.com';\n}\n\nfunction render(m) {\n  return tset(m, 'render', true);\n}\n\nexports.reset = reset;\nfunction setLoggedIn(m, value) {\n  return tset(m, 'loggedIn', value);\n}\n\nfunction loggedIn(m) {\n  return tget(m, 'loggedIn', false);\n}\n\nfunction defaultADUsernameFromEmailPrefix(m) {\n  return get(m, 'defaultADUsernameFromEmailPrefix', true);\n}\n\nfunction setCaptcha(m, value, wasInvalid) {\n  m = captchaField.reset(m, wasInvalid);\n  return set(m, 'captcha', _immutable2.default.fromJS(value));\n}\n\nfunction captcha(m) {\n  return get(m, 'captcha');\n}\n\nfunction prefill(m) {\n  return get(m, 'prefill', {});\n}\n\nfunction warn(x, str) {\n  var shouldOutput = _immutable.Map.isMap(x) ? !ui.disableWarnings(x) : !x.disableWarnings;\n\n  if (shouldOutput && console && console.warn) {\n    console.warn(str);\n  }\n}\n\nfunction error(x, str) {\n  var shouldOutput = _immutable.Map.isMap(x) ? !ui.disableWarnings(x) : !x.disableWarnings;\n\n  if (shouldOutput && console && console.error) {\n    console.error(str);\n  }\n}\n\nfunction allowedConnections(m) {\n  return tget(m, 'allowedConnections') || get(m, 'allowedConnections');\n}\n\nfunction connections(m) {\n  for (var _len = arguments.length, strategies = Array(_len > 2 ? _len - 2 : 0), _key = 2; _key < _len; _key++) {\n    strategies[_key - 2] = arguments[_key];\n  }\n\n  var type = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : undefined;\n\n  if (arguments.length === 1) {\n    return tget(m, 'connections', (0, _immutable.Map)()).filter(function (v, k) {\n      return k !== 'unknown';\n    }).valueSeq().flatten(true);\n  }\n\n  var xs = tget(m, ['connections', type], (0, _immutable.List)());\n  return strategies.length > 0 ? xs.filter(function (x) {\n    return ~strategies.indexOf(x.get('strategy'));\n  }) : xs;\n}\n\nfunction connection(m) {\n  var type = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : undefined;\n\n  for (var _len2 = arguments.length, strategies = Array(_len2 > 2 ? _len2 - 2 : 0), _key2 = 2; _key2 < _len2; _key2++) {\n    strategies[_key2 - 2] = arguments[_key2];\n  }\n\n  return connections.apply(undefined, [m, type].concat(strategies)).get(0);\n}\n\nfunction hasOneConnection(m) {\n  var type = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : undefined;\n\n  var xs = connections(m);\n  return xs.count() === 1 && (!type || xs.getIn([0, 'type']) === type);\n}\n\nfunction hasOnlyConnections(m) {\n  var type = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : undefined;\n\n  var all = connections(m).count();\n\n  for (var _len3 = arguments.length, strategies = Array(_len3 > 2 ? _len3 - 2 : 0), _key3 = 2; _key3 < _len3; _key3++) {\n    strategies[_key3 - 2] = arguments[_key3];\n  }\n\n  var filtered = connections.apply(undefined, [m, type].concat(strategies)).count();\n  return all > 0 && all === filtered;\n}\n\nfunction hasSomeConnections(m) {\n  var type = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : undefined;\n\n  for (var _len4 = arguments.length, strategies = Array(_len4 > 2 ? _len4 - 2 : 0), _key4 = 2; _key4 < _len4; _key4++) {\n    strategies[_key4 - 2] = arguments[_key4];\n  }\n\n  return countConnections.apply(undefined, [m, type].concat(strategies)) > 0;\n}\n\nfunction countConnections(m) {\n  var type = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : undefined;\n\n  for (var _len5 = arguments.length, strategies = Array(_len5 > 2 ? _len5 - 2 : 0), _key5 = 2; _key5 < _len5; _key5++) {\n    strategies[_key5 - 2] = arguments[_key5];\n  }\n\n  return connections.apply(undefined, [m, type].concat(strategies)).count();\n}\n\nfunction findConnection(m, name) {\n  return connections(m).find(function (m1) {\n    return m1.get('name') === name;\n  });\n}\n\nfunction hasConnection(m, name) {\n  return !!findConnection(m, name);\n}\n\nfunction filterConnections(m) {\n  var allowed = allowedConnections(m);\n\n  var order = allowed.count() === 0 ? function (_) {\n    return 0;\n  } : function (c) {\n    return allowed.indexOf(c.get('name'));\n  };\n\n  return tset(m, 'connections', (0, _index.clientConnections)(m).map(function (cs) {\n    return cs.filter(function (c) {\n      return order(c) >= 0;\n    }).sort(function (c1, c2) {\n      return order(c1) - order(c2);\n    });\n  }));\n}\n\nfunction runHook(m, str) {\n  for (var _len6 = arguments.length, args = Array(_len6 > 2 ? _len6 - 2 : 0), _key6 = 2; _key6 < _len6; _key6++) {\n    args[_key6 - 2] = arguments[_key6];\n  }\n\n  return get(m, 'hookRunner').apply(undefined, [str, m].concat(args));\n}\n\nfunction emitEvent(m, str) {\n  for (var _len7 = arguments.length, args = Array(_len7 > 2 ? _len7 - 2 : 0), _key7 = 2; _key7 < _len7; _key7++) {\n    args[_key7 - 2] = arguments[_key7];\n  }\n\n  setTimeout(function () {\n    var emitEventFn = get(m, 'emitEventFn');\n    var hadListener = emitEventFn.apply(undefined, [str].concat(args));\n    // Handle uncaught custom error\n    if (str === 'unrecoverable_error' && !hadListener) {\n      throw new (Function.prototype.bind.apply(Error, [null].concat(args)))();\n    }\n  }, 0);\n}\n\nfunction handleEvent(m, str) {\n  var handleEventFn = get(m, 'handleEventFn');\n\n  for (var _len8 = arguments.length, args = Array(_len8 > 2 ? _len8 - 2 : 0), _key8 = 2; _key8 < _len8; _key8++) {\n    args[_key8 - 2] = arguments[_key8];\n  }\n\n  handleEventFn.apply(undefined, [str].concat(args));\n}\n\nfunction loginErrorMessage(m, error, type) {\n  // NOTE: previous version of lock checked for status codes and, at\n  // some point, if the status code was 401 it defaults to an\n  // \"invalid_user_password\" error (actually the\n  // \"wrongEmailPasswordErrorText\" dict entry) instead of checking\n  // explicitly. We should figure out if there was a reason for that.\n\n  if (error.status === 0) {\n    return i18n.html(m, ['error', 'login', 'lock.network']);\n  }\n\n  // Custom rule error (except blocked_user)\n  if (error.code === 'rule_error') {\n    return error.description || i18n.html(m, ['error', 'login', 'lock.fallback']);\n  }\n\n  var INVALID_MAP = {\n    code: 'lock.invalid_code',\n    email: 'lock.invalid_email_password',\n    username: 'lock.invalid_username_password'\n  };\n\n  var code = error.error || error.code;\n  if (code === 'invalid_user_password' && INVALID_MAP[type]) {\n    code = INVALID_MAP[type];\n  }\n\n  if (code === 'a0.mfa_registration_required') {\n    code = 'lock.mfa_registration_required';\n  }\n\n  if (code === 'a0.mfa_invalid_code') {\n    code = 'lock.mfa_invalid_code';\n  }\n  if (code === 'password_expired') {\n    code = 'password_change_required';\n  }\n\n  return i18n.html(m, ['error', 'login', code]) || i18n.html(m, ['error', 'login', 'lock.fallback']);\n}\n\n// TODO: rename to something less generic that is easier to grep\nfunction stop(m, error) {\n  if (error) {\n    setTimeout(function () {\n      return emitEvent(m, 'unrecoverable_error', error);\n    }, 17);\n  }\n\n  return set(m, 'stopped', true);\n}\n\nfunction hasStopped(m) {\n  return get(m, 'stopped');\n}\n\nfunction hashCleanup(m) {\n  return get(m, 'hashCleanup');\n}\n\nfunction emitHashParsedEvent(m, parsedHash) {\n  emitEvent(m, 'hash_parsed', parsedHash);\n}\n\nfunction emitAuthenticatedEvent(m, result) {\n  emitEvent(m, 'authenticated', result);\n}\n\nfunction emitAuthorizationErrorEvent(m, error) {\n  emitEvent(m, 'authorization_error', error);\n}\n\nfunction emitUnrecoverableErrorEvent(m, error) {\n  emitEvent(m, 'unrecoverable_error', error);\n}\n\nfunction showBadge(m) {\n  return (0, _index.hasFreeSubscription)(m) || false;\n}\n\nfunction overrideOptions(m, opts) {\n  if (!opts) opts = {};\n\n  if (opts.allowedConnections) {\n    m = tset(m, 'allowedConnections', _immutable2.default.fromJS(opts.allowedConnections));\n  }\n\n  if (opts.flashMessage) {\n    var type = opts.flashMessage.type;\n\n    var typeCapitalized = type.charAt(0).toUpperCase() + type.slice(1);\n    m = tset(m, 'global' + typeCapitalized, opts.flashMessage.text);\n  }\n\n  if (opts.auth && opts.auth.params) {\n    m = tset(m, 'authParams', _immutable2.default.fromJS(opts.auth.params));\n  }\n\n  if (opts.theme) {\n    if (opts.theme.primaryColor) {\n      m = tset(m, ['ui', 'primaryColor'], opts.theme.primaryColor);\n    }\n\n    if (opts.theme.logo) {\n      m = tset(m, ['ui', 'logo'], opts.theme.logo);\n    }\n  }\n\n  if (opts.language || opts.languageDictionary) {\n    if (opts.language) {\n      m = tset(m, ['ui', 'language'], opts.language);\n    }\n\n    if (opts.languageDictionary) {\n      m = tset(m, ['ui', 'dict'], opts.languageDictionary);\n    }\n\n    m = i18n.initI18n(m);\n  }\n\n  if (typeof opts.rememberLastLogin === 'boolean') {\n    m = tset(m, 'rememberLastLogin', opts.rememberLastLogin);\n  }\n  if (typeof opts.allowAutocomplete === 'boolean') {\n    m = tset(m, 'allowAutocomplete', opts.allowAutocomplete);\n  }\n  if (typeof opts.allowShowPassword === 'boolean') {\n    m = tset(m, 'allowShowPassword', opts.allowShowPassword);\n  }\n  if (typeof opts.allowPasswordAutocomplete === 'boolean') {\n    m = tset(m, 'allowPasswordAutocomplete', opts.allowPasswordAutocomplete);\n  }\n\n  return m;\n}\n"]},"metadata":{},"sourceType":"script"}