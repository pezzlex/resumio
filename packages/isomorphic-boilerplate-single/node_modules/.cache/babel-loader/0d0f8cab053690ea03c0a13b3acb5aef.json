{"ast":null,"code":"// Generated by CoffeeScript 1.7.1\n(function () {\n  var Pointer, VoidPointer, utils;\n  utils = require('./utils');\n\n  Pointer = function () {\n    function Pointer(offsetType, type, options) {\n      var _base, _base1, _base2, _base3;\n\n      this.offsetType = offsetType;\n      this.type = type;\n      this.options = options != null ? options : {};\n\n      if (this.type === 'void') {\n        this.type = null;\n      }\n\n      if ((_base = this.options).type == null) {\n        _base.type = 'local';\n      }\n\n      if ((_base1 = this.options).allowNull == null) {\n        _base1.allowNull = true;\n      }\n\n      if ((_base2 = this.options).nullValue == null) {\n        _base2.nullValue = 0;\n      }\n\n      if ((_base3 = this.options).lazy == null) {\n        _base3.lazy = false;\n      }\n\n      if (this.options.relativeTo) {\n        this.relativeToGetter = new Function('ctx', \"return ctx.\" + this.options.relativeTo);\n      }\n    }\n\n    Pointer.prototype.decode = function (stream, ctx) {\n      var c, decodeValue, offset, ptr, relative, val;\n      offset = this.offsetType.decode(stream, ctx);\n\n      if (offset === this.options.nullValue && this.options.allowNull) {\n        return null;\n      }\n\n      relative = function () {\n        switch (this.options.type) {\n          case 'local':\n            return ctx._startOffset;\n\n          case 'immediate':\n            return stream.pos - this.offsetType.size();\n\n          case 'parent':\n            return ctx.parent._startOffset;\n\n          default:\n            c = ctx;\n\n            while (c.parent) {\n              c = c.parent;\n            }\n\n            return c._startOffset || 0;\n        }\n      }.call(this);\n\n      if (this.options.relativeTo) {\n        relative += this.relativeToGetter(ctx);\n      }\n\n      ptr = offset + relative;\n\n      if (this.type != null) {\n        val = null;\n\n        decodeValue = function (_this) {\n          return function () {\n            var pos;\n\n            if (val != null) {\n              return val;\n            }\n\n            pos = stream.pos;\n            stream.pos = ptr;\n            val = _this.type.decode(stream, ctx);\n            stream.pos = pos;\n            return val;\n          };\n        }(this);\n\n        if (this.options.lazy) {\n          return new utils.PropertyDescriptor({\n            get: decodeValue\n          });\n        }\n\n        return decodeValue();\n      } else {\n        return ptr;\n      }\n    };\n\n    Pointer.prototype.size = function (val, ctx) {\n      var parent, type;\n      parent = ctx;\n\n      switch (this.options.type) {\n        case 'local':\n        case 'immediate':\n          break;\n\n        case 'parent':\n          ctx = ctx.parent;\n          break;\n\n        default:\n          while (ctx.parent) {\n            ctx = ctx.parent;\n          }\n\n      }\n\n      type = this.type;\n\n      if (type == null) {\n        if (!(val instanceof VoidPointer)) {\n          throw new Error(\"Must be a VoidPointer\");\n        }\n\n        type = val.type;\n        val = val.value;\n      }\n\n      if (val && ctx) {\n        ctx.pointerSize += type.size(val, parent);\n      }\n\n      return this.offsetType.size();\n    };\n\n    Pointer.prototype.encode = function (stream, val, ctx) {\n      var parent, relative, type;\n      parent = ctx;\n\n      if (val == null) {\n        this.offsetType.encode(stream, this.options.nullValue);\n        return;\n      }\n\n      switch (this.options.type) {\n        case 'local':\n          relative = ctx.startOffset;\n          break;\n\n        case 'immediate':\n          relative = stream.pos + this.offsetType.size(val, parent);\n          break;\n\n        case 'parent':\n          ctx = ctx.parent;\n          relative = ctx.startOffset;\n          break;\n\n        default:\n          relative = 0;\n\n          while (ctx.parent) {\n            ctx = ctx.parent;\n          }\n\n      }\n\n      if (this.options.relativeTo) {\n        relative += this.relativeToGetter(parent.val);\n      }\n\n      this.offsetType.encode(stream, ctx.pointerOffset - relative);\n      type = this.type;\n\n      if (type == null) {\n        if (!(val instanceof VoidPointer)) {\n          throw new Error(\"Must be a VoidPointer\");\n        }\n\n        type = val.type;\n        val = val.value;\n      }\n\n      ctx.pointers.push({\n        type: type,\n        val: val,\n        parent: parent\n      });\n      return ctx.pointerOffset += type.size(val, parent);\n    };\n\n    return Pointer;\n  }();\n\n  VoidPointer = function () {\n    function VoidPointer(type, value) {\n      this.type = type;\n      this.value = value;\n    }\n\n    return VoidPointer;\n  }();\n\n  exports.Pointer = Pointer;\n  exports.VoidPointer = VoidPointer;\n}).call(this);","map":{"version":3,"sources":["/Users/pezannekhambatta/Desktop/resumio/node_modules/restructure/src/Pointer.js"],"names":["Pointer","VoidPointer","utils","require","offsetType","type","options","_base","_base1","_base2","_base3","allowNull","nullValue","lazy","relativeTo","relativeToGetter","Function","prototype","decode","stream","ctx","c","decodeValue","offset","ptr","relative","val","_startOffset","pos","size","parent","call","_this","PropertyDescriptor","get","Error","value","pointerSize","encode","startOffset","pointerOffset","pointers","push","exports"],"mappings":"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","sourcesContent":["// Generated by CoffeeScript 1.7.1\n(function() {\n  var Pointer, VoidPointer, utils;\n\n  utils = require('./utils');\n\n  Pointer = (function() {\n    function Pointer(offsetType, type, options) {\n      var _base, _base1, _base2, _base3;\n      this.offsetType = offsetType;\n      this.type = type;\n      this.options = options != null ? options : {};\n      if (this.type === 'void') {\n        this.type = null;\n      }\n      if ((_base = this.options).type == null) {\n        _base.type = 'local';\n      }\n      if ((_base1 = this.options).allowNull == null) {\n        _base1.allowNull = true;\n      }\n      if ((_base2 = this.options).nullValue == null) {\n        _base2.nullValue = 0;\n      }\n      if ((_base3 = this.options).lazy == null) {\n        _base3.lazy = false;\n      }\n      if (this.options.relativeTo) {\n        this.relativeToGetter = new Function('ctx', \"return ctx.\" + this.options.relativeTo);\n      }\n    }\n\n    Pointer.prototype.decode = function(stream, ctx) {\n      var c, decodeValue, offset, ptr, relative, val;\n      offset = this.offsetType.decode(stream, ctx);\n      if (offset === this.options.nullValue && this.options.allowNull) {\n        return null;\n      }\n      relative = (function() {\n        switch (this.options.type) {\n          case 'local':\n            return ctx._startOffset;\n          case 'immediate':\n            return stream.pos - this.offsetType.size();\n          case 'parent':\n            return ctx.parent._startOffset;\n          default:\n            c = ctx;\n            while (c.parent) {\n              c = c.parent;\n            }\n            return c._startOffset || 0;\n        }\n      }).call(this);\n      if (this.options.relativeTo) {\n        relative += this.relativeToGetter(ctx);\n      }\n      ptr = offset + relative;\n      if (this.type != null) {\n        val = null;\n        decodeValue = (function(_this) {\n          return function() {\n            var pos;\n            if (val != null) {\n              return val;\n            }\n            pos = stream.pos;\n            stream.pos = ptr;\n            val = _this.type.decode(stream, ctx);\n            stream.pos = pos;\n            return val;\n          };\n        })(this);\n        if (this.options.lazy) {\n          return new utils.PropertyDescriptor({\n            get: decodeValue\n          });\n        }\n        return decodeValue();\n      } else {\n        return ptr;\n      }\n    };\n\n    Pointer.prototype.size = function(val, ctx) {\n      var parent, type;\n      parent = ctx;\n      switch (this.options.type) {\n        case 'local':\n        case 'immediate':\n          break;\n        case 'parent':\n          ctx = ctx.parent;\n          break;\n        default:\n          while (ctx.parent) {\n            ctx = ctx.parent;\n          }\n      }\n      type = this.type;\n      if (type == null) {\n        if (!(val instanceof VoidPointer)) {\n          throw new Error(\"Must be a VoidPointer\");\n        }\n        type = val.type;\n        val = val.value;\n      }\n      if (val && ctx) {\n        ctx.pointerSize += type.size(val, parent);\n      }\n      return this.offsetType.size();\n    };\n\n    Pointer.prototype.encode = function(stream, val, ctx) {\n      var parent, relative, type;\n      parent = ctx;\n      if (val == null) {\n        this.offsetType.encode(stream, this.options.nullValue);\n        return;\n      }\n      switch (this.options.type) {\n        case 'local':\n          relative = ctx.startOffset;\n          break;\n        case 'immediate':\n          relative = stream.pos + this.offsetType.size(val, parent);\n          break;\n        case 'parent':\n          ctx = ctx.parent;\n          relative = ctx.startOffset;\n          break;\n        default:\n          relative = 0;\n          while (ctx.parent) {\n            ctx = ctx.parent;\n          }\n      }\n      if (this.options.relativeTo) {\n        relative += this.relativeToGetter(parent.val);\n      }\n      this.offsetType.encode(stream, ctx.pointerOffset - relative);\n      type = this.type;\n      if (type == null) {\n        if (!(val instanceof VoidPointer)) {\n          throw new Error(\"Must be a VoidPointer\");\n        }\n        type = val.type;\n        val = val.value;\n      }\n      ctx.pointers.push({\n        type: type,\n        val: val,\n        parent: parent\n      });\n      return ctx.pointerOffset += type.size(val, parent);\n    };\n\n    return Pointer;\n\n  })();\n\n  VoidPointer = (function() {\n    function VoidPointer(type, value) {\n      this.type = type;\n      this.value = value;\n    }\n\n    return VoidPointer;\n\n  })();\n\n  exports.Pointer = Pointer;\n\n  exports.VoidPointer = VoidPointer;\n\n}).call(this);\n"]},"metadata":{},"sourceType":"script"}