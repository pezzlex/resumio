{"ast":null,"code":"import \"antd/es/spin/style/css\";\nimport _Spin from \"antd/es/spin\";\nimport \"antd/es/row/style/css\";\nimport _Row from \"antd/es/row\";\nimport \"antd/es/col/style/css\";\nimport _Col from \"antd/es/col\";\nimport \"antd/es/input/style/css\";\nimport _Input from \"antd/es/input\";\nimport \"antd/es/button/style/css\";\nimport _Button from \"antd/es/button\";\nimport \"antd/es/notification/style/css\";\nimport _notification from \"antd/es/notification\";\nimport \"antd/es/form/style/css\";\nimport _Form from \"antd/es/form\";\nimport _objectSpread from \"/Users/pezannekhambatta/Desktop/resumio/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";\nimport _slicedToArray from \"/Users/pezannekhambatta/Desktop/resumio/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/Users/pezannekhambatta/Desktop/resumio/packages/isomorphic-boilerplate-single/src/containers/AddEditResume.js\";\nimport Box from '@iso/components/utility/box';\nimport LayoutContent from '@iso/components/utility/layoutContent';\nimport LayoutContentWrapper from '@iso/components/utility/layoutWrapper';\nimport Loader from '@iso/components/utility/loader';\nimport React, { useEffect, useState } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { Link, Redirect, useParams, useRouteMatch } from 'react-router-dom';\nimport { addResume, clearCurrentResume, clearStatus, editResume, fetchResumeById, fetchResumes } from '../redux/resumes/actions';\nimport { Header, Title } from './AppLayout.style';\nimport InvoicePageWrapper from './Invoice/SingleInvoice.styles';\nimport RenderedPdf from './RenderedPdf/RenderedPdf';\nimport Styles from './AddEditResume.scss';\nimport { PDFDownloadLink, PDFViewer } from '@react-pdf/renderer';\nimport { Prompt } from 'react-router';\nexport const unstructured = ({\n  contact: {\n    firstName,\n    lastName,\n    email,\n    phone\n  },\n  fileName\n}) => ({\n  fileName,\n  firstName,\n  lastName,\n  phone,\n  email\n});\n\nconst AddEditResume = () => {\n  const _useState = useState(null),\n        _useState2 = _slicedToArray(_useState, 2),\n        numPages = _useState2[0],\n        setNumPages = _useState2[1];\n\n  const _useState3 = useState(1),\n        _useState4 = _slicedToArray(_useState3, 2),\n        pageNumber = _useState4[0],\n        setPageNumber = _useState4[1];\n\n  function onDocumentLoadSuccess({\n    numPages\n  }) {\n    setNumPages(numPages);\n  }\n\n  const dispatch = useDispatch();\n\n  const _useParams = useParams(),\n        resumeId = _useParams.resumeId;\n\n  const match = useRouteMatch();\n  const isAddResume = match.path.endsWith('create-resume');\n\n  const _useSelector = useSelector(state => state.resumeData),\n        error = _useSelector.error,\n        success = _useSelector.success,\n        currentResume = _useSelector.currentResume;\n\n  const _useSelector2 = useSelector(state => state.resumeData.resumes),\n        resumes = _useSelector2.resumes,\n        count = _useSelector2.count;\n\n  const _useSelector3 = useSelector(state => state.Auth),\n        firstName = _useSelector3.firstName,\n        lastName = _useSelector3.lastName,\n        email = _useSelector3.email;\n\n  const defaultFileNamePrefix = 'New Resume';\n  /**\n   * Generate default filenames like New Resume 1, New Resume 2, etc\n   * @param {list of resumes} resumes\n   */\n\n  const defaultFileName = resumes => {\n    let maxIndex = -1;\n    resumes.forEach(resume => {\n      if (resume.fileName.startsWith(defaultFileNamePrefix)) {\n        const fileIndex = resume.fileName === defaultFileNamePrefix ? 0 : parseInt(resume.fileName.substr(defaultFileNamePrefix.length + 1));\n\n        if (Number.isInteger(fileIndex)) {\n          maxIndex = Math.max(maxIndex, fileIndex);\n        }\n      }\n    });\n    return maxIndex === -1 ? defaultFileNamePrefix : \"\".concat(defaultFileNamePrefix, \" \").concat(maxIndex + 1);\n  };\n\n  const _useState5 = useState(defaultFileName(resumes)),\n        _useState6 = _slicedToArray(_useState5, 2),\n        fileName = _useState6[0],\n        setFileName = _useState6[1];\n\n  const _useState7 = useState(false),\n        _useState8 = _slicedToArray(_useState7, 2),\n        isLoading = _useState8[0],\n        setLoading = _useState8[1]; // So it should be false initially, except if I'm on add resume page\n\n\n  const _useState9 = useState(true),\n        _useState10 = _slicedToArray(_useState9, 2),\n        isPageLoading = _useState10[0],\n        setPageLoading = _useState10[1];\n\n  const _useState11 = useState(false),\n        _useState12 = _slicedToArray(_useState11, 2),\n        redirectToReferrer = _useState12[0],\n        setRedirectToReferrer = _useState12[1];\n\n  const _useState13 = useState(false),\n        _useState14 = _slicedToArray(_useState13, 2),\n        isChangeDetected = _useState14[0],\n        setChangeDetected = _useState14[1];\n\n  const _useState15 = useState(false),\n        _useState16 = _slicedToArray(_useState15, 2),\n        isLiveChangeDetected = _useState16[0],\n        setLiveChangeDetected = _useState16[1]; // Hackey workaround for React-PDF bug\n\n\n  const _useState17 = useState(true),\n        _useState18 = _slicedToArray(_useState17, 2),\n        isPdfReady = _useState18[0],\n        setPdfReady = _useState18[1];\n\n  const _useState19 = useState(false),\n        _useState20 = _slicedToArray(_useState19, 2),\n        isUpdating = _useState20[0],\n        setUpdating = _useState20[1];\n\n  const _useState21 = useState(isAddResume ? {\n    fileName,\n    firstName,\n    lastName,\n    email\n  } : _objectSpread({}, unstructured(currentResume))),\n        _useState22 = _slicedToArray(_useState21, 2),\n        liveResume = _useState22[0],\n        setLiveResume = _useState22[1];\n\n  const _useState23 = useState(false),\n        _useState24 = _slicedToArray(_useState23, 2),\n        isSpinning = _useState24[0],\n        setSpinning = _useState24[1];\n\n  const _useState25 = useState(true),\n        _useState26 = _slicedToArray(_useState25, 2),\n        canDownload = _useState26[0],\n        setCanDownload = _useState26[1];\n\n  const _useState27 = useState(liveResume),\n        _useState28 = _slicedToArray(_useState27, 2),\n        delayedResume = _useState28[0],\n        setDelayedResume = _useState28[1];\n\n  const _Form$useForm = _Form.useForm(),\n        _Form$useForm2 = _slicedToArray(_Form$useForm, 1),\n        form = _Form$useForm2[0];\n\n  useEffect(() => {\n    if (!isUpdating && isLiveChangeDetected) {\n      console.log('liveResume', delayedResume, 'latestValue', liveResume);\n      setTimeout(() => {\n        setUpdating(true);\n        setTimeout(() => {\n          setUpdating(false);\n          setLiveChangeDetected(false);\n        }, 2000);\n      }, 9000);\n      setSpinning(true);\n      setTimeout(() => {\n        setSpinning(false);\n      }, 500);\n      setDelayedResume(_objectSpread(_objectSpread({}, delayedResume), liveResume));\n    }\n  }, [isUpdating, isLiveChangeDetected]);\n  useEffect(() => {\n    // If initially edit, fetch resume => add currentResume\n    if (!isAddResume) {\n      dispatch(fetchResumeById(resumeId)); // If initially add, clear current resume\n    } else {\n      dispatch(clearCurrentResume());\n      setRedirectToReferrer(false);\n    }\n  }, []);\n  useEffect(() => {\n    if (success || error) {\n      dispatch(clearStatus());\n      setLoading(false);\n      setPageLoading(false);\n    }\n  }, [success, error]);\n\n  const updateDelayedResume = () => {\n    setSpinning(true);\n    setTimeout(() => {\n      setSpinning(false);\n    }, 500);\n    setDelayedResume(_objectSpread(_objectSpread({}, delayedResume), liveResume));\n    setLiveChangeDetected(false);\n  };\n\n  const onFinish = values => {\n    const structured = ({\n      fileName,\n      firstName,\n      lastName,\n      phone,\n      email\n    }) => ({\n      contact: {\n        firstName,\n        lastName,\n        email,\n        phone\n      },\n      fileName\n    });\n\n    if (isAddResume) {\n      dispatch(addResume(structured(values)));\n    } else {\n      setPdfReady(false);\n      setTimeout(() => {\n        setPdfReady(true);\n      }, 1);\n      dispatch(editResume(resumeId, structured(values)));\n      updateDelayedResume();\n    }\n\n    setLoading(true);\n  };\n\n  const download = () => {\n    setCanDownload(false);\n    updateDelayedResume();\n    setTimeout(() => {\n      setCanDownload(true);\n    }, 200);\n  };\n\n  const onFinishFailed = errorInfo => {\n    console.log('Failed:', errorInfo);\n  };\n\n  useEffect(() => {\n    if (error) {\n      _notification['error']({\n        message: 'Error',\n        description: error\n      });\n    }\n  }, [error]);\n  useEffect(() => {\n    if (success) {\n      dispatch(fetchResumes);\n      if (isAddResume) setRedirectToReferrer(true);\n\n      if (!isAddResume) {\n        setChangeDetected(false);\n        setLiveChangeDetected(false);\n      }\n    }\n  }, [success]);\n\n  if (redirectToReferrer && currentResume) {\n    let from = {\n      pathname: \"/dashboard/edit-resume/\".concat(currentResume._id)\n    };\n    return /*#__PURE__*/React.createElement(Redirect, {\n      to: from,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 213,\n        columnNumber: 12\n      }\n    });\n  }\n\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(React.Fragment, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 218,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Prompt, {\n    when: isChangeDetected,\n    message: \"You have unsaved changes. Are you sure you want to leave?\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 219,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(LayoutContentWrapper, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 224,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(LayoutContent, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 225,\n      columnNumber: 11\n    }\n  }, !isPageLoading ? isAddResume || currentResume ? /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(_Form, {\n    form: form,\n    layout: \"vertical\",\n    initialValues: liveResume,\n    onFinish: onFinish,\n    onFinishFailed: onFinishFailed,\n    onValuesChange: value => {\n      setLiveResume(_objectSpread(_objectSpread({}, liveResume), value));\n      setChangeDetected(true);\n      setLiveChangeDetected(true);\n    },\n    scrollToFirstError: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 229,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(Header, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 242,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(Title, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 243,\n      columnNumber: 23\n    }\n  }, isAddResume ? fileName ? \"Build Resume \\\"\".concat(fileName, \"\\\"\") : 'Build Resume' : \"Edit Resume \\\"\".concat(currentResume.fileName, \"\\\"\")), /*#__PURE__*/React.createElement(InvoicePageWrapper, {\n    className: \"InvoicePageWrapper\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 250,\n      columnNumber: 23\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"PageHeader viewMode\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 251,\n      columnNumber: 25\n    }\n  }, !isAddResume ? /*#__PURE__*/React.createElement(React.Fragment, null, isChangeDetected ? /*#__PURE__*/React.createElement(Link, {\n    to: \"/dashboard/resume/\".concat(resumeId),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 255,\n      columnNumber: 33\n    }\n  }, /*#__PURE__*/React.createElement(_Button, {\n    className: \"isoGoInvoBtn\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 256,\n      columnNumber: 35\n    }\n  }, \"Cancel\")) : /*#__PURE__*/React.createElement(Link, {\n    to: \"/dashboard/resume/\".concat(resumeId),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 261,\n      columnNumber: 33\n    }\n  }, /*#__PURE__*/React.createElement(_Button, {\n    className: \"isoGoInvoBtn\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 262,\n      columnNumber: 35\n    }\n  }, \"Done\")), isChangeDetected ? /*#__PURE__*/React.createElement(_Button, {\n    type: \"primary\",\n    loading: isLoading,\n    htmlType: \"submit\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 267,\n      columnNumber: 33\n    }\n  }, \"Save Changes\") : /*#__PURE__*/React.createElement(_Button, {\n    type: \"primary\",\n    disabled: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 275,\n      columnNumber: 33\n    }\n  }, \"Changes Saved!\")) : /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Link, {\n    to: \"/dashboard\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 282,\n      columnNumber: 31\n    }\n  }, /*#__PURE__*/React.createElement(_Button, {\n    className: \"isoGoInvoBtn\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 283,\n      columnNumber: 33\n    }\n  }, \"Cancel\")), /*#__PURE__*/React.createElement(_Button, {\n    type: \"primary\",\n    loading: isLoading,\n    htmlType: \"submit\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 285,\n      columnNumber: 31\n    }\n  }, \"Save\"))))), /*#__PURE__*/React.createElement(Box, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 298,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(InvoicePageWrapper, {\n    className: \"editView\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 299,\n      columnNumber: 23\n    }\n  }, /*#__PURE__*/React.createElement(_Row, {\n    gutter: 24,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 300,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(_Col, {\n    xl: 12,\n    lg: 12,\n    md: 12,\n    span: 24,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 301,\n      columnNumber: 27\n    }\n  }, /*#__PURE__*/React.createElement(_Row, {\n    gutter: 16,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 302,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(_Col, {\n    xl: 12,\n    lg: 12,\n    md: 12,\n    span: 24,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 303,\n      columnNumber: 31\n    }\n  }, /*#__PURE__*/React.createElement(_Form.Item, {\n    label: \"File Name\",\n    name: \"fileName\",\n    rules: [{\n      required: true,\n      message: 'Please input a file name!'\n    }],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 304,\n      columnNumber: 33\n    }\n  }, /*#__PURE__*/React.createElement(_Input, {\n    placeholder: \"File Name\",\n    onChange: e => {\n      setFileName(e.target.value);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 314,\n      columnNumber: 35\n    }\n  })))), /*#__PURE__*/React.createElement(_Row, {\n    gutter: 16,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 324,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(_Col, {\n    xl: 12,\n    lg: 12,\n    md: 12,\n    span: 24,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 325,\n      columnNumber: 31\n    }\n  }, /*#__PURE__*/React.createElement(_Form.Item, {\n    label: \"First Name\",\n    name: \"firstName\",\n    rules: [{\n      required: true,\n      message: 'Please input your first name!'\n    }],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 326,\n      columnNumber: 33\n    }\n  }, /*#__PURE__*/React.createElement(_Input, {\n    placeholder: \"First Name\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 336,\n      columnNumber: 35\n    }\n  }))), /*#__PURE__*/React.createElement(_Col, {\n    xl: 12,\n    lg: 12,\n    md: 12,\n    span: 24,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 339,\n      columnNumber: 31\n    }\n  }, /*#__PURE__*/React.createElement(_Form.Item, {\n    label: \"Last Name\",\n    name: \"lastName\",\n    rules: [{\n      required: true,\n      message: 'Please input your last name!'\n    }],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 340,\n      columnNumber: 33\n    }\n  }, /*#__PURE__*/React.createElement(_Input, {\n    placeholder: \"Last Name\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 350,\n      columnNumber: 35\n    }\n  }))), /*#__PURE__*/React.createElement(_Col, {\n    xl: 12,\n    lg: 12,\n    md: 12,\n    span: 24,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 353,\n      columnNumber: 31\n    }\n  }, /*#__PURE__*/React.createElement(_Form.Item, {\n    label: \"Email\",\n    name: \"email\",\n    rules: [{\n      type: 'email'\n    }],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 354,\n      columnNumber: 33\n    }\n  }, /*#__PURE__*/React.createElement(_Input, {\n    placeholder: \"Email\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 359,\n      columnNumber: 35\n    }\n  }))), /*#__PURE__*/React.createElement(_Col, {\n    xl: 12,\n    lg: 12,\n    md: 12,\n    span: 24,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 362,\n      columnNumber: 31\n    }\n  }, /*#__PURE__*/React.createElement(_Form.Item, {\n    label: \"Contact Number\",\n    name: \"phone\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 363,\n      columnNumber: 33\n    }\n  }, /*#__PURE__*/React.createElement(_Input, {\n    placeholder: \"Contact Number\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 364,\n      columnNumber: 35\n    }\n  }))))), /*#__PURE__*/React.createElement(_Col, {\n    flex: \"auto\",\n    className: \"iframeFull\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 370,\n      columnNumber: 27\n    }\n  }, // isReady\n  isPdfReady ? /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(_Spin, {\n    spinning: isSpinning // delay={700}\n    ,\n    tip: \"Updating Preview...\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 375,\n      columnNumber: 35\n    }\n  }, /*#__PURE__*/React.createElement(PDFViewer, {\n    height: \"700\",\n    width: \"95%\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 380,\n      columnNumber: 37\n    }\n  }, /*#__PURE__*/React.createElement(RenderedPdf, {\n    resume: delayedResume,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 381,\n      columnNumber: 39\n    }\n  })), /*#__PURE__*/React.createElement(_Button, {\n    type: \"primary\",\n    loading: !canDownload,\n    onClick: download,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 384,\n      columnNumber: 37\n    }\n  }, /*#__PURE__*/React.createElement(PDFDownloadLink, {\n    document: /*#__PURE__*/React.createElement(RenderedPdf, {\n      resume: delayedResume // resume={{ fileName: 'dummy' }}\n      ,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 391,\n        columnNumber: 43\n      }\n    }),\n    fileName: \"\".concat(delayedResume.fileName, \".pdf\"),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 389,\n      columnNumber: 39\n    }\n  }, \"Download!\")))) : /*#__PURE__*/React.createElement(Loader, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 404,\n      columnNumber: 33\n    }\n  }))))))) : /*#__PURE__*/React.createElement(Header, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 414,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(Title, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 415,\n      columnNumber: 19\n    }\n  }, \"Resume not found!\"), /*#__PURE__*/React.createElement(InvoicePageWrapper, {\n    className: \"InvoicePageWrapper\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 416,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"PageHeader viewMode\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 417,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(Link, {\n    to: \"/dashboard\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 418,\n      columnNumber: 23\n    }\n  }, /*#__PURE__*/React.createElement(_Button, {\n    className: \"isoGoInvoBtn\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 419,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 420,\n      columnNumber: 27\n    }\n  }, \"Back to My Resumes\")))))) : /*#__PURE__*/React.createElement(Loader, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 428,\n      columnNumber: 15\n    }\n  })))));\n};\n\nexport default AddEditResume;","map":{"version":3,"sources":["/Users/pezannekhambatta/Desktop/resumio/packages/isomorphic-boilerplate-single/src/containers/AddEditResume.js"],"names":["Box","LayoutContent","LayoutContentWrapper","Loader","React","useEffect","useState","useDispatch","useSelector","Link","Redirect","useParams","useRouteMatch","addResume","clearCurrentResume","clearStatus","editResume","fetchResumeById","fetchResumes","Header","Title","InvoicePageWrapper","RenderedPdf","Styles","PDFDownloadLink","PDFViewer","Prompt","unstructured","contact","firstName","lastName","email","phone","fileName","AddEditResume","numPages","setNumPages","pageNumber","setPageNumber","onDocumentLoadSuccess","dispatch","resumeId","match","isAddResume","path","endsWith","state","resumeData","error","success","currentResume","resumes","count","Auth","defaultFileNamePrefix","defaultFileName","maxIndex","forEach","resume","startsWith","fileIndex","parseInt","substr","length","Number","isInteger","Math","max","setFileName","isLoading","setLoading","isPageLoading","setPageLoading","redirectToReferrer","setRedirectToReferrer","isChangeDetected","setChangeDetected","isLiveChangeDetected","setLiveChangeDetected","isPdfReady","setPdfReady","isUpdating","setUpdating","liveResume","setLiveResume","isSpinning","setSpinning","canDownload","setCanDownload","delayedResume","setDelayedResume","useForm","form","console","log","setTimeout","updateDelayedResume","onFinish","values","structured","download","onFinishFailed","errorInfo","message","description","from","pathname","_id","value","required","e","target","type"],"mappings":";;;;;;;;;;;;;;;;;AAAA,OAAOA,GAAP,MAAgB,6BAAhB;AACA,OAAOC,aAAP,MAA0B,uCAA1B;AACA,OAAOC,oBAAP,MAAiC,uCAAjC;AACA,OAAOC,MAAP,MAAmB,gCAAnB;AAWA,OAAOC,KAAP,IAAgBC,SAAhB,EAA2BC,QAA3B,QAA2C,OAA3C;AACA,SAASC,WAAT,EAAsBC,WAAtB,QAAyC,aAAzC;AACA,SAASC,IAAT,EAAeC,QAAf,EAAyBC,SAAzB,EAAoCC,aAApC,QAAyD,kBAAzD;AACA,SACEC,SADF,EAEEC,kBAFF,EAGEC,WAHF,EAIEC,UAJF,EAKEC,eALF,EAMEC,YANF,QAOO,0BAPP;AAQA,SAASC,MAAT,EAAiBC,KAAjB,QAA8B,mBAA9B;AACA,OAAOC,kBAAP,MAA+B,gCAA/B;AACA,OAAOC,WAAP,MAAwB,2BAAxB;AACA,OAAOC,MAAP,MAAmB,sBAAnB;AACA,SAASC,eAAT,EAA0BC,SAA1B,QAA2C,qBAA3C;AACA,SAASC,MAAT,QAAuB,cAAvB;AAEA,OAAO,MAAMC,YAAY,GAAG,CAAC;AAC3BC,EAAAA,OAAO,EAAE;AAAEC,IAAAA,SAAF;AAAaC,IAAAA,QAAb;AAAuBC,IAAAA,KAAvB;AAA8BC,IAAAA;AAA9B,GADkB;AAE3BC,EAAAA;AAF2B,CAAD,MAGrB;AAAEA,EAAAA,QAAF;AAAYJ,EAAAA,SAAZ;AAAuBC,EAAAA,QAAvB;AAAiCE,EAAAA,KAAjC;AAAwCD,EAAAA;AAAxC,CAHqB,CAArB;;AAKP,MAAMG,aAAa,GAAG,MAAM;AAAA,oBACM5B,QAAQ,CAAC,IAAD,CADd;AAAA;AAAA,QACnB6B,QADmB;AAAA,QACTC,WADS;;AAAA,qBAEU9B,QAAQ,CAAC,CAAD,CAFlB;AAAA;AAAA,QAEnB+B,UAFmB;AAAA,QAEPC,aAFO;;AAI1B,WAASC,qBAAT,CAA+B;AAAEJ,IAAAA;AAAF,GAA/B,EAA6C;AAC3CC,IAAAA,WAAW,CAACD,QAAD,CAAX;AACD;;AACD,QAAMK,QAAQ,GAAGjC,WAAW,EAA5B;;AAP0B,qBAQLI,SAAS,EARJ;AAAA,QAQlB8B,QARkB,cAQlBA,QARkB;;AAU1B,QAAMC,KAAK,GAAG9B,aAAa,EAA3B;AACA,QAAM+B,WAAW,GAAGD,KAAK,CAACE,IAAN,CAAWC,QAAX,CAAoB,eAApB,CAApB;;AAX0B,uBAYgBrC,WAAW,CAClDsC,KAAD,IAAWA,KAAK,CAACC,UADkC,CAZ3B;AAAA,QAYlBC,KAZkB,gBAYlBA,KAZkB;AAAA,QAYXC,OAZW,gBAYXA,OAZW;AAAA,QAYFC,aAZE,gBAYFA,aAZE;;AAAA,wBAeC1C,WAAW,CAAEsC,KAAD,IAAWA,KAAK,CAACC,UAAN,CAAiBI,OAA7B,CAfZ;AAAA,QAelBA,OAfkB,iBAelBA,OAfkB;AAAA,QAeTC,KAfS,iBAeTA,KAfS;;AAAA,wBAiBa5C,WAAW,CAAEsC,KAAD,IAAWA,KAAK,CAACO,IAAlB,CAjBxB;AAAA,QAiBlBxB,SAjBkB,iBAiBlBA,SAjBkB;AAAA,QAiBPC,QAjBO,iBAiBPA,QAjBO;AAAA,QAiBGC,KAjBH,iBAiBGA,KAjBH;;AAkB1B,QAAMuB,qBAAqB,GAAG,YAA9B;AACA;;;;;AAIA,QAAMC,eAAe,GAAIJ,OAAD,IAAa;AACnC,QAAIK,QAAQ,GAAG,CAAC,CAAhB;AACAL,IAAAA,OAAO,CAACM,OAAR,CAAiBC,MAAD,IAAY;AAC1B,UAAIA,MAAM,CAACzB,QAAP,CAAgB0B,UAAhB,CAA2BL,qBAA3B,CAAJ,EAAuD;AACrD,cAAMM,SAAS,GACbF,MAAM,CAACzB,QAAP,KAAoBqB,qBAApB,GACI,CADJ,GAEIO,QAAQ,CAACH,MAAM,CAACzB,QAAP,CAAgB6B,MAAhB,CAAuBR,qBAAqB,CAACS,MAAtB,GAA+B,CAAtD,CAAD,CAHd;;AAIA,YAAIC,MAAM,CAACC,SAAP,CAAiBL,SAAjB,CAAJ,EAAiC;AAC/BJ,UAAAA,QAAQ,GAAGU,IAAI,CAACC,GAAL,CAASX,QAAT,EAAmBI,SAAnB,CAAX;AACD;AACF;AACF,KAVD;AAWA,WAAOJ,QAAQ,KAAK,CAAC,CAAd,GACHF,qBADG,aAEAA,qBAFA,cAEyBE,QAAQ,GAAG,CAFpC,CAAP;AAGD,GAhBD;;AAvB0B,qBAwCMlD,QAAQ,CAACiD,eAAe,CAACJ,OAAD,CAAhB,CAxCd;AAAA;AAAA,QAwCnBlB,QAxCmB;AAAA,QAwCTmC,WAxCS;;AAAA,qBA0CM9D,QAAQ,CAAC,KAAD,CA1Cd;AAAA;AAAA,QA0CnB+D,SA1CmB;AAAA,QA0CRC,UA1CQ,kBA2C1B;;;AA3C0B,qBA4CchE,QAAQ,CAAC,IAAD,CA5CtB;AAAA;AAAA,QA4CnBiE,aA5CmB;AAAA,QA4CJC,cA5CI;;AAAA,sBA6C0BlE,QAAQ,CAAC,KAAD,CA7ClC;AAAA;AAAA,QA6CnBmE,kBA7CmB;AAAA,QA6CCC,qBA7CD;;AAAA,sBA8CoBpE,QAAQ,CAAC,KAAD,CA9C5B;AAAA;AAAA,QA8CnBqE,gBA9CmB;AAAA,QA8CDC,iBA9CC;;AAAA,sBA+C4BtE,QAAQ,CAAC,KAAD,CA/CpC;AAAA;AAAA,QA+CnBuE,oBA/CmB;AAAA,QA+CGC,qBA/CH,mBAgD1B;;;AAhD0B,sBAiDQxE,QAAQ,CAAC,IAAD,CAjDhB;AAAA;AAAA,QAiDnByE,UAjDmB;AAAA,QAiDPC,WAjDO;;AAAA,sBAkDQ1E,QAAQ,CAAC,KAAD,CAlDhB;AAAA;AAAA,QAkDnB2E,UAlDmB;AAAA,QAkDPC,WAlDO;;AAAA,sBAmDU5E,QAAQ,CAC1CqC,WAAW,GACP;AACEV,IAAAA,QADF;AAEEJ,IAAAA,SAFF;AAGEC,IAAAA,QAHF;AAIEC,IAAAA;AAJF,GADO,qBAQFJ,YAAY,CAACuB,aAAD,CARV,CAD+B,CAnDlB;AAAA;AAAA,QAmDnBiC,UAnDmB;AAAA,QAmDPC,aAnDO;;AAAA,sBA+DQ9E,QAAQ,CAAC,KAAD,CA/DhB;AAAA;AAAA,QA+DnB+E,UA/DmB;AAAA,QA+DPC,WA/DO;;AAAA,sBAgEYhF,QAAQ,CAAC,IAAD,CAhEpB;AAAA;AAAA,QAgEnBiF,WAhEmB;AAAA,QAgENC,cAhEM;;AAAA,sBAkEgBlF,QAAQ,CAAC6E,UAAD,CAlExB;AAAA;AAAA,QAkEnBM,aAlEmB;AAAA,QAkEJC,gBAlEI;;AAAA,wBAoEX,MAAKC,OAAL,EApEW;AAAA;AAAA,QAoEnBC,IApEmB;;AAsE1BvF,EAAAA,SAAS,CAAC,MAAM;AACd,QAAI,CAAC4E,UAAD,IAAeJ,oBAAnB,EAAyC;AACvCgB,MAAAA,OAAO,CAACC,GAAR,CAAY,YAAZ,EAA0BL,aAA1B,EAAyC,aAAzC,EAAwDN,UAAxD;AACAY,MAAAA,UAAU,CAAC,MAAM;AACfb,QAAAA,WAAW,CAAC,IAAD,CAAX;AACAa,QAAAA,UAAU,CAAC,MAAM;AACfb,UAAAA,WAAW,CAAC,KAAD,CAAX;AACAJ,UAAAA,qBAAqB,CAAC,KAAD,CAArB;AACD,SAHS,EAGP,IAHO,CAAV;AAID,OANS,EAMP,IANO,CAAV;AAOAQ,MAAAA,WAAW,CAAC,IAAD,CAAX;AACAS,MAAAA,UAAU,CAAC,MAAM;AACfT,QAAAA,WAAW,CAAC,KAAD,CAAX;AACD,OAFS,EAEP,GAFO,CAAV;AAGAI,MAAAA,gBAAgB,iCAAMD,aAAN,GAAwBN,UAAxB,EAAhB;AACD;AACF,GAhBQ,EAgBN,CAACF,UAAD,EAAaJ,oBAAb,CAhBM,CAAT;AAkBAxE,EAAAA,SAAS,CAAC,MAAM;AACd;AACA,QAAI,CAACsC,WAAL,EAAkB;AAChBH,MAAAA,QAAQ,CAACvB,eAAe,CAACwB,QAAD,CAAhB,CAAR,CADgB,CAEhB;AACD,KAHD,MAGO;AACLD,MAAAA,QAAQ,CAAC1B,kBAAkB,EAAnB,CAAR;AACA4D,MAAAA,qBAAqB,CAAC,KAAD,CAArB;AACD;AACF,GATQ,EASN,EATM,CAAT;AAWArE,EAAAA,SAAS,CAAC,MAAM;AACd,QAAI4C,OAAO,IAAID,KAAf,EAAsB;AACpBR,MAAAA,QAAQ,CAACzB,WAAW,EAAZ,CAAR;AACAuD,MAAAA,UAAU,CAAC,KAAD,CAAV;AACAE,MAAAA,cAAc,CAAC,KAAD,CAAd;AACD;AACF,GANQ,EAMN,CAACvB,OAAD,EAAUD,KAAV,CANM,CAAT;;AAQA,QAAMgD,mBAAmB,GAAG,MAAM;AAChCV,IAAAA,WAAW,CAAC,IAAD,CAAX;AACAS,IAAAA,UAAU,CAAC,MAAM;AACfT,MAAAA,WAAW,CAAC,KAAD,CAAX;AACD,KAFS,EAEP,GAFO,CAAV;AAGAI,IAAAA,gBAAgB,iCAAMD,aAAN,GAAwBN,UAAxB,EAAhB;AACAL,IAAAA,qBAAqB,CAAC,KAAD,CAArB;AACD,GAPD;;AASA,QAAMmB,QAAQ,GAAIC,MAAD,IAAY;AAC3B,UAAMC,UAAU,GAAG,CAAC;AAAElE,MAAAA,QAAF;AAAYJ,MAAAA,SAAZ;AAAuBC,MAAAA,QAAvB;AAAiCE,MAAAA,KAAjC;AAAwCD,MAAAA;AAAxC,KAAD,MAAsD;AACvEH,MAAAA,OAAO,EAAE;AACPC,QAAAA,SADO;AAEPC,QAAAA,QAFO;AAGPC,QAAAA,KAHO;AAIPC,QAAAA;AAJO,OAD8D;AAOvEC,MAAAA;AAPuE,KAAtD,CAAnB;;AASA,QAAIU,WAAJ,EAAiB;AACfH,MAAAA,QAAQ,CAAC3B,SAAS,CAACsF,UAAU,CAACD,MAAD,CAAX,CAAV,CAAR;AACD,KAFD,MAEO;AACLlB,MAAAA,WAAW,CAAC,KAAD,CAAX;AACAe,MAAAA,UAAU,CAAC,MAAM;AACff,QAAAA,WAAW,CAAC,IAAD,CAAX;AACD,OAFS,EAEP,CAFO,CAAV;AAGAxC,MAAAA,QAAQ,CAACxB,UAAU,CAACyB,QAAD,EAAW0D,UAAU,CAACD,MAAD,CAArB,CAAX,CAAR;AACAF,MAAAA,mBAAmB;AACpB;;AACD1B,IAAAA,UAAU,CAAC,IAAD,CAAV;AACD,GArBD;;AAuBA,QAAM8B,QAAQ,GAAG,MAAM;AACrBZ,IAAAA,cAAc,CAAC,KAAD,CAAd;AACAQ,IAAAA,mBAAmB;AACnBD,IAAAA,UAAU,CAAC,MAAM;AACfP,MAAAA,cAAc,CAAC,IAAD,CAAd;AACD,KAFS,EAEP,GAFO,CAAV;AAGD,GAND;;AAQA,QAAMa,cAAc,GAAIC,SAAD,IAAe;AACpCT,IAAAA,OAAO,CAACC,GAAR,CAAY,SAAZ,EAAuBQ,SAAvB;AACD,GAFD;;AAIAjG,EAAAA,SAAS,CAAC,MAAM;AACd,QAAI2C,KAAJ,EAAW;AACT,oBAAa,OAAb,EAAsB;AACpBuD,QAAAA,OAAO,EAAE,OADW;AAEpBC,QAAAA,WAAW,EAAExD;AAFO,OAAtB;AAID;AACF,GAPQ,EAON,CAACA,KAAD,CAPM,CAAT;AAQA3C,EAAAA,SAAS,CAAC,MAAM;AACd,QAAI4C,OAAJ,EAAa;AACXT,MAAAA,QAAQ,CAACtB,YAAD,CAAR;AACA,UAAIyB,WAAJ,EAAiB+B,qBAAqB,CAAC,IAAD,CAArB;;AACjB,UAAI,CAAC/B,WAAL,EAAkB;AAChBiC,QAAAA,iBAAiB,CAAC,KAAD,CAAjB;AACAE,QAAAA,qBAAqB,CAAC,KAAD,CAArB;AACD;AACF;AACF,GATQ,EASN,CAAC7B,OAAD,CATM,CAAT;;AAWA,MAAIwB,kBAAkB,IAAIvB,aAA1B,EAAyC;AACvC,QAAIuD,IAAI,GAAG;AACTC,MAAAA,QAAQ,mCAA4BxD,aAAa,CAACyD,GAA1C;AADC,KAAX;AAIA,wBAAO,oBAAC,QAAD;AAAU,MAAA,EAAE,EAAEF,IAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAAP;AACD;;AAED,sBACE,uDACE,oBAAC,KAAD,CAAO,QAAP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,MAAD;AACE,IAAA,IAAI,EAAE9B,gBADR;AAEE,IAAA,OAAO,EAAC,2DAFV;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,eAME,oBAAC,oBAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,aAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACG,CAACJ,aAAD,GACC5B,WAAW,IAAIO,aAAf,gBACE,uDACE;AACE,IAAA,IAAI,EAAE0C,IADR;AAEE,IAAA,MAAM,EAAC,UAFT;AAGE,IAAA,aAAa,EAAET,UAHjB;AAIE,IAAA,QAAQ,EAAEc,QAJZ;AAKE,IAAA,cAAc,EAAEI,cALlB;AAME,IAAA,cAAc,EAAGO,KAAD,IAAW;AACzBxB,MAAAA,aAAa,iCAAMD,UAAN,GAAqByB,KAArB,EAAb;AACAhC,MAAAA,iBAAiB,CAAC,IAAD,CAAjB;AACAE,MAAAA,qBAAqB,CAAC,IAAD,CAArB;AACD,KAVH;AAWE,IAAA,kBAAkB,MAXpB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAaE,oBAAC,MAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,KAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACGnC,WAAW,GACRV,QAAQ,4BACWA,QADX,UAEN,cAHM,2BAIQiB,aAAa,CAACjB,QAJtB,OADd,CADF,eAQE,oBAAC,kBAAD;AAAoB,IAAA,SAAS,EAAC,oBAA9B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE;AAAK,IAAA,SAAS,EAAC,qBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACG,CAACU,WAAD,gBACC,0CACGgC,gBAAgB,gBACf,oBAAC,IAAD;AAAM,IAAA,EAAE,8BAAuBlC,QAAvB,CAAR;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE;AAAQ,IAAA,SAAS,EAAC,cAAlB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cADF,CADe,gBAOf,oBAAC,IAAD;AAAM,IAAA,EAAE,8BAAuBA,QAAvB,CAAR;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE;AAAQ,IAAA,SAAS,EAAC,cAAlB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YADF,CARJ,EAaGkC,gBAAgB,gBACf;AACE,IAAA,IAAI,EAAC,SADP;AAEE,IAAA,OAAO,EAAEN,SAFX;AAGE,IAAA,QAAQ,EAAC,QAHX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBADe,gBASf;AAAQ,IAAA,IAAI,EAAC,SAAb;AAAuB,IAAA,QAAQ,MAA/B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBAtBJ,CADD,gBA6BC,uDACE,oBAAC,IAAD;AAAM,IAAA,EAAE,EAAC,YAAT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE;AAAQ,IAAA,SAAS,EAAC,cAAlB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cADF,CADF,eAIE;AACE,IAAA,IAAI,EAAC,SADP;AAEE,IAAA,OAAO,EAAEA,SAFX;AAGE,IAAA,QAAQ,EAAC,QAHX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YAJF,CA9BJ,CADF,CARF,CAbF,eAqEE,oBAAC,GAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,kBAAD;AAAoB,IAAA,SAAS,EAAC,UAA9B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE;AAAK,IAAA,MAAM,EAAE,EAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE;AAAK,IAAA,EAAE,EAAE,EAAT;AAAa,IAAA,EAAE,EAAE,EAAjB;AAAqB,IAAA,EAAE,EAAE,EAAzB;AAA6B,IAAA,IAAI,EAAE,EAAnC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE;AAAK,IAAA,MAAM,EAAE,EAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE;AAAK,IAAA,EAAE,EAAE,EAAT;AAAa,IAAA,EAAE,EAAE,EAAjB;AAAqB,IAAA,EAAE,EAAE,EAAzB;AAA6B,IAAA,IAAI,EAAE,EAAnC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,0BAAM,IAAN;AACE,IAAA,KAAK,EAAC,WADR;AAEE,IAAA,IAAI,EAAC,UAFP;AAGE,IAAA,KAAK,EAAE,CACL;AACEwC,MAAAA,QAAQ,EAAE,IADZ;AAEEN,MAAAA,OAAO,EAAE;AAFX,KADK,CAHT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAUE;AACE,IAAA,WAAW,EAAC,WADd;AAEE,IAAA,QAAQ,EAAGO,CAAD,IAAO;AACf1C,MAAAA,WAAW,CAAC0C,CAAC,CAACC,MAAF,CAASH,KAAV,CAAX;AACD,KAJH;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAVF,CADF,CADF,CADF,eAuBE;AAAK,IAAA,MAAM,EAAE,EAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE;AAAK,IAAA,EAAE,EAAE,EAAT;AAAa,IAAA,EAAE,EAAE,EAAjB;AAAqB,IAAA,EAAE,EAAE,EAAzB;AAA6B,IAAA,IAAI,EAAE,EAAnC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,0BAAM,IAAN;AACE,IAAA,KAAK,EAAC,YADR;AAEE,IAAA,IAAI,EAAC,WAFP;AAGE,IAAA,KAAK,EAAE,CACL;AACEC,MAAAA,QAAQ,EAAE,IADZ;AAEEN,MAAAA,OAAO,EAAE;AAFX,KADK,CAHT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAUE;AAAO,IAAA,WAAW,EAAC,YAAnB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAVF,CADF,CADF,eAeE;AAAK,IAAA,EAAE,EAAE,EAAT;AAAa,IAAA,EAAE,EAAE,EAAjB;AAAqB,IAAA,EAAE,EAAE,EAAzB;AAA6B,IAAA,IAAI,EAAE,EAAnC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,0BAAM,IAAN;AACE,IAAA,KAAK,EAAC,WADR;AAEE,IAAA,IAAI,EAAC,UAFP;AAGE,IAAA,KAAK,EAAE,CACL;AACEM,MAAAA,QAAQ,EAAE,IADZ;AAEEN,MAAAA,OAAO,EAAE;AAFX,KADK,CAHT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAUE;AAAO,IAAA,WAAW,EAAC,WAAnB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAVF,CADF,CAfF,eA6BE;AAAK,IAAA,EAAE,EAAE,EAAT;AAAa,IAAA,EAAE,EAAE,EAAjB;AAAqB,IAAA,EAAE,EAAE,EAAzB;AAA6B,IAAA,IAAI,EAAE,EAAnC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,0BAAM,IAAN;AACE,IAAA,KAAK,EAAC,OADR;AAEE,IAAA,IAAI,EAAC,OAFP;AAGE,IAAA,KAAK,EAAE,CAAC;AAAES,MAAAA,IAAI,EAAE;AAAR,KAAD,CAHT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAKE;AAAO,IAAA,WAAW,EAAC,OAAnB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IALF,CADF,CA7BF,eAsCE;AAAK,IAAA,EAAE,EAAE,EAAT;AAAa,IAAA,EAAE,EAAE,EAAjB;AAAqB,IAAA,EAAE,EAAE,EAAzB;AAA6B,IAAA,IAAI,EAAE,EAAnC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,0BAAM,IAAN;AAAW,IAAA,KAAK,EAAC,gBAAjB;AAAkC,IAAA,IAAI,EAAC,OAAvC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE;AAAO,IAAA,WAAW,EAAC,gBAAnB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,CADF,CAtCF,CAvBF,CADF,eAsEE;AAAK,IAAA,IAAI,EAAC,MAAV;AAAiB,IAAA,SAAS,EAAC,YAA3B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAEI;AACAjC,EAAAA,UAAU,gBACR,uDACE;AACE,IAAA,QAAQ,EAAEM,UADZ,CAEE;AAFF;AAGE,IAAA,GAAG,EAAC,qBAHN;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAKE,oBAAC,SAAD;AAAW,IAAA,MAAM,EAAC,KAAlB;AAAwB,IAAA,KAAK,EAAC,KAA9B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,WAAD;AAAa,IAAA,MAAM,EAAEI,aAArB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,CALF,eASE;AACE,IAAA,IAAI,EAAC,SADP;AAEE,IAAA,OAAO,EAAE,CAACF,WAFZ;AAGE,IAAA,OAAO,EAAEa,QAHX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAKE,oBAAC,eAAD;AACE,IAAA,QAAQ,eACN,oBAAC,WAAD;AACE,MAAA,MAAM,EAAEX,aADV,CAEE;AAFF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAFJ;AAOE,IAAA,QAAQ,YAAKA,aAAa,CAACxD,QAAnB,SAPV;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iBALF,CATF,CADF,CADQ,gBA+BR,oBAAC,MAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAlCN,CAtEF,CADF,CADF,CArEF,CADF,CADF,gBA2LE,oBAAC,MAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,KAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,yBADF,eAEE,oBAAC,kBAAD;AAAoB,IAAA,SAAS,EAAC,oBAA9B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE;AAAK,IAAA,SAAS,EAAC,qBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,IAAD;AAAM,IAAA,EAAE,EAAC,YAAT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE;AAAQ,IAAA,SAAS,EAAC,cAAlB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,0BADF,CADF,CADF,CADF,CAFF,CA5LH,gBA0MC,oBAAC,MAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IA3MJ,CADF,CANF,CADF,CADF;AA2ND,CA7YD;;AA+YA,eAAeC,aAAf","sourcesContent":["import Box from '@iso/components/utility/box'\nimport LayoutContent from '@iso/components/utility/layoutContent'\nimport LayoutContentWrapper from '@iso/components/utility/layoutWrapper'\nimport Loader from '@iso/components/utility/loader'\nimport {\n  Button,\n  Col,\n  Form,\n  Input,\n  notification,\n  Row,\n  Skeleton,\n  Spin,\n} from 'antd'\nimport React, { useEffect, useState } from 'react'\nimport { useDispatch, useSelector } from 'react-redux'\nimport { Link, Redirect, useParams, useRouteMatch } from 'react-router-dom'\nimport {\n  addResume,\n  clearCurrentResume,\n  clearStatus,\n  editResume,\n  fetchResumeById,\n  fetchResumes,\n} from '../redux/resumes/actions'\nimport { Header, Title } from './AppLayout.style'\nimport InvoicePageWrapper from './Invoice/SingleInvoice.styles'\nimport RenderedPdf from './RenderedPdf/RenderedPdf'\nimport Styles from './AddEditResume.scss'\nimport { PDFDownloadLink, PDFViewer } from '@react-pdf/renderer'\nimport { Prompt } from 'react-router'\n\nexport const unstructured = ({\n  contact: { firstName, lastName, email, phone },\n  fileName,\n}) => ({ fileName, firstName, lastName, phone, email })\n\nconst AddEditResume = () => {\n  const [numPages, setNumPages] = useState(null)\n  const [pageNumber, setPageNumber] = useState(1)\n\n  function onDocumentLoadSuccess({ numPages }) {\n    setNumPages(numPages)\n  }\n  const dispatch = useDispatch()\n  const { resumeId } = useParams()\n\n  const match = useRouteMatch()\n  const isAddResume = match.path.endsWith('create-resume')\n  const { error, success, currentResume } = useSelector(\n    (state) => state.resumeData\n  )\n  const { resumes, count } = useSelector((state) => state.resumeData.resumes)\n\n  const { firstName, lastName, email } = useSelector((state) => state.Auth)\n  const defaultFileNamePrefix = 'New Resume'\n  /**\n   * Generate default filenames like New Resume 1, New Resume 2, etc\n   * @param {list of resumes} resumes\n   */\n  const defaultFileName = (resumes) => {\n    let maxIndex = -1\n    resumes.forEach((resume) => {\n      if (resume.fileName.startsWith(defaultFileNamePrefix)) {\n        const fileIndex =\n          resume.fileName === defaultFileNamePrefix\n            ? 0\n            : parseInt(resume.fileName.substr(defaultFileNamePrefix.length + 1))\n        if (Number.isInteger(fileIndex)) {\n          maxIndex = Math.max(maxIndex, fileIndex)\n        }\n      }\n    })\n    return maxIndex === -1\n      ? defaultFileNamePrefix\n      : `${defaultFileNamePrefix} ${maxIndex + 1}`\n  }\n  const [fileName, setFileName] = useState(defaultFileName(resumes))\n\n  const [isLoading, setLoading] = useState(false)\n  // So it should be false initially, except if I'm on add resume page\n  const [isPageLoading, setPageLoading] = useState(true)\n  const [redirectToReferrer, setRedirectToReferrer] = useState(false)\n  const [isChangeDetected, setChangeDetected] = useState(false)\n  const [isLiveChangeDetected, setLiveChangeDetected] = useState(false)\n  // Hackey workaround for React-PDF bug\n  const [isPdfReady, setPdfReady] = useState(true)\n  const [isUpdating, setUpdating] = useState(false)\n  const [liveResume, setLiveResume] = useState(\n    isAddResume\n      ? {\n          fileName,\n          firstName,\n          lastName,\n          email,\n        }\n      : {\n          ...unstructured(currentResume),\n        }\n  )\n  const [isSpinning, setSpinning] = useState(false)\n  const [canDownload, setCanDownload] = useState(true)\n\n  const [delayedResume, setDelayedResume] = useState(liveResume)\n\n  const [form] = Form.useForm()\n\n  useEffect(() => {\n    if (!isUpdating && isLiveChangeDetected) {\n      console.log('liveResume', delayedResume, 'latestValue', liveResume)\n      setTimeout(() => {\n        setUpdating(true)\n        setTimeout(() => {\n          setUpdating(false)\n          setLiveChangeDetected(false)\n        }, 2000)\n      }, 9000)\n      setSpinning(true)\n      setTimeout(() => {\n        setSpinning(false)\n      }, 500)\n      setDelayedResume({ ...delayedResume, ...liveResume })\n    }\n  }, [isUpdating, isLiveChangeDetected])\n\n  useEffect(() => {\n    // If initially edit, fetch resume => add currentResume\n    if (!isAddResume) {\n      dispatch(fetchResumeById(resumeId))\n      // If initially add, clear current resume\n    } else {\n      dispatch(clearCurrentResume())\n      setRedirectToReferrer(false)\n    }\n  }, [])\n\n  useEffect(() => {\n    if (success || error) {\n      dispatch(clearStatus())\n      setLoading(false)\n      setPageLoading(false)\n    }\n  }, [success, error])\n\n  const updateDelayedResume = () => {\n    setSpinning(true)\n    setTimeout(() => {\n      setSpinning(false)\n    }, 500)\n    setDelayedResume({ ...delayedResume, ...liveResume })\n    setLiveChangeDetected(false)\n  }\n\n  const onFinish = (values) => {\n    const structured = ({ fileName, firstName, lastName, phone, email }) => ({\n      contact: {\n        firstName,\n        lastName,\n        email,\n        phone,\n      },\n      fileName,\n    })\n    if (isAddResume) {\n      dispatch(addResume(structured(values)))\n    } else {\n      setPdfReady(false)\n      setTimeout(() => {\n        setPdfReady(true)\n      }, 1)\n      dispatch(editResume(resumeId, structured(values)))\n      updateDelayedResume()\n    }\n    setLoading(true)\n  }\n\n  const download = () => {\n    setCanDownload(false)\n    updateDelayedResume()\n    setTimeout(() => {\n      setCanDownload(true)\n    }, 200)\n  }\n\n  const onFinishFailed = (errorInfo) => {\n    console.log('Failed:', errorInfo)\n  }\n\n  useEffect(() => {\n    if (error) {\n      notification['error']({\n        message: 'Error',\n        description: error,\n      })\n    }\n  }, [error])\n  useEffect(() => {\n    if (success) {\n      dispatch(fetchResumes)\n      if (isAddResume) setRedirectToReferrer(true)\n      if (!isAddResume) {\n        setChangeDetected(false)\n        setLiveChangeDetected(false)\n      }\n    }\n  }, [success])\n\n  if (redirectToReferrer && currentResume) {\n    let from = {\n      pathname: `/dashboard/edit-resume/${currentResume._id}`,\n    }\n\n    return <Redirect to={from} />\n  }\n\n  return (\n    <>\n      <React.Fragment>\n        <Prompt\n          when={isChangeDetected}\n          message=\"You have unsaved changes. Are you sure you want to leave?\"\n        />\n\n        <LayoutContentWrapper>\n          <LayoutContent>\n            {!isPageLoading ? (\n              isAddResume || currentResume ? (\n                <>\n                  <Form\n                    form={form}\n                    layout=\"vertical\"\n                    initialValues={liveResume}\n                    onFinish={onFinish}\n                    onFinishFailed={onFinishFailed}\n                    onValuesChange={(value) => {\n                      setLiveResume({ ...liveResume, ...value })\n                      setChangeDetected(true)\n                      setLiveChangeDetected(true)\n                    }}\n                    scrollToFirstError\n                  >\n                    <Header>\n                      <Title>\n                        {isAddResume\n                          ? fileName\n                            ? `Build Resume \"${fileName}\"`\n                            : 'Build Resume'\n                          : `Edit Resume \"${currentResume.fileName}\"`}\n                      </Title>\n                      <InvoicePageWrapper className=\"InvoicePageWrapper\">\n                        <div className=\"PageHeader viewMode\">\n                          {!isAddResume ? (\n                            <>\n                              {isChangeDetected ? (\n                                <Link to={`/dashboard/resume/${resumeId}`}>\n                                  <Button className=\"isoGoInvoBtn\">\n                                    Cancel\n                                  </Button>\n                                </Link>\n                              ) : (\n                                <Link to={`/dashboard/resume/${resumeId}`}>\n                                  <Button className=\"isoGoInvoBtn\">Done</Button>\n                                </Link>\n                              )}\n\n                              {isChangeDetected ? (\n                                <Button\n                                  type=\"primary\"\n                                  loading={isLoading}\n                                  htmlType=\"submit\"\n                                >\n                                  Save Changes\n                                </Button>\n                              ) : (\n                                <Button type=\"primary\" disabled>\n                                  Changes Saved!\n                                </Button>\n                              )}\n                            </>\n                          ) : (\n                            <>\n                              <Link to=\"/dashboard\">\n                                <Button className=\"isoGoInvoBtn\">Cancel</Button>\n                              </Link>\n                              <Button\n                                type=\"primary\"\n                                loading={isLoading}\n                                htmlType=\"submit\"\n                              >\n                                Save\n                              </Button>\n                            </>\n                          )}\n                        </div>\n                      </InvoicePageWrapper>\n                    </Header>\n\n                    <Box>\n                      <InvoicePageWrapper className=\"editView\">\n                        <Row gutter={24}>\n                          <Col xl={12} lg={12} md={12} span={24}>\n                            <Row gutter={16}>\n                              <Col xl={12} lg={12} md={12} span={24}>\n                                <Form.Item\n                                  label=\"File Name\"\n                                  name=\"fileName\"\n                                  rules={[\n                                    {\n                                      required: true,\n                                      message: 'Please input a file name!',\n                                    },\n                                  ]}\n                                >\n                                  <Input\n                                    placeholder=\"File Name\"\n                                    onChange={(e) => {\n                                      setFileName(e.target.value)\n                                    }}\n                                  />\n                                </Form.Item>\n                              </Col>\n                            </Row>\n\n                            <Row gutter={16}>\n                              <Col xl={12} lg={12} md={12} span={24}>\n                                <Form.Item\n                                  label=\"First Name\"\n                                  name=\"firstName\"\n                                  rules={[\n                                    {\n                                      required: true,\n                                      message: 'Please input your first name!',\n                                    },\n                                  ]}\n                                >\n                                  <Input placeholder=\"First Name\" />\n                                </Form.Item>\n                              </Col>\n                              <Col xl={12} lg={12} md={12} span={24}>\n                                <Form.Item\n                                  label=\"Last Name\"\n                                  name=\"lastName\"\n                                  rules={[\n                                    {\n                                      required: true,\n                                      message: 'Please input your last name!',\n                                    },\n                                  ]}\n                                >\n                                  <Input placeholder=\"Last Name\" />\n                                </Form.Item>\n                              </Col>\n                              <Col xl={12} lg={12} md={12} span={24}>\n                                <Form.Item\n                                  label=\"Email\"\n                                  name=\"email\"\n                                  rules={[{ type: 'email' }]}\n                                >\n                                  <Input placeholder=\"Email\" />\n                                </Form.Item>\n                              </Col>\n                              <Col xl={12} lg={12} md={12} span={24}>\n                                <Form.Item label=\"Contact Number\" name=\"phone\">\n                                  <Input placeholder=\"Contact Number\" />\n                                </Form.Item>\n                              </Col>\n                            </Row>\n                          </Col>\n\n                          <Col flex=\"auto\" className=\"iframeFull\">\n                            {\n                              // isReady\n                              isPdfReady ? (\n                                <>\n                                  <Spin\n                                    spinning={isSpinning}\n                                    // delay={700}\n                                    tip=\"Updating Preview...\"\n                                  >\n                                    <PDFViewer height=\"700\" width=\"95%\">\n                                      <RenderedPdf resume={delayedResume} />\n                                    </PDFViewer>\n\n                                    <Button\n                                      type=\"primary\"\n                                      loading={!canDownload}\n                                      onClick={download}\n                                    >\n                                      <PDFDownloadLink\n                                        document={\n                                          <RenderedPdf\n                                            resume={delayedResume}\n                                            // resume={{ fileName: 'dummy' }}\n                                          />\n                                        }\n                                        fileName={`${delayedResume.fileName}.pdf`}\n                                      >\n                                        Download!\n                                      </PDFDownloadLink>\n                                    </Button>\n                                  </Spin>\n                                </>\n                              ) : (\n                                <Loader />\n                              )\n                            }\n                          </Col>\n                        </Row>\n                      </InvoicePageWrapper>\n                    </Box>\n                  </Form>\n                </>\n              ) : (\n                <Header>\n                  <Title>Resume not found!</Title>\n                  <InvoicePageWrapper className=\"InvoicePageWrapper\">\n                    <div className=\"PageHeader viewMode\">\n                      <Link to=\"/dashboard\">\n                        <Button className=\"isoGoInvoBtn\">\n                          <span>Back to My Resumes</span>\n                        </Button>\n                      </Link>\n                    </div>\n                  </InvoicePageWrapper>\n                </Header>\n              )\n            ) : (\n              <Loader />\n            )}\n          </LayoutContent>\n        </LayoutContentWrapper>\n      </React.Fragment>\n    </>\n  )\n}\n\nexport default AddEditResume\n"]},"metadata":{},"sourceType":"module"}