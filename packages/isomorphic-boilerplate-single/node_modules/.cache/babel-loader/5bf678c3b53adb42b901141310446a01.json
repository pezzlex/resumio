{"ast":null,"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\");\n\nexports.__esModule = true;\nexports[\"default\"] = void 0;\n\nvar R = _interopRequireWildcard(require(\"ramda\"));\n\nvar _sort = _interopRequireDefault(require(\"./sort\"));\n\nvar _isEmpty = _interopRequireDefault(require(\"./isEmpty\"));\n\nvar sortPoints = function sortPoints(a, b) {\n  return a[1] - b[1] || a[3] - b[3];\n};\n\nvar mergeAttributes = function mergeAttributes(key, left, right) {\n  return key === 'attributes' ? R.merge(left, right) : right;\n};\n\nvar generatePoints = R.o(R.sort(sortPoints), R.addIndex(R.chain)(function (run, i) {\n  return [['start', run.start, run.attributes, i], ['end', run.end, run.attributes, i]];\n}));\nvar flattenEmptyRuns = R.compose(R.map(R.reduce(R.mergeDeepWithKey(mergeAttributes), {})), R.groupWith(R.eqProps('start')));\n\nvar flattenRegularRuns = function flattenRegularRuns(runs) {\n  var res = [];\n  var points = generatePoints(runs);\n  var start = -1;\n  var attrs = {};\n  var stack = [];\n\n  for (var _iterator = points, _isArray = Array.isArray(_iterator), _i = 0, _iterator = _isArray ? _iterator : _iterator[Symbol.iterator]();;) {\n    var _ref;\n\n    if (_isArray) {\n      if (_i >= _iterator.length) break;\n      _ref = _iterator[_i++];\n    } else {\n      _i = _iterator.next();\n      if (_i.done) break;\n      _ref = _i.value;\n    }\n\n    var _ref2 = _ref,\n        type = _ref2[0],\n        offset = _ref2[1],\n        attributes = _ref2[2];\n\n    if (start !== -1 && start < offset) {\n      res.push({\n        start: start,\n        end: offset,\n        attributes: attrs\n      });\n    }\n\n    if (type === 'start') {\n      stack.push(attributes);\n      attrs = R.merge(attrs, attributes);\n    } else {\n      attrs = {};\n\n      for (var i = 0; i < stack.length; i++) {\n        if (stack[i] === attributes) {\n          stack.splice(i--, 1);\n        } else {\n          attrs = R.merge(attrs, stack[i]);\n        }\n      }\n    }\n\n    start = offset;\n  }\n\n  return res;\n};\n/**\n * Flatten many runs\n *\n * @param  {Array}  runs\n * @return {Array} flatten runs\n */\n\n\nvar flatten = function flatten(runs) {\n  if (runs === void 0) {\n    runs = [];\n  }\n\n  return R.compose(_sort[\"default\"], R.apply(R.useWith(R.concat, [flattenEmptyRuns, flattenRegularRuns])), R.partition(_isEmpty[\"default\"]))(runs);\n};\n\nvar _default = flatten;\nexports[\"default\"] = _default;","map":{"version":3,"sources":["/Users/pezannekhambatta/Desktop/resumio/node_modules/@react-pdf/textkit/run/flatten.js"],"names":["_interopRequireDefault","require","_interopRequireWildcard","exports","__esModule","R","_sort","_isEmpty","sortPoints","a","b","mergeAttributes","key","left","right","merge","generatePoints","o","sort","addIndex","chain","run","i","start","attributes","end","flattenEmptyRuns","compose","map","reduce","mergeDeepWithKey","groupWith","eqProps","flattenRegularRuns","runs","res","points","attrs","stack","_iterator","_isArray","Array","isArray","_i","Symbol","iterator","_ref","length","next","done","value","_ref2","type","offset","push","splice","flatten","apply","useWith","concat","partition","_default"],"mappings":"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","sourcesContent":["\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\");\n\nexports.__esModule = true;\nexports[\"default\"] = void 0;\n\nvar R = _interopRequireWildcard(require(\"ramda\"));\n\nvar _sort = _interopRequireDefault(require(\"./sort\"));\n\nvar _isEmpty = _interopRequireDefault(require(\"./isEmpty\"));\n\nvar sortPoints = function sortPoints(a, b) {\n  return a[1] - b[1] || a[3] - b[3];\n};\n\nvar mergeAttributes = function mergeAttributes(key, left, right) {\n  return key === 'attributes' ? R.merge(left, right) : right;\n};\n\nvar generatePoints = R.o(R.sort(sortPoints), R.addIndex(R.chain)(function (run, i) {\n  return [['start', run.start, run.attributes, i], ['end', run.end, run.attributes, i]];\n}));\nvar flattenEmptyRuns = R.compose(R.map(R.reduce(R.mergeDeepWithKey(mergeAttributes), {})), R.groupWith(R.eqProps('start')));\n\nvar flattenRegularRuns = function flattenRegularRuns(runs) {\n  var res = [];\n  var points = generatePoints(runs);\n  var start = -1;\n  var attrs = {};\n  var stack = [];\n\n  for (var _iterator = points, _isArray = Array.isArray(_iterator), _i = 0, _iterator = _isArray ? _iterator : _iterator[Symbol.iterator]();;) {\n    var _ref;\n\n    if (_isArray) {\n      if (_i >= _iterator.length) break;\n      _ref = _iterator[_i++];\n    } else {\n      _i = _iterator.next();\n      if (_i.done) break;\n      _ref = _i.value;\n    }\n\n    var _ref2 = _ref,\n        type = _ref2[0],\n        offset = _ref2[1],\n        attributes = _ref2[2];\n\n    if (start !== -1 && start < offset) {\n      res.push({\n        start: start,\n        end: offset,\n        attributes: attrs\n      });\n    }\n\n    if (type === 'start') {\n      stack.push(attributes);\n      attrs = R.merge(attrs, attributes);\n    } else {\n      attrs = {};\n\n      for (var i = 0; i < stack.length; i++) {\n        if (stack[i] === attributes) {\n          stack.splice(i--, 1);\n        } else {\n          attrs = R.merge(attrs, stack[i]);\n        }\n      }\n    }\n\n    start = offset;\n  }\n\n  return res;\n};\n/**\n * Flatten many runs\n *\n * @param  {Array}  runs\n * @return {Array} flatten runs\n */\n\n\nvar flatten = function flatten(runs) {\n  if (runs === void 0) {\n    runs = [];\n  }\n\n  return R.compose(_sort[\"default\"], R.apply(R.useWith(R.concat, [flattenEmptyRuns, flattenRegularRuns])), R.partition(_isEmpty[\"default\"]))(runs);\n};\n\nvar _default = flatten;\nexports[\"default\"] = _default;"]},"metadata":{},"sourceType":"script"}