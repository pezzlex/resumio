{"ast":null,"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = exports.getDocumentRef = exports.getCollectionRef = void 0;\n\nvar _regenerator = _interopRequireDefault(require(\"@babel/runtime/regenerator\"));\n\nvar _reduxSaga = require(\"redux-saga\");\n\nvar _effects = require(\"redux-saga/effects\");\n\nvar _assert = _interopRequireDefault(require(\"./assert\"));\n\nvar _utils = require(\"./utils\");\n\nvar _marked = /*#__PURE__*/_regenerator.default.mark(addDocument),\n    _marked2 = /*#__PURE__*/_regenerator.default.mark(deleteDocument),\n    _marked3 = /*#__PURE__*/_regenerator.default.mark(getCollection),\n    _marked4 = /*#__PURE__*/_regenerator.default.mark(getDocument),\n    _marked5 = /*#__PURE__*/_regenerator.default.mark(setDocument),\n    _marked6 = /*#__PURE__*/_regenerator.default.mark(updateDocument),\n    _marked7 = /*#__PURE__*/_regenerator.default.mark(syncCollection),\n    _marked8 = /*#__PURE__*/_regenerator.default.mark(syncDocument);\n\nvar getCollectionRef = function getCollectionRef(rsf, pathOrRef) {\n  (0, _assert.default)(!!rsf.app.firestore, \"Firestore isn't installed. \" + \"Did you forget to `import '@firebase/firestore'`? \" + 'See https://redux-saga-firebase.js.org/ for more information.');\n  return typeof pathOrRef === 'string' ? rsf.app.firestore().collection(pathOrRef) : pathOrRef;\n};\n\nexports.getCollectionRef = getCollectionRef;\n\nvar getDocumentRef = function getDocumentRef(rsf, pathOrRef) {\n  (0, _assert.default)(!!rsf.app.firestore, \"Firestore isn't installed. \" + \"Did you forget to `import '@firebase/firestore'`? \" + 'See https://redux-saga-firebase.js.org/ for more information.');\n  return typeof pathOrRef === 'string' ? rsf.app.firestore().doc(pathOrRef) : pathOrRef;\n};\n\nexports.getDocumentRef = getDocumentRef;\n\nfunction addDocument(collectionRef, data) {\n  var collection;\n  return _regenerator.default.wrap(function addDocument$(_context) {\n    while (1) {\n      switch (_context.prev = _context.next) {\n        case 0:\n          collection = getCollectionRef(this, collectionRef);\n          _context.next = 3;\n          return (0, _effects.call)([collection, collection.add], data);\n\n        case 3:\n          return _context.abrupt(\"return\", _context.sent);\n\n        case 4:\n        case \"end\":\n          return _context.stop();\n      }\n    }\n  }, _marked, this);\n}\n\nfunction channel(pathOrRef) {\n  var type = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 'collection';\n  var buffer = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : _reduxSaga.buffers.none();\n  var snapshotListenOptions = arguments.length > 3 ? arguments[3] : undefined;\n  var ref = type === 'collection' ? getCollectionRef(this, pathOrRef) : getDocumentRef(this, pathOrRef);\n  var channel = (0, _reduxSaga.eventChannel)(function (emit) {\n    var unsubscribe = snapshotListenOptions ? ref.onSnapshot(snapshotListenOptions, emit) : ref.onSnapshot(emit); // Returns unsubscribe function\n\n    return unsubscribe;\n  }, buffer);\n  return channel;\n}\n\nfunction deleteDocument(documentRef) {\n  var doc;\n  return _regenerator.default.wrap(function deleteDocument$(_context2) {\n    while (1) {\n      switch (_context2.prev = _context2.next) {\n        case 0:\n          doc = getDocumentRef(this, documentRef);\n          _context2.next = 3;\n          return (0, _effects.call)([doc, doc.delete]);\n\n        case 3:\n          return _context2.abrupt(\"return\", _context2.sent);\n\n        case 4:\n        case \"end\":\n          return _context2.stop();\n      }\n    }\n  }, _marked2, this);\n}\n\nfunction getCollection(collectionRef) {\n  var collection;\n  return _regenerator.default.wrap(function getCollection$(_context3) {\n    while (1) {\n      switch (_context3.prev = _context3.next) {\n        case 0:\n          collection = getCollectionRef(this, collectionRef);\n          _context3.next = 3;\n          return (0, _effects.call)([collection, collection.get]);\n\n        case 3:\n          return _context3.abrupt(\"return\", _context3.sent);\n\n        case 4:\n        case \"end\":\n          return _context3.stop();\n      }\n    }\n  }, _marked3, this);\n}\n\nfunction getDocument(documentRef) {\n  var doc;\n  return _regenerator.default.wrap(function getDocument$(_context4) {\n    while (1) {\n      switch (_context4.prev = _context4.next) {\n        case 0:\n          doc = getDocumentRef(this, documentRef);\n          _context4.next = 3;\n          return (0, _effects.call)([doc, doc.get]);\n\n        case 3:\n          return _context4.abrupt(\"return\", _context4.sent);\n\n        case 4:\n        case \"end\":\n          return _context4.stop();\n      }\n    }\n  }, _marked4, this);\n}\n\nfunction setDocument(documentRef, data, options) {\n  var doc;\n  return _regenerator.default.wrap(function setDocument$(_context5) {\n    while (1) {\n      switch (_context5.prev = _context5.next) {\n        case 0:\n          doc = getDocumentRef(this, documentRef);\n          _context5.next = 3;\n          return (0, _effects.call)([doc, doc.set], data, options);\n\n        case 3:\n          return _context5.abrupt(\"return\", _context5.sent);\n\n        case 4:\n        case \"end\":\n          return _context5.stop();\n      }\n    }\n  }, _marked5, this);\n}\n\nfunction updateDocument(documentRef) {\n  var doc,\n      _len,\n      args,\n      _key,\n      _args6 = arguments;\n\n  return _regenerator.default.wrap(function updateDocument$(_context6) {\n    while (1) {\n      switch (_context6.prev = _context6.next) {\n        case 0:\n          doc = getDocumentRef(this, documentRef); // @ts-ignore\n\n          for (_len = _args6.length, args = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n            args[_key - 1] = _args6[_key];\n          }\n\n          _context6.next = 4;\n          return _effects.call.apply(void 0, [[doc, doc.update]].concat(args));\n\n        case 4:\n          return _context6.abrupt(\"return\", _context6.sent);\n\n        case 5:\n        case \"end\":\n          return _context6.stop();\n      }\n    }\n  }, _marked6, this);\n}\n\nfunction syncCollection(pathOrRef, options) {\n  var channel;\n  return _regenerator.default.wrap(function syncCollection$(_context7) {\n    while (1) {\n      switch (_context7.prev = _context7.next) {\n        case 0:\n          _context7.next = 2;\n          return (0, _effects.call)(this.firestore.channel, pathOrRef, 'collection', undefined, options.snapshotListenOptions);\n\n        case 2:\n          channel = _context7.sent;\n          _context7.next = 5;\n          return (0, _effects.fork)(_utils.syncChannel, channel, options);\n\n        case 5:\n        case \"end\":\n          return _context7.stop();\n      }\n    }\n  }, _marked7, this);\n}\n\nfunction syncDocument(pathOrRef, options) {\n  var channel;\n  return _regenerator.default.wrap(function syncDocument$(_context8) {\n    while (1) {\n      switch (_context8.prev = _context8.next) {\n        case 0:\n          _context8.next = 2;\n          return (0, _effects.call)(this.firestore.channel, pathOrRef, 'document', undefined, options.snapshotListenOptions);\n\n        case 2:\n          channel = _context8.sent;\n          _context8.next = 5;\n          return (0, _effects.fork)(_utils.syncChannel, channel, options);\n\n        case 5:\n        case \"end\":\n          return _context8.stop();\n      }\n    }\n  }, _marked8, this);\n}\n\nvar _default = {\n  addDocument: addDocument,\n  channel: channel,\n  deleteDocument: deleteDocument,\n  getCollection: getCollection,\n  getDocument: getDocument,\n  setDocument: setDocument,\n  syncCollection: syncCollection,\n  syncDocument: syncDocument,\n  updateDocument: updateDocument\n};\nexports.default = _default;","map":{"version":3,"sources":["/Users/pezannekhambatta/Desktop/resumio/node_modules/redux-saga-firebase/dist/firestore.js"],"names":["_interopRequireDefault","require","Object","defineProperty","exports","value","default","getDocumentRef","getCollectionRef","_regenerator","_reduxSaga","_effects","_assert","_utils","_marked","mark","addDocument","_marked2","deleteDocument","_marked3","getCollection","_marked4","getDocument","_marked5","setDocument","_marked6","updateDocument","_marked7","syncCollection","_marked8","syncDocument","rsf","pathOrRef","app","firestore","collection","doc","collectionRef","data","wrap","addDocument$","_context","prev","next","call","add","abrupt","sent","stop","channel","type","arguments","length","undefined","buffer","buffers","none","snapshotListenOptions","ref","eventChannel","emit","unsubscribe","onSnapshot","documentRef","deleteDocument$","_context2","delete","getCollection$","_context3","get","getDocument$","_context4","options","setDocument$","_context5","set","_len","args","_key","_args6","updateDocument$","_context6","Array","apply","update","concat","syncCollection$","_context7","fork","syncChannel","syncDocument$","_context8","_default"],"mappings":"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","sourcesContent":["\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = exports.getDocumentRef = exports.getCollectionRef = void 0;\n\nvar _regenerator = _interopRequireDefault(require(\"@babel/runtime/regenerator\"));\n\nvar _reduxSaga = require(\"redux-saga\");\n\nvar _effects = require(\"redux-saga/effects\");\n\nvar _assert = _interopRequireDefault(require(\"./assert\"));\n\nvar _utils = require(\"./utils\");\n\nvar _marked =\n/*#__PURE__*/\n_regenerator.default.mark(addDocument),\n    _marked2 =\n/*#__PURE__*/\n_regenerator.default.mark(deleteDocument),\n    _marked3 =\n/*#__PURE__*/\n_regenerator.default.mark(getCollection),\n    _marked4 =\n/*#__PURE__*/\n_regenerator.default.mark(getDocument),\n    _marked5 =\n/*#__PURE__*/\n_regenerator.default.mark(setDocument),\n    _marked6 =\n/*#__PURE__*/\n_regenerator.default.mark(updateDocument),\n    _marked7 =\n/*#__PURE__*/\n_regenerator.default.mark(syncCollection),\n    _marked8 =\n/*#__PURE__*/\n_regenerator.default.mark(syncDocument);\n\nvar getCollectionRef = function getCollectionRef(rsf, pathOrRef) {\n  (0, _assert.default)(!!rsf.app.firestore, \"Firestore isn't installed. \" + \"Did you forget to `import '@firebase/firestore'`? \" + 'See https://redux-saga-firebase.js.org/ for more information.');\n  return typeof pathOrRef === 'string' ? rsf.app.firestore().collection(pathOrRef) : pathOrRef;\n};\n\nexports.getCollectionRef = getCollectionRef;\n\nvar getDocumentRef = function getDocumentRef(rsf, pathOrRef) {\n  (0, _assert.default)(!!rsf.app.firestore, \"Firestore isn't installed. \" + \"Did you forget to `import '@firebase/firestore'`? \" + 'See https://redux-saga-firebase.js.org/ for more information.');\n  return typeof pathOrRef === 'string' ? rsf.app.firestore().doc(pathOrRef) : pathOrRef;\n};\n\nexports.getDocumentRef = getDocumentRef;\n\nfunction addDocument(collectionRef, data) {\n  var collection;\n  return _regenerator.default.wrap(function addDocument$(_context) {\n    while (1) {\n      switch (_context.prev = _context.next) {\n        case 0:\n          collection = getCollectionRef(this, collectionRef);\n          _context.next = 3;\n          return (0, _effects.call)([collection, collection.add], data);\n\n        case 3:\n          return _context.abrupt(\"return\", _context.sent);\n\n        case 4:\n        case \"end\":\n          return _context.stop();\n      }\n    }\n  }, _marked, this);\n}\n\nfunction channel(pathOrRef) {\n  var type = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 'collection';\n  var buffer = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : _reduxSaga.buffers.none();\n  var snapshotListenOptions = arguments.length > 3 ? arguments[3] : undefined;\n  var ref = type === 'collection' ? getCollectionRef(this, pathOrRef) : getDocumentRef(this, pathOrRef);\n  var channel = (0, _reduxSaga.eventChannel)(function (emit) {\n    var unsubscribe = snapshotListenOptions ? ref.onSnapshot(snapshotListenOptions, emit) : ref.onSnapshot(emit); // Returns unsubscribe function\n\n    return unsubscribe;\n  }, buffer);\n  return channel;\n}\n\nfunction deleteDocument(documentRef) {\n  var doc;\n  return _regenerator.default.wrap(function deleteDocument$(_context2) {\n    while (1) {\n      switch (_context2.prev = _context2.next) {\n        case 0:\n          doc = getDocumentRef(this, documentRef);\n          _context2.next = 3;\n          return (0, _effects.call)([doc, doc.delete]);\n\n        case 3:\n          return _context2.abrupt(\"return\", _context2.sent);\n\n        case 4:\n        case \"end\":\n          return _context2.stop();\n      }\n    }\n  }, _marked2, this);\n}\n\nfunction getCollection(collectionRef) {\n  var collection;\n  return _regenerator.default.wrap(function getCollection$(_context3) {\n    while (1) {\n      switch (_context3.prev = _context3.next) {\n        case 0:\n          collection = getCollectionRef(this, collectionRef);\n          _context3.next = 3;\n          return (0, _effects.call)([collection, collection.get]);\n\n        case 3:\n          return _context3.abrupt(\"return\", _context3.sent);\n\n        case 4:\n        case \"end\":\n          return _context3.stop();\n      }\n    }\n  }, _marked3, this);\n}\n\nfunction getDocument(documentRef) {\n  var doc;\n  return _regenerator.default.wrap(function getDocument$(_context4) {\n    while (1) {\n      switch (_context4.prev = _context4.next) {\n        case 0:\n          doc = getDocumentRef(this, documentRef);\n          _context4.next = 3;\n          return (0, _effects.call)([doc, doc.get]);\n\n        case 3:\n          return _context4.abrupt(\"return\", _context4.sent);\n\n        case 4:\n        case \"end\":\n          return _context4.stop();\n      }\n    }\n  }, _marked4, this);\n}\n\nfunction setDocument(documentRef, data, options) {\n  var doc;\n  return _regenerator.default.wrap(function setDocument$(_context5) {\n    while (1) {\n      switch (_context5.prev = _context5.next) {\n        case 0:\n          doc = getDocumentRef(this, documentRef);\n          _context5.next = 3;\n          return (0, _effects.call)([doc, doc.set], data, options);\n\n        case 3:\n          return _context5.abrupt(\"return\", _context5.sent);\n\n        case 4:\n        case \"end\":\n          return _context5.stop();\n      }\n    }\n  }, _marked5, this);\n}\n\nfunction updateDocument(documentRef) {\n  var doc,\n      _len,\n      args,\n      _key,\n      _args6 = arguments;\n\n  return _regenerator.default.wrap(function updateDocument$(_context6) {\n    while (1) {\n      switch (_context6.prev = _context6.next) {\n        case 0:\n          doc = getDocumentRef(this, documentRef); // @ts-ignore\n\n          for (_len = _args6.length, args = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n            args[_key - 1] = _args6[_key];\n          }\n\n          _context6.next = 4;\n          return _effects.call.apply(void 0, [[doc, doc.update]].concat(args));\n\n        case 4:\n          return _context6.abrupt(\"return\", _context6.sent);\n\n        case 5:\n        case \"end\":\n          return _context6.stop();\n      }\n    }\n  }, _marked6, this);\n}\n\nfunction syncCollection(pathOrRef, options) {\n  var channel;\n  return _regenerator.default.wrap(function syncCollection$(_context7) {\n    while (1) {\n      switch (_context7.prev = _context7.next) {\n        case 0:\n          _context7.next = 2;\n          return (0, _effects.call)(this.firestore.channel, pathOrRef, 'collection', undefined, options.snapshotListenOptions);\n\n        case 2:\n          channel = _context7.sent;\n          _context7.next = 5;\n          return (0, _effects.fork)(_utils.syncChannel, channel, options);\n\n        case 5:\n        case \"end\":\n          return _context7.stop();\n      }\n    }\n  }, _marked7, this);\n}\n\nfunction syncDocument(pathOrRef, options) {\n  var channel;\n  return _regenerator.default.wrap(function syncDocument$(_context8) {\n    while (1) {\n      switch (_context8.prev = _context8.next) {\n        case 0:\n          _context8.next = 2;\n          return (0, _effects.call)(this.firestore.channel, pathOrRef, 'document', undefined, options.snapshotListenOptions);\n\n        case 2:\n          channel = _context8.sent;\n          _context8.next = 5;\n          return (0, _effects.fork)(_utils.syncChannel, channel, options);\n\n        case 5:\n        case \"end\":\n          return _context8.stop();\n      }\n    }\n  }, _marked8, this);\n}\n\nvar _default = {\n  addDocument: addDocument,\n  channel: channel,\n  deleteDocument: deleteDocument,\n  getCollection: getCollection,\n  getDocument: getDocument,\n  setDocument: setDocument,\n  syncCollection: syncCollection,\n  syncDocument: syncDocument,\n  updateDocument: updateDocument\n};\nexports.default = _default;"]},"metadata":{},"sourceType":"script"}